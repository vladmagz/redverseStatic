<script>
  document.addEventListener("DOMContentLoaded", () => {
    const currentHost = location.host;
    document.querySelectorAll("a[href]").forEach(a => {
      try {
        const url = new URL(a.href, location.origin);
        if (url.host !== currentHost) {
          a.setAttribute("target", "_blank");
          a.setAttribute("rel", "noopener noreferrer");
        }
      } catch(e) {}
    });
  });
</script>