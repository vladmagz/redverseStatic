/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

(function initCjs() {
  const globalThisRecord = globalThis;
  globalThisRecord["__name"] ??= name;
  const originalRequire = require;
  if (originalRequire && !originalRequire.__isPatched) {
    require = Object.assign(
      (id) => requirePatched(id),
      originalRequire,
      {
        __isPatched: true
      }
    );
  }
  const newFuncs = {
    __extractDefault() {
      return extractDefault;
    },
    process() {
      const browserProcess = {
        browser: true,
        cwd() {
          return "/";
        },
        env: {},
        platform: "android"
      };
      return browserProcess;
    }
  };
  for (const key of Object.keys(newFuncs)) {
    globalThisRecord[key] ??= newFuncs[key]?.();
  }
  function name(obj) {
    return obj;
  }
  function extractDefault(module2) {
    return module2 && module2.__esModule && "default" in module2 ? module2.default : module2;
  }
  const OBSIDIAN_BUILT_IN_MODULE_NAMES = [
    "obsidian",
    "@codemirror/autocomplete",
    "@codemirror/collab",
    "@codemirror/commands",
    "@codemirror/language",
    "@codemirror/lint",
    "@codemirror/search",
    "@codemirror/state",
    "@codemirror/text",
    "@codemirror/view",
    "@lezer/common",
    "@lezer/lr",
    "@lezer/highlight"
  ];
  const DEPRECATED_OBSIDIAN_BUILT_IN_MODULE_NAMES = [
    "@codemirror/closebrackets",
    "@codemirror/comment",
    "@codemirror/fold",
    "@codemirror/gutter",
    "@codemirror/highlight",
    "@codemirror/history",
    "@codemirror/matchbrackets",
    "@codemirror/panel",
    "@codemirror/rangeset",
    "@codemirror/rectangular-selection",
    "@codemirror/stream-parser",
    "@codemirror/tooltip"
  ];
  function requirePatched(id) {
    if (OBSIDIAN_BUILT_IN_MODULE_NAMES.includes(id) || DEPRECATED_OBSIDIAN_BUILT_IN_MODULE_NAMES.includes(id)) {
      return originalRequire?.(id);
    }
    if (globalThis?.app?.isMobile) {
      if (id === "process" || id === "node:process") {
        console.debug(`The most likely you can safely ignore this error. Module not found: ${id}. Fake process object is returned instead.`);
        return globalThis.process;
      }
    } else {
      const module2 = originalRequire?.(id);
      if (module2) {
        return extractDefault(module2);
      }
    }
    console.debug(`The most likely you can safely ignore this error. Module not found: ${id}. Empty object is returned instead.`);
    return {};
  }
})();

"use strict";var Of=Object.create;var Fn=Object.defineProperty;var Df=Object.getOwnPropertyDescriptor;var Mf=Object.getOwnPropertyNames;var Nf=Object.getPrototypeOf,_f=Object.prototype.hasOwnProperty;var i=(t,e)=>Fn(t,"name",{value:e,configurable:!0});var Qe=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),ba=(t,e)=>{for(var n in e)Fn(t,n,{get:e[n],enumerable:!0})},ya=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of Mf(e))!_f.call(t,o)&&o!==n&&Fn(t,o,{get:()=>e[o],enumerable:!(r=Df(e,o))||r.enumerable});return t};var qt=(t,e,n)=>(n=t!=null?Of(Nf(t)):{},ya(e||!t||!t.__esModule?Fn(n,"default",{value:t,enumerable:!0}):n,t)),Bf=t=>ya(Fn({},"__esModule",{value:!0}),t);var Pa=Qe((vg,Ta)=>{"use strict";function Ze(t){if(typeof t!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}i(Ze,"assertPath");function Sa(t,e){for(var n="",r=0,o=-1,s=0,a,l=0;l<=t.length;++l){if(l<t.length)a=t.charCodeAt(l);else{if(a===47)break;a=47}if(a===47){if(!(o===l-1||s===1))if(o!==l-1&&s===2){if(n.length<2||r!==2||n.charCodeAt(n.length-1)!==46||n.charCodeAt(n.length-2)!==46){if(n.length>2){var u=n.lastIndexOf("/");if(u!==n.length-1){u===-1?(n="",r=0):(n=n.slice(0,u),r=n.length-1-n.lastIndexOf("/")),o=l,s=0;continue}}else if(n.length===2||n.length===1){n="",r=0,o=l,s=0;continue}}e&&(n.length>0?n+="/..":n="..",r=2)}else n.length>0?n+="/"+t.slice(o+1,l):n=t.slice(o+1,l),r=l-o-1;o=l,s=0}else a===46&&s!==-1?++s:s=-1}return n}i(Sa,"normalizeStringPosix");function Uf(t,e){var n=e.dir||e.root,r=e.base||(e.name||"")+(e.ext||"");return n?n===e.root?n+r:n+t+r:r}i(Uf,"_format");var Gt={resolve:i(function(){for(var e="",n=!1,r,o=arguments.length-1;o>=-1&&!n;o--){var s;o>=0?s=arguments[o]:(r===void 0&&(r=process.cwd()),s=r),Ze(s),s.length!==0&&(e=s+"/"+e,n=s.charCodeAt(0)===47)}return e=Sa(e,!n),n?e.length>0?"/"+e:"/":e.length>0?e:"."},"resolve"),normalize:i(function(e){if(Ze(e),e.length===0)return".";var n=e.charCodeAt(0)===47,r=e.charCodeAt(e.length-1)===47;return e=Sa(e,!n),e.length===0&&!n&&(e="."),e.length>0&&r&&(e+="/"),n?"/"+e:e},"normalize"),isAbsolute:i(function(e){return Ze(e),e.length>0&&e.charCodeAt(0)===47},"isAbsolute"),join:i(function(){if(arguments.length===0)return".";for(var e,n=0;n<arguments.length;++n){var r=arguments[n];Ze(r),r.length>0&&(e===void 0?e=r:e+="/"+r)}return e===void 0?".":Gt.normalize(e)},"join"),relative:i(function(e,n){if(Ze(e),Ze(n),e===n||(e=Gt.resolve(e),n=Gt.resolve(n),e===n))return"";for(var r=1;r<e.length&&e.charCodeAt(r)===47;++r);for(var o=e.length,s=o-r,a=1;a<n.length&&n.charCodeAt(a)===47;++a);for(var l=n.length,u=l-a,c=s<u?s:u,f=-1,d=0;d<=c;++d){if(d===c){if(u>c){if(n.charCodeAt(a+d)===47)return n.slice(a+d+1);if(d===0)return n.slice(a+d)}else s>c&&(e.charCodeAt(r+d)===47?f=d:d===0&&(f=0));break}var h=e.charCodeAt(r+d),p=n.charCodeAt(a+d);if(h!==p)break;h===47&&(f=d)}var w="";for(d=r+f+1;d<=o;++d)(d===o||e.charCodeAt(d)===47)&&(w.length===0?w+="..":w+="/..");return w.length>0?w+n.slice(a+f):(a+=f,n.charCodeAt(a)===47&&++a,n.slice(a))},"relative"),_makeLong:i(function(e){return e},"_makeLong"),dirname:i(function(e){if(Ze(e),e.length===0)return".";for(var n=e.charCodeAt(0),r=n===47,o=-1,s=!0,a=e.length-1;a>=1;--a)if(n=e.charCodeAt(a),n===47){if(!s){o=a;break}}else s=!1;return o===-1?r?"/":".":r&&o===1?"//":e.slice(0,o)},"dirname"),basename:i(function(e,n){if(n!==void 0&&typeof n!="string")throw new TypeError('"ext" argument must be a string');Ze(e);var r=0,o=-1,s=!0,a;if(n!==void 0&&n.length>0&&n.length<=e.length){if(n.length===e.length&&n===e)return"";var l=n.length-1,u=-1;for(a=e.length-1;a>=0;--a){var c=e.charCodeAt(a);if(c===47){if(!s){r=a+1;break}}else u===-1&&(s=!1,u=a+1),l>=0&&(c===n.charCodeAt(l)?--l===-1&&(o=a):(l=-1,o=u))}return r===o?o=u:o===-1&&(o=e.length),e.slice(r,o)}else{for(a=e.length-1;a>=0;--a)if(e.charCodeAt(a)===47){if(!s){r=a+1;break}}else o===-1&&(s=!1,o=a+1);return o===-1?"":e.slice(r,o)}},"basename"),extname:i(function(e){Ze(e);for(var n=-1,r=0,o=-1,s=!0,a=0,l=e.length-1;l>=0;--l){var u=e.charCodeAt(l);if(u===47){if(!s){r=l+1;break}continue}o===-1&&(s=!1,o=l+1),u===46?n===-1?n=l:a!==1&&(a=1):n!==-1&&(a=-1)}return n===-1||o===-1||a===0||a===1&&n===o-1&&n===r+1?"":e.slice(n,o)},"extname"),format:i(function(e){if(e===null||typeof e!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof e);return Uf("/",e)},"format"),parse:i(function(e){Ze(e);var n={root:"",dir:"",base:"",ext:"",name:""};if(e.length===0)return n;var r=e.charCodeAt(0),o=r===47,s;o?(n.root="/",s=1):s=0;for(var a=-1,l=0,u=-1,c=!0,f=e.length-1,d=0;f>=s;--f){if(r=e.charCodeAt(f),r===47){if(!c){l=f+1;break}continue}u===-1&&(c=!1,u=f+1),r===46?a===-1?a=f:d!==1&&(d=1):a!==-1&&(d=-1)}return a===-1||u===-1||d===0||d===1&&a===u-1&&a===l+1?u!==-1&&(l===0&&o?n.base=n.name=e.slice(1,u):n.base=n.name=e.slice(l,u)):(l===0&&o?(n.name=e.slice(1,a),n.base=e.slice(1,u)):(n.name=e.slice(l,a),n.base=e.slice(l,u)),n.ext=e.slice(a,u)),l>0?n.dir=e.slice(0,l-1):o&&(n.dir="/"),n},"parse"),sep:"/",delimiter:":",win32:null,posix:null};Gt.posix=Gt;Ta.exports=Gt});var ja=Qe((lw,Ua)=>{var Xt=1e3,Zt=Xt*60,en=Zt*60,Rt=en*24,td=Rt*7,nd=Rt*365.25;Ua.exports=function(t,e){e=e||{};var n=typeof t;if(n==="string"&&t.length>0)return rd(t);if(n==="number"&&isFinite(t))return e.long?od(t):id(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))};function rd(t){if(t=String(t),!(t.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(e){var n=parseFloat(e[1]),r=(e[2]||"ms").toLowerCase();switch(r){case"years":case"year":case"yrs":case"yr":case"y":return n*nd;case"weeks":case"week":case"w":return n*td;case"days":case"day":case"d":return n*Rt;case"hours":case"hour":case"hrs":case"hr":case"h":return n*en;case"minutes":case"minute":case"mins":case"min":case"m":return n*Zt;case"seconds":case"second":case"secs":case"sec":case"s":return n*Xt;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}}}i(rd,"parse");function id(t){var e=Math.abs(t);return e>=Rt?Math.round(t/Rt)+"d":e>=en?Math.round(t/en)+"h":e>=Zt?Math.round(t/Zt)+"m":e>=Xt?Math.round(t/Xt)+"s":t+"ms"}i(id,"fmtShort");function od(t){var e=Math.abs(t);return e>=Rt?gr(t,e,Rt,"day"):e>=en?gr(t,e,en,"hour"):e>=Zt?gr(t,e,Zt,"minute"):e>=Xt?gr(t,e,Xt,"second"):t+" ms"}i(od,"fmtLong");function gr(t,e,n,r){var o=e>=n*1.5;return Math.round(t/n)+" "+r+(o?"s":"")}i(gr,"plural")});var xo=Qe((cw,Ka)=>{function sd(t){n.debug=n,n.default=n,n.coerce=u,n.disable=a,n.enable=o,n.enabled=l,n.humanize=ja(),n.destroy=c,Object.keys(t).forEach(f=>{n[f]=t[f]}),n.names=[],n.skips=[],n.formatters={};function e(f){let d=0;for(let h=0;h<f.length;h++)d=(d<<5)-d+f.charCodeAt(h),d|=0;return n.colors[Math.abs(d)%n.colors.length]}i(e,"selectColor"),n.selectColor=e;function n(f){let d,h=null,p,w;function x(...y){if(!x.enabled)return;let b=x,k=Number(new Date),v=k-(d||k);b.diff=v,b.prev=d,b.curr=k,d=k,y[0]=n.coerce(y[0]),typeof y[0]!="string"&&y.unshift("%O");let S=0;y[0]=y[0].replace(/%([a-zA-Z%])/g,(C,B)=>{if(C==="%%")return"%";S++;let H=n.formatters[B];if(typeof H=="function"){let D=y[S];C=H.call(b,D),y.splice(S,1),S--}return C}),n.formatArgs.call(b,y),(b.log||n.log).apply(b,y)}return i(x,"debug"),x.namespace=f,x.useColors=n.useColors(),x.color=n.selectColor(f),x.extend=r,x.destroy=n.destroy,Object.defineProperty(x,"enabled",{enumerable:!0,configurable:!1,get:i(()=>h!==null?h:(p!==n.namespaces&&(p=n.namespaces,w=n.enabled(f)),w),"get"),set:i(y=>{h=y},"set")}),typeof n.init=="function"&&n.init(x),x}i(n,"createDebug");function r(f,d){let h=n(this.namespace+(typeof d>"u"?":":d)+f);return h.log=this.log,h}i(r,"extend");function o(f){n.save(f),n.namespaces=f,n.names=[],n.skips=[];let d=(typeof f=="string"?f:"").trim().replace(/\s+/g,",").split(",").filter(Boolean);for(let h of d)h[0]==="-"?n.skips.push(h.slice(1)):n.names.push(h)}i(o,"enable");function s(f,d){let h=0,p=0,w=-1,x=0;for(;h<f.length;)if(p<d.length&&(d[p]===f[h]||d[p]==="*"))d[p]==="*"?(w=p,x=h,p++):(h++,p++);else if(w!==-1)p=w+1,x++,h=x;else return!1;for(;p<d.length&&d[p]==="*";)p++;return p===d.length}i(s,"matchesTemplate");function a(){let f=[...n.names,...n.skips.map(d=>"-"+d)].join(",");return n.enable(""),f}i(a,"disable");function l(f){for(let d of n.skips)if(s(f,d))return!1;for(let d of n.names)if(s(f,d))return!0;return!1}i(l,"enabled");function u(f){return f instanceof Error?f.stack||f.message:f}i(u,"coerce");function c(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return i(c,"destroy"),n.enable(n.load()),n}i(sd,"setup");Ka.exports=sd});var qa=Qe((Te,wr)=>{Te.formatArgs=ld;Te.save=ud;Te.load=cd;Te.useColors=ad;Te.storage=fd();Te.destroy=(()=>{let t=!1;return()=>{t||(t=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();Te.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function ad(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let t;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(t=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(t[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}i(ad,"useColors");function ld(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+wr.exports.humanize(this.diff),!this.useColors)return;let e="color: "+this.color;t.splice(1,0,e,"color: inherit");let n=0,r=0;t[0].replace(/%[a-zA-Z%]/g,o=>{o!=="%%"&&(n++,o==="%c"&&(r=n))}),t.splice(r,0,e)}i(ld,"formatArgs");Te.log=console.debug||console.log||(()=>{});function ud(t){try{t?Te.storage.setItem("debug",t):Te.storage.removeItem("debug")}catch{}}i(ud,"save");function cd(){let t;try{t=Te.storage.getItem("debug")||Te.storage.getItem("DEBUG")}catch{}return!t&&typeof process<"u"&&"env"in process&&(t=process.env.DEBUG),t}i(cd,"load");function fd(){try{return localStorage}catch{}}i(fd,"localstorage");wr.exports=xo()(Te);var{formatters:dd}=wr.exports;dd.j=function(t){try{return JSON.stringify(t)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}});var Ya=Qe((hw,Ga)=>{"use strict";Ga.exports=(t,e=process.argv)=>{let n=t.startsWith("-")?"":t.length===1?"-":"--",r=e.indexOf(n+t),o=e.indexOf("--");return r!==-1&&(o===-1||r<o)}});var Xa=Qe((pw,Qa)=>{"use strict";var hd=require("os"),Ja=require("tty"),$e=Ya(),{env:re}=process,br;$e("no-color")||$e("no-colors")||$e("color=false")||$e("color=never")?br=0:($e("color")||$e("colors")||$e("color=true")||$e("color=always"))&&(br=1);function pd(){if("FORCE_COLOR"in re)return re.FORCE_COLOR==="true"?1:re.FORCE_COLOR==="false"?0:re.FORCE_COLOR.length===0?1:Math.min(Number.parseInt(re.FORCE_COLOR,10),3)}i(pd,"envForceColor");function md(t){return t===0?!1:{level:t,hasBasic:!0,has256:t>=2,has16m:t>=3}}i(md,"translateLevel");function gd(t,{streamIsTTY:e,sniffFlags:n=!0}={}){let r=pd();r!==void 0&&(br=r);let o=n?br:r;if(o===0)return 0;if(n){if($e("color=16m")||$e("color=full")||$e("color=truecolor"))return 3;if($e("color=256"))return 2}if(t&&!e&&o===void 0)return 0;let s=o||0;if(re.TERM==="dumb")return s;if(process.platform==="win32"){let a=hd.release().split(".");return Number(a[0])>=10&&Number(a[2])>=10586?Number(a[2])>=14931?3:2:1}if("CI"in re)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE","DRONE"].some(a=>a in re)||re.CI_NAME==="codeship"?1:s;if("TEAMCITY_VERSION"in re)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(re.TEAMCITY_VERSION)?1:0;if(re.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in re){let a=Number.parseInt((re.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(re.TERM_PROGRAM){case"iTerm.app":return a>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(re.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(re.TERM)||"COLORTERM"in re?1:s}i(gd,"supportsColor");function Ao(t,e={}){let n=gd(t,{streamIsTTY:t&&t.isTTY,...e});return md(n)}i(Ao,"getSupportLevel");Qa.exports={supportsColor:Ao,stdout:Ao({isTTY:Ja.isatty(1)}),stderr:Ao({isTTY:Ja.isatty(2)})}});var el=Qe((ie,kr)=>{var wd=require("tty"),yr=require("util");ie.init=vd;ie.log=Cd;ie.formatArgs=yd;ie.save=xd;ie.load=Ad;ie.useColors=bd;ie.destroy=yr.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");ie.colors=[6,2,3,4,5,1];try{let t=Xa();t&&(t.stderr||t).level>=2&&(ie.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}ie.inspectOpts=Object.keys(process.env).filter(t=>/^debug_/i.test(t)).reduce((t,e)=>{let n=e.substring(6).toLowerCase().replace(/_([a-z])/g,(o,s)=>s.toUpperCase()),r=process.env[e];return/^(yes|on|true|enabled)$/i.test(r)?r=!0:/^(no|off|false|disabled)$/i.test(r)?r=!1:r==="null"?r=null:r=Number(r),t[n]=r,t},{});function bd(){return"colors"in ie.inspectOpts?!!ie.inspectOpts.colors:wd.isatty(process.stderr.fd)}i(bd,"useColors");function yd(t){let{namespace:e,useColors:n}=this;if(n){let r=this.color,o="\x1B[3"+(r<8?r:"8;5;"+r),s=`  ${o};1m${e} \x1B[0m`;t[0]=s+t[0].split(`
`).join(`
`+s),t.push(o+"m+"+kr.exports.humanize(this.diff)+"\x1B[0m")}else t[0]=kd()+e+" "+t[0]}i(yd,"formatArgs");function kd(){return ie.inspectOpts.hideDate?"":new Date().toISOString()+" "}i(kd,"getDate");function Cd(...t){return process.stderr.write(yr.formatWithOptions(ie.inspectOpts,...t)+`
`)}i(Cd,"log");function xd(t){t?process.env.DEBUG=t:delete process.env.DEBUG}i(xd,"save");function Ad(){return process.env.DEBUG}i(Ad,"load");function vd(t){t.inspectOpts={};let e=Object.keys(ie.inspectOpts);for(let n=0;n<e.length;n++)t.inspectOpts[e[n]]=ie.inspectOpts[e[n]]}i(vd,"init");kr.exports=xo()(ie);var{formatters:Za}=kr.exports;Za.o=function(t){return this.inspectOpts.colors=this.useColors,yr.inspect(t,this.inspectOpts).split(`
`).map(e=>e.trim()).join(" ")};Za.O=function(t){return this.inspectOpts.colors=this.useColors,yr.inspect(t,this.inspectOpts)}});var tl=Qe((ww,vo)=>{typeof process>"u"||process.type==="renderer"||process.browser===!0||process.__nwjs?vo.exports=qa():vo.exports=el()});var hl=Qe((Tr,dl)=>{(function(t,e){typeof Tr=="object"&&typeof dl<"u"?e(Tr):typeof define=="function"&&define.amd?define(["exports"],e):(t=typeof globalThis<"u"?globalThis:t||self,e(t.compareVersions={}))})(Tr,(function(t){"use strict";let e=/^[v^~<>=]*?(\d+)(?:\.([x*]|\d+)(?:\.([x*]|\d+)(?:\.([x*]|\d+))?(?:-([\da-z\-]+(?:\.[\da-z\-]+)*))?(?:\+[\da-z\-]+(?:\.[\da-z\-]+)*)?)?)?$/i,n=i(y=>{if(typeof y!="string")throw new TypeError("Invalid argument expected string");let b=y.match(e);if(!b)throw new Error(`Invalid argument not valid semver ('${y}' received)`);return b.shift(),b},"validateAndParse"),r=i(y=>y==="*"||y==="x"||y==="X","isWildcard"),o=i(y=>{let b=parseInt(y,10);return isNaN(b)?y:b},"tryParse"),s=i((y,b)=>typeof y!=typeof b?[String(y),String(b)]:[y,b],"forceType"),a=i((y,b)=>{if(r(y)||r(b))return 0;let[k,v]=s(o(y),o(b));return k>v?1:k<v?-1:0},"compareStrings"),l=i((y,b)=>{for(let k=0;k<Math.max(y.length,b.length);k++){let v=a(y[k]||"0",b[k]||"0");if(v!==0)return v}return 0},"compareSegments"),u=i((y,b)=>{let k=n(y),v=n(b),S=k.pop(),I=v.pop(),C=l(k,v);return C!==0?C:S&&I?l(S.split("."),I.split(".")):S||I?S?-1:1:0},"compareVersions"),c=i((y,b,k)=>{h(k);let v=u(y,b);return f[k].includes(v)},"compare"),f={">":[1],">=":[0,1],"=":[0],"<=":[-1,0],"<":[-1],"!=":[-1,1]},d=Object.keys(f),h=i(y=>{if(typeof y!="string")throw new TypeError(`Invalid operator type, expected string but got ${typeof y}`);if(d.indexOf(y)===-1)throw new Error(`Invalid operator, expected one of ${d.join("|")}`)},"assertValidOperator"),p=i((y,b)=>{if(b=b.replace(/([><=]+)\s+/g,"$1"),b.includes("||"))return b.split("||").some($=>p(y,$));if(b.includes(" - ")){let[$,U]=b.split(" - ",2);return p(y,`>=${$} <=${U}`)}else if(b.includes(" "))return b.trim().replace(/\s{2,}/g," ").split(" ").every($=>p(y,$));let k=b.match(/^([<>=~^]+)/),v=k?k[1]:"=";if(v!=="^"&&v!=="~")return c(y,b,v);let[S,I,C,,B]=n(y),[H,D,V,,ae]=n(b),W=[S,I,C],T=[H,D??"x",V??"x"];if(ae&&(!B||l(W,T)!==0||l(B.split("."),ae.split("."))===-1))return!1;let L=T.findIndex($=>$!=="0")+1,R=v==="~"?2:L>1?L:1;return!(l(W.slice(0,R),T.slice(0,R))!==0||l(W.slice(R),T.slice(R))===-1)},"satisfies"),w=i(y=>typeof y=="string"&&/^[v\d]/.test(y)&&e.test(y),"validate"),x=i(y=>typeof y=="string"&&/^(0|[1-9]\d*)\.(0|[1-9]\d*)\.(0|[1-9]\d*)(?:-((?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*)(?:\.(?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*))*))?(?:\+([0-9a-zA-Z-]+(?:\.[0-9a-zA-Z-]+)*))?$/.test(y),"validateStrict");t.compare=c,t.compareVersions=u,t.satisfies=p,t.validate=w,t.validateStrict=x}))});var dc=Qe((hE,fc)=>{"use strict";var ci=Object.prototype.hasOwnProperty,cc=Object.prototype.toString,ic=Object.defineProperty,oc=Object.getOwnPropertyDescriptor,sc=i(function(e){return typeof Array.isArray=="function"?Array.isArray(e):cc.call(e)==="[object Array]"},"isArray"),ac=i(function(e){if(!e||cc.call(e)!=="[object Object]")return!1;var n=ci.call(e,"constructor"),r=e.constructor&&e.constructor.prototype&&ci.call(e.constructor.prototype,"isPrototypeOf");if(e.constructor&&!n&&!r)return!1;var o;for(o in e);return typeof o>"u"||ci.call(e,o)},"isPlainObject"),lc=i(function(e,n){ic&&n.name==="__proto__"?ic(e,n.name,{enumerable:!0,configurable:!0,value:n.newValue,writable:!0}):e[n.name]=n.newValue},"setProperty"),uc=i(function(e,n){if(n==="__proto__")if(ci.call(e,n)){if(oc)return oc(e,n).value}else return;return e[n]},"getProperty");fc.exports=i(function t(){var e,n,r,o,s,a,l=arguments[0],u=1,c=arguments.length,f=!1;for(typeof l=="boolean"&&(f=l,l=arguments[1]||{},u=2),(l==null||typeof l!="object"&&typeof l!="function")&&(l={});u<c;++u)if(e=arguments[u],e!=null)for(n in e)r=uc(l,n),o=uc(e,n),l!==o&&(f&&o&&(ac(o)||(s=sc(o)))?(s?(s=!1,a=r&&sc(r)?r:[]):a=r&&ac(r)?r:{},lc(l,{name:n,newValue:t(f,a,o)})):typeof o<"u"&&lc(l,{name:n,newValue:o}));return l},"extend")});var hg={};ba(hg,{default:()=>dg});module.exports=Bf(hg);var ne=require("obsidian");i((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();function Re(){}i(Re,"noop");async function Xe(){}i(Xe,"noopAsync");function In(t){return async(...e)=>{await t(...e)}}i(In,"omitAsyncReturnType");var Ye=require("obsidian");var $f=require("obsidian"),Ca=require("obsidian"),xa=require("obsidian"),yg=require("obsidian"),kg=require("obsidian"),Wf=require("obsidian"),Hf=require("obsidian"),va=require("obsidian");var ka=class{static{i(this,"CustomArrayDictImpl")}data=new Map;add(t,e){let n=this.get(t);n||(n=[],this.data.set(t,n)),n.includes(e)||n.push(e)}remove(t,e){let n=this.get(t);n&&(n.remove(e),n.length===0&&this.clear(t))}get(t){return this.data.get(t)||null}keys(){return Array.from(this.data.keys())}clear(t){this.data.delete(t)}clearAll(){this.data.clear()}contains(t,e){return!!this.get(t)?.contains(e)}count(){let t=0;for(let e of this.keys())t+=this.get(e)?.length??0;return t}};var Me={AudioRecorder:"audio-recorder",Backlink:"backlink",Bases:"bases",Bookmarks:"bookmarks",Canvas:"canvas",CommandPalette:"command-palette",DailyNotes:"daily-notes",EditorStatus:"editor-status",FileExplorer:"file-explorer",FileRecovery:"file-recovery",Footnotes:"footnotes",GlobalSearch:"global-search",Graph:"graph",MarkdownImporter:"markdown-importer",NoteComposer:"note-composer",OutgoingLink:"outgoing-link",Outline:"outline",PagePreview:"page-preview",Properties:"properties",Publish:"publish",RandomNote:"random-note",SlashCommand:"slash-command",Slides:"slides",Switcher:"switcher",Sync:"sync",TagPane:"tag-pane",Templates:"templates",Webviewer:"webviewer",WordCount:"word-count",Workspaces:"workspaces",ZkPrefixer:"zk-prefixer"},ar={AllProperties:"all-properties",Audio:"audio",Backlink:Me.Backlink,Bases:Me.Bases,Bookmarks:Me.Bookmarks,Canvas:Me.Canvas,Empty:"empty",FileExplorer:Me.FileExplorer,FileProperties:"file-properties",Graph:Me.Graph,Image:"image",LocalGraph:"localgraph",Markdown:"markdown",OutgoingLink:Me.OutgoingLink,Outline:Me.Outline,Pdf:"pdf",ReleaseNotes:"release-notes",Search:"search",Sync:"sync",Table:"table",Tag:"tag",Video:"video",Webviewer:"webviewer",WebviewerHistory:"webviewer-history"};function Vf(){return Ca.TFile}i(Vf,"getTFileConstructor");function zf(){return xa.TFolder}i(zf,"getTFolderConstructor");function Ne(t){return t.replace(/\/?[^\/]*$/,"")||"/"}i(Ne,"parentFolderPath");function lr(t,e){let n=t.vault.getFolderByPath(e);return n||(n=new(zf())(t.vault,e),n.parent=lr(t,Ne(e)),n.deleted=!0,n)}i(lr,"createTFolderInstance");function Aa(t,e){let n=t.vault.getFileByPath(e);return n||(n=new(Vf())(t.vault,e),n.parent=lr(t,Ne(e)),n.deleted=!0,n)}i(Aa,"createTFileInstance");async function Ea(){return await(0,va.loadPrism)()}i(Ea,"loadPrism");function Ke(t){return!!t.position}i(Ke,"isReferenceCache");function ye(t){return!!t.key}i(ye,"isFrontmatterLinkCache");var ko=qt(Pa(),1);i((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();var jf=Number.POSITIVE_INFINITY;function Tt(...t){let e=t.filter(s=>!!s);if(typeof AbortSignal.any=="function")return AbortSignal.any(e);if(e.length===0)return ke();if(e.length===1&&e[0])return e[0];let n=new AbortController;for(let s of e)if(s.aborted)return s;let r=[];for(let s of e)r.push(Ia(s,o));return n.signal;function o(s){for(let a of r)a();n.abort(s.reason)}}i(Tt,"abortSignalAny");function ke(){return new AbortController().signal}i(ke,"abortSignalNever");function Fa(t){if(t===jf)return ke();if(typeof AbortSignal.timeout=="function")return AbortSignal.timeout(t);let e=new AbortController;return window.setTimeout(()=>{e.abort(new Error(`Timed out in ${String(t)} milliseconds`))},t),e.signal}i(Fa,"abortSignalTimeout");function Ia(t,e){if(t.aborted)return e(t),Re;return t.addEventListener("abort",n,{once:!0}),()=>{t.removeEventListener("abort",n)};function n(r){e(r.target)}i(n,"wrappedCallback")}i(Ia,"onAbort");function La(t,e){return new Promise((n,r)=>{Ia(t,()=>{e?r(t.reason):n(t.reason)})})}i(La,"waitForAbort");i((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();function Ln(t,e){let n=t.length,r=0;for(let o=0;o<n;o++){if(!Object.hasOwn(t,o))continue;let s=t[o];e(s,o,t)&&(t[r++]=s)}t.length=r}i(Ln,"filterInPlace");i((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();var et=class{static{i(this,"AsyncEvents")}eventRefsMap=new Map;off(e,n){let r=this.eventRefsMap.get(e);r&&(Ln(r,o=>o.callback!==n),r.length===0&&this.eventRefsMap.delete(e))}offref(e){let n=this.eventRefsMap.get(e.name);n&&(Ln(n,r=>r!==e),n.length===0&&this.eventRefsMap.delete(e.name))}on(e,n,r){let o=this.eventRefsMap.get(e);o||(o=[],this.eventRefsMap.set(e,o));let s={asyncEvents:this,callback:n,name:e,thisArg:r};return o.push(s),s}once(e,n,r){let o=this.on(e,n,r),s=this.on(e,()=>{this.offref(o),this.offref(s)});return o}trigger(e,...n){let r=this.eventRefsMap.get(e)??[];for(let o of r.slice())this.tryTrigger(o,n)}async triggerAsync(e,...n){let r=this.eventRefsMap.get(e)??[];for(let o of r.slice())await this.tryTriggerAsync(o,n)}tryTrigger(e,n){try{e.callback.apply(e.thisArg,n)}catch(r){window.setTimeout(()=>{throw r},0)}}async tryTriggerAsync(e,n){try{await e.callback.call(e.thisArg,...n)}catch(r){window.setTimeout(()=>{throw r},0)}}};i((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();var bo="asyncError",ur=new et;ur.on(bo,Kf);var cr="An unhandled error occurred executing async operation",Oa="    at",qe=class t extends Error{static{i(this,"CustomStackTraceError")}constructor(e,n,r){super(e,{cause:r}),this.name="CustomStackTraceError",Error.captureStackTrace?.(this,t);let o=r,s=new Set;for(;o instanceof t;){if(s.has(o))throw new Error("Circular cause detected");s.add(o),o=o.cause}let a=(this.stack??"").split(`
`),l=n.split(`
`);/^\w*Error(?:: |$)/.test(l[0]??"")&&l.splice(0,1),a.splice(1,a.length-1,...l),this.stack=a.join(`
`)}},Yt=class t extends Error{static{i(this,"SilentError")}constructor(e){super(e),this.name="SilentError",Error.captureStackTrace?.(this,t)}};function fr(t){ur.trigger(bo,t)}i(fr,"emitAsyncErrorEvent");function dr(t){if(!(t instanceof Error))return String(t);let e=t.stack??`${t.name}: ${t.message}`;if(t.cause!==void 0){let n=dr(t.cause).split(`
`);e+=`
${Ra("Caused by:")}`;for(let r of n)r.trim()&&(e+=r.startsWith(Oa)?`
${r}`:`
${Ra(r)}`)}return e}i(dr,"errorToString");function Ce(t=0){return(new Error().stack??"").split(`
`).slice(t+2).join(`
`)}i(Ce,"getStackTrace");function Pt(t,e){e??=globalThis.console,e.error(dr(t))}i(Pt,"printError");function Da(t){let e=ur.on(bo,t);return()=>{ur.offref(e)}}i(Da,"registerAsyncErrorEventHandler");function Rn(t){throw t}i(Rn,"throwExpression");function Ra(t){return`${Oa} --- ${t} --- (0)`}i(Ra,"generateStackTraceLine");function Kf(t){Pt(t)}i(Kf,"handleAsyncError");i((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();function hr(t){return t.replaceAll(/[.*+?^${}()|[\]\\]/g,"\\$&")}i(hr,"escapeRegExp");function Ma(t){try{return new RegExp(t),!0}catch{return!1}}i(Ma,"isValidRegExp");i((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();async function Jt(t,e,...n){return e??=ke(),e.throwIfAborted(),qf(t)?await t(e,...n):t}i(Jt,"resolveValue");function qf(t){return typeof t=="function"}i(qf,"isFunction");i((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();var Gf={"\n":"\\n","\r":"\\r","	":"\\t","\b":"\\b","\f":"\\f","'":"\\'",'"':'\\"',"\\":"\\\\"};var Yf={};for(let[t,e]of Object.entries(Gf))Yf[e]=t;function Na(t,e,n,r){return r??=n,t.slice(0,n)+e+t.slice(r)}i(Na,"insertAt");function On(t){return pe(t,/\u00A0|\u202F/g," ").normalize("NFC")}i(On,"normalize");function pe(t,e,n){return typeof n>"u"?t:(e instanceof RegExp&&!e.global&&(e=new RegExp(e.source,`${e.flags}g`)),typeof n=="string"?t.replaceAll(e,n):t.replaceAll(e,(r,...o)=>{let a=typeof o.at(-1)=="object",l=a?o.length-2:o.length-1,u={groups:a?o.at(-1):void 0,missingGroupIndices:[],offset:o.at(l-1),source:o.at(l),substring:r},c=o.slice(0,l-1).map((f,d)=>{if(typeof f=="string")return f;if(typeof f>"u")return u.missingGroupIndices.push(d),"";throw new Error(`Unexpected argument type: ${typeof f}`)});return n(u,...c)??u.substring}))}i(pe,"replaceAll");function yo(t,e,n){if(t.endsWith(e))return t.slice(0,-e.length);if(n)throw new Error(`String ${t} does not end with suffix ${e}`);return t}i(yo,"trimEnd");function pr(t,e,n){if(t.startsWith(e))return t.slice(e.length);if(n)throw new Error(`String ${t} does not start with prefix ${e}`);return t}i(pr,"trimStart");i((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();var Jf=/[a-zA-Z]:\/[^:]*$/,tt=ko.default.posix,Jg=tt.delimiter,Qg=ko.default.posix.sep,Se=tt.basename,K=tt.dirname,Ge=tt.extname,Xg=tt.format;var Z=tt.join,Zg=tt.normalize,ew=tt.parse,Qt=tt.relative;function _a(t,e){return e?`${t}.${e}`:t}i(_a,"makeFileName");function Ba(...t){let e=tt.resolve(...t);return e=Qf(e),Jf.exec(e)?.[0]??e}i(Ba,"resolve");function Qf(t){return pe(t,"\\","/")}i(Qf,"toPosixPath");i((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();var Xf="base",mr="canvas",Ft="md";function Co(t,e,n){if(Be(e))return e.extension===n;if(typeof e=="string"){let r=J(t,e);return r?r.extension===n:Ge(e).slice(1)===n}return!1}i(Co,"checkExtension");function Dn(t,e,n){if(e===null)return null;if(Wa(e))return t.vault.fileMap[e.path]??e;let r=$a(t,e,n);if(r)return r;let o=Ha(e);return o===e?null:$a(t,o,n)}i(Dn,"getAbstractFileOrNull");function te(t,e,n,r){let o=J(t,e,r);if(!o)if(n)o=Aa(t,e);else throw new Error(`File not found: ${e}`);return o}i(te,"getFile");function J(t,e,n){let r=Dn(t,e,n);return Be(r)?r:null}i(J,"getFileOrNull");function It(t,e,n,r){let o=_e(t,e,r);if(!o)if(n)o=lr(t,e);else throw new Error(`Folder not found: ${e}`);return o}i(It,"getFolder");function _e(t,e,n){let r=Dn(t,e,n);return Mn(r)?r:null}i(_e,"getFolderOrNull");function Va(t,e,n){let r=It(t,e),o=[];return n?Ye.Vault.recurseChildren(r,s=>{ee(t,s)&&s instanceof Ye.TFile&&o.push(s)}):o=r.children.filter(s=>ee(t,s)),o=o.sort((s,a)=>s.path.localeCompare(a.path)),o}i(Va,"getMarkdownFiles");async function za(t,e){let n=J(t,e);if(n)return n;let r=Ne(e);return await Zf(t,r),await t.vault.create(e,"")}i(za,"getOrCreateFile");async function Zf(t,e){let n=_e(t,e);return n||await t.vault.createFolder(e)}i(Zf,"getOrCreateFolder");function Q(t,e){if(Wa(e))return e.path;let n=Dn(t,e);return n?n.path:Ha(e)}i(Q,"getPath");function Wa(t){return t instanceof Ye.TAbstractFile}i(Wa,"isAbstractFile");function ed(t,e){return Co(t,e,Xf)}i(ed,"isBaseFile");function Lt(t,e){return Co(t,e,mr)}i(Lt,"isCanvasFile");function Be(t){return t instanceof Ye.TFile}i(Be,"isFile");function Mn(t){return t instanceof Ye.TFolder}i(Mn,"isFolder");function ee(t,e){return Co(t,e,Ft)}i(ee,"isMarkdownFile");function dt(t,e){return ee(t,e)||Lt(t,e)||ed(t,e)}i(dt,"isNote");function $a(t,e,n){return n?t.vault.getAbstractFileByPathInsensitive(e):t.vault.getAbstractFileByPath(e)}i($a,"getFileInternal");function Ha(t){return(0,Ye.normalizePath)(Ba("/",t))}i(Ha,"getResolvedPath");var bl=require("obsidian");var Po=qt(tl(),1);i((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();var Eo="44.2.1",Cr="obsidian-dev-utils",nl=`.obsidian-dev-utils.code-highlighter-component textarea, .obsidian-dev-utils.code-highlighter-component pre, .obsidian-dev-utils.code-highlighter-component code {
  font-family: var(--font-monospace);
  line-height: var(--line-height-normal);
  margin: 0;
}
.obsidian-dev-utils.code-highlighter-component textarea, .obsidian-dev-utils.code-highlighter-component code {
  font-size: var(--code-size);
}
.obsidian-dev-utils.code-highlighter-component textarea {
  background: transparent;
  color: transparent;
  z-index: 2;
  width: 20em;
  height: 10em;
}
.obsidian-dev-utils.code-highlighter-component pre {
  position: absolute;
  pointer-events: none;
  border: var(--input-border-width) solid transparent;
  overflow: auto;
  inset: 0;
  padding: var(--size-4-1) var(--size-4-2);
  z-index: 1;
}
.obsidian-dev-utils.code-highlighter-component pre::after {
  content: "";
  display: block;
  height: var(--bottom-gap, 0);
}
.obsidian-dev-utils.code-highlighter-component pre.is-placeholder {
  opacity: 0.6;
}
.obsidian-dev-utils.code-highlighter-component code {
  display: block;
  padding: 0;
}

.obsidian-dev-utils input[type=url] {
  height: var(--input-height);
}
.obsidian-dev-utils input[type=month],
.obsidian-dev-utils input[type=tel],
.obsidian-dev-utils input[type=time],
.obsidian-dev-utils input[type=url],
.obsidian-dev-utils input[type=week] {
  -webkit-app-region: no-drag;
  background: var(--background-modifier-form-field);
  border: var(--input-border-width) solid var(--background-modifier-border);
  color: var(--text-normal);
  font-family: inherit;
  padding: var(--size-4-1) var(--size-4-2);
  font-size: var(--font-ui-small);
  border-radius: var(--input-radius);
  outline: none;
}
@media (hover: hover) {
  .obsidian-dev-utils input[type=month]:hover,
  .obsidian-dev-utils input[type=tel]:hover,
  .obsidian-dev-utils input[type=time]:hover,
  .obsidian-dev-utils input[type=url]:hover,
  .obsidian-dev-utils input[type=week]:hover {
    border-color: var(--background-modifier-border-hover);
    transition: box-shadow 0.15s ease-in-out, border 0.15s ease-in-out;
  }
}
.obsidian-dev-utils input[type=month]:active, .obsidian-dev-utils input[type=month]:focus,
.obsidian-dev-utils input[type=tel]:active,
.obsidian-dev-utils input[type=tel]:focus,
.obsidian-dev-utils input[type=time]:active,
.obsidian-dev-utils input[type=time]:focus,
.obsidian-dev-utils input[type=url]:active,
.obsidian-dev-utils input[type=url]:focus,
.obsidian-dev-utils input[type=week]:active,
.obsidian-dev-utils input[type=week]:focus {
  border-color: var(--background-modifier-border-focus);
  transition: box-shadow 0.15s ease-in-out, border 0.15s ease-in-out;
}
.obsidian-dev-utils input[type=month]:active, .obsidian-dev-utils input[type=month]:focus, .obsidian-dev-utils input[type=month]:focus-visible,
.obsidian-dev-utils input[type=tel]:active,
.obsidian-dev-utils input[type=tel]:focus,
.obsidian-dev-utils input[type=tel]:focus-visible,
.obsidian-dev-utils input[type=time]:active,
.obsidian-dev-utils input[type=time]:focus,
.obsidian-dev-utils input[type=time]:focus-visible,
.obsidian-dev-utils input[type=url]:active,
.obsidian-dev-utils input[type=url]:focus,
.obsidian-dev-utils input[type=url]:focus-visible,
.obsidian-dev-utils input[type=week]:active,
.obsidian-dev-utils input[type=week]:focus,
.obsidian-dev-utils input[type=week]:focus-visible {
  box-shadow: 0 0 0 2px var(--background-modifier-border-focus);
}
.obsidian-dev-utils input[type=month]::placeholder,
.obsidian-dev-utils input[type=tel]::placeholder,
.obsidian-dev-utils input[type=time]::placeholder,
.obsidian-dev-utils input[type=url]::placeholder,
.obsidian-dev-utils input[type=week]::placeholder {
  color: var(--text-faint);
}
.mod-rtl input[type=month],
.mod-rtl input[type=time],
.mod-rtl input[type=week],
.is-rtl input[type=month],
.is-rtl input[type=time],
.is-rtl input[type=week],
.rtl input[type=month],
.rtl input[type=time],
.rtl input[type=week] {
  direction: rtl;
}
.mod-rtl input[type=month]::-webkit-calendar-picker-indicator,
.mod-rtl input[type=time]::-webkit-calendar-picker-indicator,
.mod-rtl input[type=week]::-webkit-calendar-picker-indicator,
.is-rtl input[type=month]::-webkit-calendar-picker-indicator,
.is-rtl input[type=time]::-webkit-calendar-picker-indicator,
.is-rtl input[type=week]::-webkit-calendar-picker-indicator,
.rtl input[type=month]::-webkit-calendar-picker-indicator,
.rtl input[type=time]::-webkit-calendar-picker-indicator,
.rtl input[type=week]::-webkit-calendar-picker-indicator {
  right: var(--size-4-1);
  left: auto;
}

.obsidian-dev-utils input[type=month],
.obsidian-dev-utils input[type=time],
.obsidian-dev-utils input[type=week] {
  font-variant-numeric: tabular-nums;
  position: relative;
}
.obsidian-dev-utils input[type=month]::-webkit-datetime-edit-text,
.obsidian-dev-utils input[type=time]::-webkit-datetime-edit-text,
.obsidian-dev-utils input[type=week]::-webkit-datetime-edit-text {
  color: var(--text-faint);
  padding-inline-end: 0;
}
.obsidian-dev-utils input[type=month]::-webkit-calendar-picker-indicator,
.obsidian-dev-utils input[type=time]::-webkit-calendar-picker-indicator,
.obsidian-dev-utils input[type=week]::-webkit-calendar-picker-indicator {
  position: absolute;
  left: var(--size-4-1);
  right: auto;
  opacity: 0.5;
}
.obsidian-dev-utils input[type=month]::-webkit-datetime-edit-month-field:active, .obsidian-dev-utils input[type=month]::-webkit-datetime-edit-month-field:focus, .obsidian-dev-utils input[type=month]::-webkit-datetime-edit-day-field:active, .obsidian-dev-utils input[type=month]::-webkit-datetime-edit-day-field:focus, .obsidian-dev-utils input[type=month]::-webkit-datetime-edit-year-field:active, .obsidian-dev-utils input[type=month]::-webkit-datetime-edit-year-field:focus,
.obsidian-dev-utils input[type=time]::-webkit-datetime-edit-month-field:active,
.obsidian-dev-utils input[type=time]::-webkit-datetime-edit-month-field:focus,
.obsidian-dev-utils input[type=time]::-webkit-datetime-edit-day-field:active,
.obsidian-dev-utils input[type=time]::-webkit-datetime-edit-day-field:focus,
.obsidian-dev-utils input[type=time]::-webkit-datetime-edit-year-field:active,
.obsidian-dev-utils input[type=time]::-webkit-datetime-edit-year-field:focus,
.obsidian-dev-utils input[type=week]::-webkit-datetime-edit-month-field:active,
.obsidian-dev-utils input[type=week]::-webkit-datetime-edit-month-field:focus,
.obsidian-dev-utils input[type=week]::-webkit-datetime-edit-day-field:active,
.obsidian-dev-utils input[type=week]::-webkit-datetime-edit-day-field:focus,
.obsidian-dev-utils input[type=week]::-webkit-datetime-edit-year-field:active,
.obsidian-dev-utils input[type=week]::-webkit-datetime-edit-year-field:focus {
  background-color: var(--text-selection);
  color: var(--text-normal);
  cursor: text;
}
.mod-rtl .obsidian-dev-utils input[type=month], .is-rtl .obsidian-dev-utils input[type=month], .rtl .obsidian-dev-utils input[type=month],
.mod-rtl .obsidian-dev-utils input[type=time],
.is-rtl .obsidian-dev-utils input[type=time],
.rtl .obsidian-dev-utils input[type=time],
.mod-rtl .obsidian-dev-utils input[type=week],
.is-rtl .obsidian-dev-utils input[type=week],
.rtl .obsidian-dev-utils input[type=week] {
  direction: rtl;
}
.mod-rtl .obsidian-dev-utils input[type=month]::-webkit-calendar-picker-indicator, .is-rtl .obsidian-dev-utils input[type=month]::-webkit-calendar-picker-indicator, .rtl .obsidian-dev-utils input[type=month]::-webkit-calendar-picker-indicator,
.mod-rtl .obsidian-dev-utils input[type=time]::-webkit-calendar-picker-indicator,
.is-rtl .obsidian-dev-utils input[type=time]::-webkit-calendar-picker-indicator,
.rtl .obsidian-dev-utils input[type=time]::-webkit-calendar-picker-indicator,
.mod-rtl .obsidian-dev-utils input[type=week]::-webkit-calendar-picker-indicator,
.is-rtl .obsidian-dev-utils input[type=week]::-webkit-calendar-picker-indicator,
.rtl .obsidian-dev-utils input[type=week]::-webkit-calendar-picker-indicator {
  left: auto;
  right: var(--size-4-1);
}

body:not(.is-ios):not(.is-android) .obsidian-dev-utils input[type=month],
body:not(.is-ios):not(.is-android) .obsidian-dev-utils input[type=time],
body:not(.is-ios):not(.is-android) .obsidian-dev-utils input[type=week] {
  padding-inline-start: var(--size-4-6);
}

.obsidian-dev-utils input[type=time]::-webkit-calendar-picker-indicator {
  margin-inline-start: 0;
}

.obsidian-dev-utilsprogress.loop {
  min-width: 200px;
}

.obsidian-dev-utils.modal-container .ok-button {
  margin-right: 10px;
  margin-top: 20px;
}

.obsidian-dev-utils .multiple-dropdown-component select,
.obsidian-dev-utils .multiple-dropdown-component select:focus,
.obsidian-dev-utils .multiple-dropdown-component .dropdown {
  height: auto;
  padding-top: 3px;
}
.obsidian-dev-utils .multiple-dropdown-component select option:checked,
.obsidian-dev-utils .multiple-dropdown-component select:focus option:checked,
.obsidian-dev-utils .multiple-dropdown-component .dropdown option:checked {
  background-color: #1967d2;
  color: #fff;
}

.obsidian-dev-utils.plugin-settings-tab a:focus {
  outline: 2px solid var(--link-color);
}

.obsidian-dev-utils.prompt-modal .text-box {
  width: 100%;
}

.obsidian-dev-utils.tri-state-checkbox-component input[type=checkbox]:indeterminate {
  appearance: checkbox;
}

.obsidian-dev-utils :invalid {
  box-shadow: 0 0 0 2px var(--text-error);
}
.obsidian-dev-utils input.metadata-input-text:active:invalid, .obsidian-dev-utils input.metadata-input-text:focus-visible:invalid, .obsidian-dev-utils input.metadata-input-text:focus:invalid,
.obsidian-dev-utils input[type=date]:active:invalid,
.obsidian-dev-utils input[type=date]:focus-visible:invalid,
.obsidian-dev-utils input[type=date]:focus:invalid,
.obsidian-dev-utils input[type=datetime-local]:active:invalid,
.obsidian-dev-utils input[type=datetime-local]:focus-visible:invalid,
.obsidian-dev-utils input[type=datetime-local]:focus:invalid,
.obsidian-dev-utils input[type=email]:active:invalid,
.obsidian-dev-utils input[type=email]:focus-visible:invalid,
.obsidian-dev-utils input[type=email]:focus:invalid,
.obsidian-dev-utils input[type=number]:active:invalid,
.obsidian-dev-utils input[type=number]:focus-visible:invalid,
.obsidian-dev-utils input[type=number]:focus:invalid,
.obsidian-dev-utils input[type=password]:active:invalid,
.obsidian-dev-utils input[type=password]:focus-visible:invalid,
.obsidian-dev-utils input[type=password]:focus:invalid,
.obsidian-dev-utils input[type=search]:active:invalid,
.obsidian-dev-utils input[type=search]:focus-visible:invalid,
.obsidian-dev-utils input[type=search]:focus:invalid,
.obsidian-dev-utils input[type=text]:active:invalid,
.obsidian-dev-utils input[type=text]:focus-visible:invalid,
.obsidian-dev-utils input[type=text]:focus:invalid,
.obsidian-dev-utils textarea:active:invalid,
.obsidian-dev-utils textarea:focus-visible:invalid,
.obsidian-dev-utils textarea:focus:invalid {
  box-shadow: 0 0 0 2px var(--text-error);
}
.obsidian-dev-utils.setting-component-wrapper {
  position: relative;
  display: inline-flex;
}
.obsidian-dev-utils.overlay-validator {
  caret-color: transparent;
  cursor: default;
  position: absolute;
  background-color: transparent;
  border: none;
  outline: none;
  pointer-events: none;
  z-index: 9999;
  left: 0;
  top: 0;
  width: 100%;
  height: 100%;
}
.obsidian-dev-utils.tooltip.tooltip-validator {
  position: absolute;
  top: calc(100% + 8px);
  width: max-content;
}

/*# sourceMappingURL=data:application/json;charset=utf-8,%7B%22version%22:3,%22sourceRoot%22:%22%22,%22sources%22:%5B%22../src/styles/code-highlighter-component.scss%22,%22../src/styles/input.scss%22,%22../src/styles/input-time.scss%22,%22../src/styles/loop.scss%22,%22../src/styles/modal-container.scss%22,%22../src/styles/multiple-dropdown-component.scss%22,%22../src/styles/plugin-settings-tab.scss%22,%22../src/styles/prompt-modal.scss%22,%22../src/styles/tri-state-checkbox-component.scss%22,%22../src/styles/validation.scss%22%5D,%22names%22:%5B%5D,%22mappings%22:%22AAEI;EACE;EACA;EACA;;AAGF;EACE;;AAGF;EACE;EACA;EACA;EACA;EACA;;AAGF;EACE;EACA;EACA;EACA;EACA;EACA;EACA;;AAGF;EACE;EACA;EACA;;AAGF;EACE;;AAGF;EACE;EACA;;;ACzCJ;EACE;;AAGF;AAAA;AAAA;AAAA;AAAA;EAKE;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;AAGE;EACE;AAAA;AAAA;AAAA;AAAA;IACE;IACA,YACE;;;AAMR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;EAEE;EACA,YACE;;AAIJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;EAGE;;AAGF;AAAA;AAAA;AAAA;AAAA;EACE;;AASE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;EAGE;;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;EACE;EACA;;;AC7DV;AAAA;AAAA;EAGE;EACA;;AAEA;AAAA;AAAA;EACE;EACA;;AAGF;AAAA;AAAA;EACE;EACA;EACA;EACA;;AAMA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;EAEE;EACA;EACA;;AAIK;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;EAGP;;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;EACE;EACA;;;AAKF;AAAA;AAAA;EACE;;;AAMJ;EACE;;;ACjDJ;EACE;;;ACAA;EACE;EACA;;;ACFF;AAAA;AAAA;EAGE;EACA;;AAEA;AAAA;AAAA;EACE;EACA;;;ACRJ;EACE;;;ACDF;EACE;;;ACDF;EACE;;;ACEJ;EAJA;;AAoBI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;EApBJ;;AA0BA;EACE;EACA;;AAGF;EACE;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;AAGF;EACE;EACA;EACA%22,%22file%22:%22styles.css%22,%22sourcesContent%22:%5B%22.obsidian-dev-utils%20%7B%5Cn%20%20&.code-highlighter-component%20%7B%5Cn%20%20%20%20textarea,%20pre,%20code%20%7B%5Cn%20%20%20%20%20%20font-family:%20var(--font-monospace);%5Cn%20%20%20%20%20%20line-height:%20var(--line-height-normal);%5Cn%20%20%20%20%20%20margin:%200;%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20textarea,%20code%20%7B%5Cn%20%20%20%20%20%20font-size:%20var(--code-size);%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20textarea%20%7B%5Cn%20%20%20%20%20%20background:%20transparent;%5Cn%20%20%20%20%20%20color:%20transparent;%5Cn%20%20%20%20%20%20z-index:%202;%5Cn%20%20%20%20%20%20width:%2020em;%5Cn%20%20%20%20%20%20height:%2010em;%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20pre%20%7B%5Cn%20%20%20%20%20%20position:%20absolute;%5Cn%20%20%20%20%20%20pointer-events:%20none;%5Cn%20%20%20%20%20%20border:%20var(--input-border-width)%20solid%20transparent;%5Cn%20%20%20%20%20%20overflow:%20auto;%5Cn%20%20%20%20%20%20inset:%200;%5Cn%20%20%20%20%20%20padding:%20var(--size-4-1)%20var(--size-4-2);%5Cn%20%20%20%20%20%20z-index:%201;%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20pre::after%20%7B%5Cn%20%20%20%20%20%20content:%20%5C%22%5C%22;%5Cn%20%20%20%20%20%20display:%20block;%5Cn%20%20%20%20%20%20height:%20var(--bottom-gap,%200);%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20pre.is-placeholder%20%7B%5Cn%20%20%20%20%20%20opacity:%200.6;%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20code%20%7B%5Cn%20%20%20%20%20%20display:%20block;%5Cn%20%20%20%20%20%20padding:%200;%5Cn%20%20%20%20%7D%5Cn%20%20%7D%5Cn%7D%5Cn%22,%22.obsidian-dev-utils%20%7B%5Cn%20%20input%5Btype='url'%5D%20%7B%5Cn%20%20%20%20height:%20var(--input-height)%5Cn%20%20%7D%5Cn%5Cn%20%20input%5Btype='month'%5D,%5Cn%20%20input%5Btype='tel'%5D,%5Cn%20%20input%5Btype='time'%5D,%5Cn%20%20input%5Btype='url'%5D,%5Cn%20%20input%5Btype='week'%5D%20%7B%5Cn%20%20%20%20-webkit-app-region:%20no-drag;%5Cn%20%20%20%20background:%20var(--background-modifier-form-field);%5Cn%20%20%20%20border:%20var(--input-border-width)%20solid%20var(--background-modifier-border);%5Cn%20%20%20%20color:%20var(--text-normal);%5Cn%20%20%20%20font-family:%20inherit;%5Cn%20%20%20%20padding:%20var(--size-4-1)%20var(--size-4-2);%5Cn%20%20%20%20font-size:%20var(--font-ui-small);%5Cn%20%20%20%20border-radius:%20var(--input-radius);%5Cn%20%20%20%20outline:%20none;%5Cn%5Cn%20%20%20%20@at-root%20%7B%5Cn%20%20%20%20%20%20@media%20(hover:%20hover)%20%7B%5Cn%20%20%20%20%20%20%20%20&:hover%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20border-color:%20var(--background-modifier-border-hover);%5Cn%20%20%20%20%20%20%20%20%20%20transition:%5Cn%20%20%20%20%20%20%20%20%20%20%20%20box-shadow%200.15s%20ease-in-out,%5Cn%20%20%20%20%20%20%20%20%20%20%20%20border%200.15s%20ease-in-out;%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20&:active,%5Cn%20%20%20%20&:focus%20%7B%5Cn%20%20%20%20%20%20border-color:%20var(--background-modifier-border-focus);%5Cn%20%20%20%20%20%20transition:%5Cn%20%20%20%20%20%20%20%20box-shadow%200.15s%20ease-in-out,%5Cn%20%20%20%20%20%20%20%20border%200.15s%20ease-in-out;%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20&:active,%5Cn%20%20%20%20&:focus,%5Cn%20%20%20%20&:focus-visible%20%7B%5Cn%20%20%20%20%20%20box-shadow:%200%200%200%202px%20var(--background-modifier-border-focus);%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20&::placeholder%20%7B%5Cn%20%20%20%20%20%20color:%20var(--text-faint);%5Cn%20%20%20%20%7D%5Cn%20%20%7D%5Cn%5Cn%20%20@at-root%20%7B%5Cn%20%20%20%20.mod-rtl,%5Cn%20%20%20%20.is-rtl,%5Cn%20%20%20%20.rtl%20%7B%5Cn%20%20%20%20%20%20&%20%7B%5Cn%20%20%20%20%20%20%20%20input%5Btype='month'%5D,%5Cn%20%20%20%20%20%20%20%20input%5Btype='time'%5D,%5Cn%20%20%20%20%20%20%20%20input%5Btype='week'%5D%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20direction:%20rtl;%5Cn%5Cn%20%20%20%20%20%20%20%20%20%20&::-webkit-calendar-picker-indicator%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20right:%20var(--size-4-1);%5Cn%20%20%20%20%20%20%20%20%20%20%20%20left:%20auto;%5Cn%20%20%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%20%20%7D%5Cn%7D%5Cn%22,%22.obsidian-dev-utils%20%7B%5Cn%20%20input%5Btype='month'%5D,%5Cn%20%20input%5Btype='time'%5D,%5Cn%20%20input%5Btype='week'%5D%20%7B%5Cn%20%20%20%20font-variant-numeric:%20tabular-nums;%5Cn%20%20%20%20position:%20relative;%5Cn%5Cn%20%20%20%20&::-webkit-datetime-edit-text%20%7B%5Cn%20%20%20%20%20%20color:%20var(--text-faint);%5Cn%20%20%20%20%20%20padding-inline-end:%200;%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20&::-webkit-calendar-picker-indicator%20%7B%5Cn%20%20%20%20%20%20position:%20absolute;%5Cn%20%20%20%20%20%20left:%20var(--size-4-1);%5Cn%20%20%20%20%20%20right:%20auto;%5Cn%20%20%20%20%20%20opacity:%200.5;%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20&::-webkit-datetime-edit-month-field,%5Cn%20%20%20%20&::-webkit-datetime-edit-day-field,%5Cn%20%20%20%20&::-webkit-datetime-edit-year-field%20%7B%5Cn%20%20%20%20%20%20&:active,%5Cn%20%20%20%20%20%20&:focus%20%7B%5Cn%20%20%20%20%20%20%20%20background-color:%20var(--text-selection);%5Cn%20%20%20%20%20%20%20%20color:%20var(--text-normal);%5Cn%20%20%20%20%20%20%20%20cursor:%20text;%5Cn%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20@at-root%20.mod-rtl%20&,%5Cn%20%20%20%20%20%20.is-rtl%20&,%5Cn%20%20%20%20%20%20.rtl%20&%20%7B%5Cn%20%20%20%20%20%20direction:%20rtl;%5Cn%5Cn%20%20%20%20%20%20&::-webkit-calendar-picker-indicator%20%7B%5Cn%20%20%20%20%20%20%20%20left:%20auto;%5Cn%20%20%20%20%20%20%20%20right:%20var(--size-4-1);%5Cn%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%5Cn%20%20%20%20@at-root%20%7B%5Cn%20%20%20%20%20%20body:not(.is-ios):not(.is-android)%20&%20%7B%5Cn%20%20%20%20%20%20%20%20padding-inline-start:%20var(--size-4-6);%5Cn%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%20%20%7D%5Cn%5Cn%20%20input%5Btype='time'%5D%20%7B%5Cn%20%20%20%20&::-webkit-calendar-picker-indicator%20%7B%5Cn%20%20%20%20%20%20margin-inline-start:%200;%5Cn%20%20%20%20%7D%5Cn%20%20%7D%5Cn%7D%5Cn%22,%22.obsidian-dev-utils%20%7B%5Cn%20%20&progress.loop%20%7B%5Cn%20%20%20%20min-width:%20200px;%5Cn%20%20%7D%5Cn%7D%5Cn%22,%22.obsidian-dev-utils%20%7B%5Cn%20%20&.modal-container%20%7B%5Cn%20%20%20%20.ok-button%20%7B%5Cn%20%20%20%20%20%20margin-right:%2010px;%5Cn%20%20%20%20%20%20margin-top:%2020px;%5Cn%20%20%20%20%7D%5Cn%20%20%7D%5Cn%7D%5Cn%22,%22.obsidian-dev-utils%20%7B%5Cn%20%20.multiple-dropdown-component%20%7B%5Cn%20%20%20%20select,%5Cn%20%20%20%20select:focus,%5Cn%20%20%20%20.dropdown%20%7B%5Cn%20%20%20%20%20%20height:%20auto;%5Cn%20%20%20%20%20%20padding-top:%203px;%5Cn%5Cn%20%20%20%20%20%20option:checked%20%7B%5Cn%20%20%20%20%20%20%20%20background-color:%20%231967d2;%5Cn%20%20%20%20%20%20%20%20color:%20%23fff;%5Cn%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%20%20%7D%5Cn%7D%5Cn%22,%22.obsidian-dev-utils%20%7B%5Cn%20%20&.plugin-settings-tab%20%7B%5Cn%20%20%20%20a:focus%20%7B%5Cn%20%20%20%20%20%20outline:%202px%20solid%20var(--link-color);%5Cn%20%20%20%20%7D%5Cn%20%20%7D%5Cn%7D%5Cn%22,%22.obsidian-dev-utils%20%7B%5Cn%20%20&.prompt-modal%20%7B%5Cn%20%20%20%20.text-box%20%7B%5Cn%20%20%20%20%20%20width:%20100%25;%5Cn%20%20%20%20%7D%5Cn%20%20%7D%5Cn%7D%5Cn%22,%22.obsidian-dev-utils%20%7B%5Cr%5Cn%20%20&.tri-state-checkbox-component%20%7B%5Cr%5Cn%20%20%20%20input%5Btype='checkbox'%5D:indeterminate%20%7B%5Cr%5Cn%20%20%20%20%20%20appearance:%20checkbox;%5Cr%5Cn%20%20%20%20%7D%5Cr%5Cn%20%20%7D%5Cr%5Cn%7D%5Cr%5Cn%22,%22@mixin%20invalid%20%7B%5Cn%20%20box-shadow:%200%200%200%202px%20var(--text-error);%5Cn%7D%5Cn%5Cn.obsidian-dev-utils%20%7B%5Cn%20%20:invalid%20%7B%5Cn%20%20%20%20@include%20invalid;%5Cn%20%20%7D%5Cn%5Cn%20%20input.metadata-input-text,%5Cn%20%20input%5Btype='date'%5D,%5Cn%20%20input%5Btype='datetime-local'%5D,%5Cn%20%20input%5Btype='email'%5D,%5Cn%20%20input%5Btype='number'%5D,%5Cn%20%20input%5Btype='password'%5D,%5Cn%20%20input%5Btype='search'%5D,%5Cn%20%20input%5Btype='text'%5D,%5Cn%20%20textarea%20%7B%5Cn%20%20%20%20&:active,%5Cn%20%20%20%20&:focus-visible,%5Cn%20%20%20%20&:focus%20%7B%5Cn%20%20%20%20%20%20&:invalid%20%7B%5Cn%20%20%20%20%20%20%20%20@include%20invalid;%5Cn%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%20%20%7D%5Cn%5Cn%20%20&.setting-component-wrapper%20%7B%5Cn%20%20%20%20position:%20relative;%5Cn%20%20%20%20display:%20inline-flex;%5Cn%20%20%7D%5Cn%5Cn%20%20&.overlay-validator%20%7B%5Cn%20%20%20%20caret-color:%20transparent;%5Cn%20%20%20%20cursor:%20default;%5Cn%20%20%20%20position:%20absolute;%5Cn%20%20%20%20background-color:%20transparent;%5Cn%20%20%20%20border:%20none;%5Cn%20%20%20%20outline:%20none;%5Cn%20%20%20%20pointer-events:%20none;%5Cn%20%20%20%20z-index:%209999;%5Cn%20%20%20%20left:%200;%5Cn%20%20%20%20top:%200;%5Cn%20%20%20%20width:%20100%25;%5Cn%20%20%20%20height:%20100%25;%5Cn%20%20%7D%5Cn%5Cn%20%20&.tooltip.tooltip-validator%20%7B%5Cn%20%20%20%20position:%20absolute;%5Cn%20%20%20%20top:%20calc(100%25%20+%208px);%5Cn%20%20%20%20width:%20max-content;%5Cn%20%20%7D%5Cn%7D%5Cn%22%5D%7D */
`;i((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();var So=class{static{i(this,"ValueWrapper")}constructor(e){this.value=e}};function Ed(){let t=globalThis.app;if(t)return t;try{return globalThis.require("obsidian/app")}catch{throw new Error("Obsidian App global instance not found")}}i(Ed,"getApp");function xe(t,e,n){let o=t??Sd()??globalThis;return o.obsidianDevUtilsState??={},o.obsidianDevUtilsState[e]??=new So(n)}i(xe,"getObsidianDevUtilsState");function Sd(){return typeof window>"u"?null:Ed()}i(Sd,"getAppOrNull");i((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();var To="__no-plugin-id-initialized__",rl=To;function xr(){return rl}i(xr,"getPluginId");function il(t){t&&(rl=t)}i(il,"setPluginId");i((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();var ol=",",Ar="-";function sl(){return{disable:Td,enable:Pd,get:Er,set:Nn}}i(sl,"getDebugController");function vr(t,e=0){let n=`${t}:${String(e)}`,r=xe(null,"debuggers",new Map).value,o=r.get(n);return o||(o=_n()(t),o.log=(s,...a)=>{Fd(t,e,s,...a)},r.set(n,o)),o}i(vr,"getDebugger");function q(t){let e=xr(),n=e===To?"":`${e}:`;return vr(`${n}${Cr}:${t}`)}i(q,"getLibDebugger");function nt(t,e,n,...r){if(!ll()){t(n,...r);return}t(n,...r,`

---
Context stack trace:
`,ul(e))}i(nt,"printWithStackTrace");function al(t){let e=_n().enabled(t),n=e?"enabled":"disabled",r=e?"disable":"enable",o=Er();Nn(t),vr(t)(`Debug messages for plugin ${t} are ${n}. See https://github.com/mnaoumov/obsidian-dev-utils/blob/main/docs/debugging.md how to ${r} them.`),Nn(o)}i(al,"showInitialDebugMessage");function Td(t){let e=new Set(Er());for(let n of Bn(t)){if(n.startsWith(Ar))continue;let r=Ar+n;e.has(n)&&e.delete(n),e.add(r)}Nn(Array.from(e))}i(Td,"disableNamespaces");function Pd(t){let e=new Set(Er());for(let n of Bn(t)){if(!n.startsWith(Ar)){let r=Ar+n;e.has(r)&&e.delete(r)}e.add(n)}Nn(Array.from(e))}i(Pd,"enableNamespaces");function Er(){return Bn(_n().load()??"")}i(Er,"getNamespaces");function _n(){return typeof window>"u"?Po.default:xe(null,"debug",Po.default).value}i(_n,"getSharedDebugLibInstance");function ll(){return typeof window<"u"}i(ll,"isInObsidian");function Fd(t,e,n,...r){if(!_n().enabled(t))return;if(!ll()){console.debug(n,...r);return}let o=4,s=new Error().stack?.split(`
`)??[];s.splice(0,o+e),console.debug(n,...r,`

---
Logger stack trace:
`,ul(s.join(`
`)))}i(Fd,"logWithCaller");function ul(t){return new qe("Debug mode: intentional placeholder error. See https://github.com/mnaoumov/obsidian-dev-utils/blob/main/docs/debugging.md.",t,void 0)}i(ul,"makeStackTraceError");function Nn(t){_n().enable(Bn(t).join(ol))}i(Nn,"setNamespaces");function Bn(t){return typeof t=="string"?t.split(ol).filter(Boolean):t.flatMap(Bn)}i(Bn,"toArray");i((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();async function Fo(t,e){e??=Ce(1);try{await t()}catch(n){let r=new qe(cr,e,n);if(Id(r))return;fr(r)}}i(Fo,"addErrorHandler");function tn(t,e){return e??=Ce(1),(...n)=>{let r=Ce(1);e=`${e??""}
    at --- convertAsyncToSync --- (0)
${r}`,Pe(()=>t(...n),e)}}i(tn,"convertAsyncToSync");function Id(t){let e=t;for(;!(e instanceof Yt);){if(!(e instanceof Error))return!1;e=e.cause}return q("Async:handleSilentError")(t),!0}i(Id,"handleSilentError");function Pe(t,e){e??=Ce(1),Fo(t,e)}i(Pe,"invokeAsyncSafely");function cl(t,e=0,n,r){r??=ke(),r.throwIfAborted(),n??=Ce(1),Pe(async()=>{await Lo(e,r,!0),await t(r)},n)}i(cl,"invokeAsyncSafelyAfterDelay");var Ld=new WeakSet;async function fl(){return new Promise(t=>{requestAnimationFrame(()=>{t()})})}i(fl,"requestAnimationFrameAsync");async function Sr(t,e,n){let r=q("Async:retryWithTimeout");n??=Ce(1);let s={...{retryDelayInMilliseconds:100,shouldRetryOnError:!1,timeoutInMilliseconds:5e3},...e};s.abortSignal?.throwIfAborted(),await Io(s.timeoutInMilliseconds,async a=>{let l=Tt(s.abortSignal,a);l.throwIfAborted();let u=0;for(;!l.aborted;){u++;let c;try{c=await t(l)}catch(f){if(l.aborted||!s.shouldRetryOnError||Ld.has(f))throw new qe("retryWithTimeout failed",n,f);Pt(f),c=!1}if(c){nt(r,n,`Retry completed successfully after ${String(u)} attempts`,{fn:t});return}nt(r,n,`Retry attempt ${String(u)} completed unsuccessfully. Trying again in ${String(s.retryDelayInMilliseconds)} milliseconds`,{fn:t}),await Lo(s.retryDelayInMilliseconds,a)}},{retryFn:t},n)}i(Sr,"retryWithTimeout");async function Io(t,e,n,r){r??=Ce(1);let o=performance.now(),s=new AbortController,a=new AbortController,l=null,u=!1,c=!1,f=q("Async:runWithTimeout");if(await Promise.race([d(),h()]),u)return l;throw new qe("Run with timeout failed",r,s.signal.reason);async function d(){try{l=await e(s.signal);let p=performance.now()-o;nt(f,r??"",`Execution time: ${String(p)} milliseconds`,{context:n,fn:e}),u=!0}catch(p){s.abort(p)}finally{c=!0,a.abort(new Error("Completed"))}}async function h(){for(;!c;){if(await Lo(t,a.signal),c)return;let p=performance.now()-o;nt(f,r??"",`Timed out after ${String(p)} milliseconds`,{context:n,fn:e});let w=q("Async:runWithTimeout:timeout");if(!w.enabled){s.abort(new Error(`Timed out after ${String(p)} milliseconds`));return}w(`The execution is not terminated because debugger ${w.namespace} is enabled. See https://github.com/mnaoumov/obsidian-dev-utils/blob/main/docs/debugging.md for more information.`)}}}i(Io,"runWithTimeout");async function Lo(t,e,n){await La(Tt(e,Fa(t))),n&&e?.throwIfAborted()}i(Lo,"sleep");var ml=qt(hl(),1);i((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();var F=(t=>(t.AlertModal="alert-modal",t.CancelButton="cancel-button",t.CheckboxComponent="checkbox-component",t.CodeHighlighterComponent="code-highlighter-component",t.ConfirmModal="confirm-modal",t.DateComponent="date-component",t.DateTimeComponent="datetime-component",t.EmailComponent="email-component",t.FileComponent="file-component",t.IsPlaceholder="is-placeholder",t.LibraryName="obsidian-dev-utils",t.MonthComponent="month-component",t.MultipleDropdownComponent="multiple-dropdown-component",t.MultipleEmailComponent="multiple-email-component",t.MultipleFileComponent="multiple-file-component",t.MultipleTextComponent="multiple-text-component",t.NumberComponent="number-component",t.OkButton="ok-button",t.OverlayValidator="overlay-validator",t.PasswordComponent="password-component",t.PluginSettingsTab="plugin-settings-tab",t.PromptModal="prompt-modal",t.SelectItemModal="select-item-modal",t.SettingComponentWrapper="setting-component-wrapper",t.TelephoneComponent="telephone-component",t.TextBox="text-box",t.TimeComponent="time-component",t.Tooltip="tooltip",t.TooltipArrow="tooltip-arrow",t.TooltipValidator="tooltip-validator",t.TriStateCheckboxComponent="tri-state-checkbox-component",t.TypedDropdownComponent="typed-dropdown-component",t.TypedMultipleDropdownComponent="typed-multiple-dropdown-component",t.UrlComponent="url-component",t.WeekComponent="week-component",t))(F||{});i((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();var pl=`${Cr}-styles`;function j(t,...e){t.addClass(F.LibraryName,xr(),...e)}i(j,"addPluginCssClasses");function gl(t){let e=t;e.DEBUG=sl()}i(gl,"initDebugController");function wl(t,e){il(e),al(e);let n=xe(t,"lastLibraryVersion","0.0.0");(0,ml.compareVersions)(Eo,n.value)<=0||(n.value=Eo,document.head.querySelector(`#${pl}`)?.remove(),document.head.createEl("style",{attr:{id:pl},text:nl}))}i(wl,"initPluginContext");i((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();async function Ot(t){let n={...{abortSignal:ke(),buildNoticeMessage(){throw new Error("buildNoticeMessage is required")},items:[],noticeMinTimeoutInMilliseconds:2e3,processItem:Re,progressBarTitle:"",shouldContinueOnError:!0,shouldShowProgressBar:!0,uiUpdateThresholdInMilliseconds:100},...t},r=Ce(1),o=n.items,s=0,a=null;n.shouldShowProgressBar&&(a=new bl.Notice("",0));let l=sleep(n.noticeMinTimeoutInMilliseconds),u=createEl("progress");if(j(u,"loop"),u.max=o.length,n.shouldShowProgressBar){let f=createFragment();f.createDiv({text:n.progressBarTitle}),f.appendChild(u),a?.setMessage(f)}let c=performance.now();for(let f of o){if(n.abortSignal.aborted){a?.hide();return}s++;let d=`# ${String(s)} / ${String(o.length)}`,h=n.buildNoticeMessage(f,d);n.shouldShowProgressBar||a?.setMessage(h),q("Loop")(h);try{performance.now()-c>n.uiUpdateThresholdInMilliseconds&&(await fl(),c=performance.now()),await n.processItem(f)}catch(p){if(console.error("Error processing item",f),!n.shouldContinueOnError)throw a?.hide(),new qe("loop failed",r,p);fr(new qe(cr,r,p))}u.value++}await l,a?.hide()}i(Ot,"loop");var O=i(t=>typeof t=="string","isString"),$n=i(()=>{let t,e,n=new Promise((r,o)=>{t=r,e=o});return n.resolve=t,n.reject=e,n},"defer"),yl=i(t=>t==null?"":""+t,"makeString"),Rd=i((t,e,n)=>{t.forEach(r=>{e[r]&&(n[r]=e[r])})},"copy"),Od=/###/g,kl=i(t=>t&&t.indexOf("###")>-1?t.replace(Od,"."):t,"cleanKey"),Cl=i(t=>!t||O(t),"canNotTraverseDeeper"),Vn=i((t,e,n)=>{let r=O(e)?e.split("."):e,o=0;for(;o<r.length-1;){if(Cl(t))return{};let s=kl(r[o]);!t[s]&&n&&(t[s]=new n),Object.prototype.hasOwnProperty.call(t,s)?t=t[s]:t={},++o}return Cl(t)?{}:{obj:t,k:kl(r[o])}},"getLastOfPath"),xl=i((t,e,n)=>{let{obj:r,k:o}=Vn(t,e,Object);if(r!==void 0||e.length===1){r[o]=n;return}let s=e[e.length-1],a=e.slice(0,e.length-1),l=Vn(t,a,Object);for(;l.obj===void 0&&a.length;)s=`${a[a.length-1]}.${s}`,a=a.slice(0,a.length-1),l=Vn(t,a,Object),l?.obj&&typeof l.obj[`${l.k}.${s}`]<"u"&&(l.obj=void 0);l.obj[`${l.k}.${s}`]=n},"setPath"),Dd=i((t,e,n,r)=>{let{obj:o,k:s}=Vn(t,e,Object);o[s]=o[s]||[],o[s].push(n)},"pushPath"),Fr=i((t,e)=>{let{obj:n,k:r}=Vn(t,e);if(n&&Object.prototype.hasOwnProperty.call(n,r))return n[r]},"getPath"),Md=i((t,e,n)=>{let r=Fr(t,n);return r!==void 0?r:Fr(e,n)},"getPathWithDefaults"),Il=i((t,e,n)=>{for(let r in e)r!=="__proto__"&&r!=="constructor"&&(r in t?O(t[r])||t[r]instanceof String||O(e[r])||e[r]instanceof String?n&&(t[r]=e[r]):Il(t[r],e[r],n):t[r]=e[r]);return t},"deepExtend"),nn=i(t=>t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),"regexEscape"),Nd={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"},_d=i(t=>O(t)?t.replace(/[&<>"'\/]/g,e=>Nd[e]):t,"escape"),Do=class{static{i(this,"RegExpCache")}constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){let n=this.regExpMap.get(e);if(n!==void 0)return n;let r=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,r),this.regExpQueue.push(e),r}},Bd=[" ",",","?","!",";"],$d=new Do(20),Vd=i((t,e,n)=>{e=e||"",n=n||"";let r=Bd.filter(a=>e.indexOf(a)<0&&n.indexOf(a)<0);if(r.length===0)return!0;let o=$d.getRegExp(`(${r.map(a=>a==="?"?"\\?":a).join("|")})`),s=!o.test(t);if(!s){let a=t.indexOf(n);a>0&&!o.test(t.substring(0,a))&&(s=!0)}return s},"looksLikeObjectPath"),Mo=i((t,e,n=".")=>{if(!t)return;if(t[e])return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0;let r=e.split(n),o=t;for(let s=0;s<r.length;){if(!o||typeof o!="object")return;let a,l="";for(let u=s;u<r.length;++u)if(u!==s&&(l+=n),l+=r[u],a=o[l],a!==void 0){if(["string","number","boolean"].indexOf(typeof a)>-1&&u<r.length-1)continue;s+=u-s+1;break}o=a}return o},"deepFind"),zn=i(t=>t?.replace("_","-"),"getCleanedCode"),zd={type:"logger",log(t){this.output("log",t)},warn(t){this.output("warn",t)},error(t){this.output("error",t)},output(t,e){console?.[t]?.apply?.(console,e)}},No=class t{static{i(this,"Logger")}constructor(e,n={}){this.init(e,n)}init(e,n={}){this.prefix=n.prefix||"i18next:",this.logger=e||zd,this.options=n,this.debug=n.debug}log(...e){return this.forward(e,"log","",!0)}warn(...e){return this.forward(e,"warn","",!0)}error(...e){return this.forward(e,"error","")}deprecate(...e){return this.forward(e,"warn","WARNING DEPRECATED: ",!0)}forward(e,n,r,o){return o&&!this.debug?null:(O(e[0])&&(e[0]=`${r}${this.prefix} ${e[0]}`),this.logger[n](e))}create(e){return new t(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return e=e||this.options,e.prefix=e.prefix||this.prefix,new t(this.logger,e)}},rt=new No,rn=class{static{i(this,"EventEmitter")}constructor(){this.observers={}}on(e,n){return e.split(" ").forEach(r=>{this.observers[r]||(this.observers[r]=new Map);let o=this.observers[r].get(n)||0;this.observers[r].set(n,o+1)}),this}off(e,n){if(this.observers[e]){if(!n){delete this.observers[e];return}this.observers[e].delete(n)}}emit(e,...n){this.observers[e]&&Array.from(this.observers[e].entries()).forEach(([o,s])=>{for(let a=0;a<s;a++)o(...n)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(([o,s])=>{for(let a=0;a<s;a++)o.apply(o,[e,...n])})}},Ir=class extends rn{static{i(this,"ResourceStore")}constructor(e,n={ns:["translation"],defaultNS:"translation"}){super(),this.data=e||{},this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){let n=this.options.ns.indexOf(e);n>-1&&this.options.ns.splice(n,1)}getResource(e,n,r,o={}){let s=o.keySeparator!==void 0?o.keySeparator:this.options.keySeparator,a=o.ignoreJSONStructure!==void 0?o.ignoreJSONStructure:this.options.ignoreJSONStructure,l;e.indexOf(".")>-1?l=e.split("."):(l=[e,n],r&&(Array.isArray(r)?l.push(...r):O(r)&&s?l.push(...r.split(s)):l.push(r)));let u=Fr(this.data,l);return!u&&!n&&!r&&e.indexOf(".")>-1&&(e=l[0],n=l[1],r=l.slice(2).join(".")),u||!a||!O(r)?u:Mo(this.data?.[e]?.[n],r,s)}addResource(e,n,r,o,s={silent:!1}){let a=s.keySeparator!==void 0?s.keySeparator:this.options.keySeparator,l=[e,n];r&&(l=l.concat(a?r.split(a):r)),e.indexOf(".")>-1&&(l=e.split("."),o=n,n=l[1]),this.addNamespaces(n),xl(this.data,l,o),s.silent||this.emit("added",e,n,r,o)}addResources(e,n,r,o={silent:!1}){for(let s in r)(O(r[s])||Array.isArray(r[s]))&&this.addResource(e,n,s,r[s],{silent:!0});o.silent||this.emit("added",e,n,r)}addResourceBundle(e,n,r,o,s,a={silent:!1,skipCopy:!1}){let l=[e,n];e.indexOf(".")>-1&&(l=e.split("."),o=r,r=n,n=l[1]),this.addNamespaces(n);let u=Fr(this.data,l)||{};a.skipCopy||(r=JSON.parse(JSON.stringify(r))),o?Il(u,r,s):u={...u,...r},xl(this.data,l,u),a.silent||this.emit("added",e,n,r)}removeResourceBundle(e,n){this.hasResourceBundle(e,n)&&delete this.data[e][n],this.removeNamespaces(n),this.emit("removed",e,n)}hasResourceBundle(e,n){return this.getResource(e,n)!==void 0}getResourceBundle(e,n){return n||(n=this.options.defaultNS),this.getResource(e,n)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){let n=this.getDataByLanguage(e);return!!(n&&Object.keys(n)||[]).find(o=>n[o]&&Object.keys(n[o]).length>0)}toJSON(){return this.data}},Ll={processors:{},addPostProcessor(t){this.processors[t.name]=t},handle(t,e,n,r,o){return t.forEach(s=>{e=this.processors[s]?.process(e,n,r,o)??e}),e}},Rl=Symbol("i18next/PATH_KEY");function Wd(){let t=[],e=Object.create(null),n;return e.get=(r,o)=>(n?.revoke?.(),o===Rl?t:(t.push(o),n=Proxy.revocable(r,e),n.proxy)),Proxy.revocable(Object.create(null),e).proxy}i(Wd,"createProxy");function _o(t,e){let{[Rl]:n}=t(Wd());return n.join(e?.keySeparator??".")}i(_o,"keysFromSelector");var Al={},Ro=i(t=>!O(t)&&typeof t!="boolean"&&typeof t!="number","shouldHandleAsObject"),Lr=class t extends rn{static{i(this,"Translator")}constructor(e,n={}){super(),Rd(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=rt.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e,n={interpolation:{}}){let r={...n};if(e==null)return!1;let o=this.resolve(e,r);if(o?.res===void 0)return!1;let s=Ro(o.res);return!(r.returnObjects===!1&&s)}extractFromKey(e,n){let r=n.nsSeparator!==void 0?n.nsSeparator:this.options.nsSeparator;r===void 0&&(r=":");let o=n.keySeparator!==void 0?n.keySeparator:this.options.keySeparator,s=n.ns||this.options.defaultNS||[],a=r&&e.indexOf(r)>-1,l=!this.options.userDefinedKeySeparator&&!n.keySeparator&&!this.options.userDefinedNsSeparator&&!n.nsSeparator&&!Vd(e,r,o);if(a&&!l){let u=e.match(this.interpolator.nestingRegexp);if(u&&u.length>0)return{key:e,namespaces:O(s)?[s]:s};let c=e.split(r);(r!==o||r===o&&this.options.ns.indexOf(c[0])>-1)&&(s=c.shift()),e=c.join(o)}return{key:e,namespaces:O(s)?[s]:s}}translate(e,n,r){let o=typeof n=="object"?{...n}:n;if(typeof o!="object"&&this.options.overloadTranslationOptionHandler&&(o=this.options.overloadTranslationOptionHandler(arguments)),typeof o=="object"&&(o={...o}),o||(o={}),e==null)return"";typeof e=="function"&&(e=_o(e,{...this.options,...o})),Array.isArray(e)||(e=[String(e)]);let s=o.returnDetails!==void 0?o.returnDetails:this.options.returnDetails,a=o.keySeparator!==void 0?o.keySeparator:this.options.keySeparator,{key:l,namespaces:u}=this.extractFromKey(e[e.length-1],o),c=u[u.length-1],f=o.nsSeparator!==void 0?o.nsSeparator:this.options.nsSeparator;f===void 0&&(f=":");let d=o.lng||this.language,h=o.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(d?.toLowerCase()==="cimode")return h?s?{res:`${c}${f}${l}`,usedKey:l,exactUsedKey:l,usedLng:d,usedNS:c,usedParams:this.getUsedParamsDetails(o)}:`${c}${f}${l}`:s?{res:l,usedKey:l,exactUsedKey:l,usedLng:d,usedNS:c,usedParams:this.getUsedParamsDetails(o)}:l;let p=this.resolve(e,o),w=p?.res,x=p?.usedKey||l,y=p?.exactUsedKey||l,b=["[object Number]","[object Function]","[object RegExp]"],k=o.joinArrays!==void 0?o.joinArrays:this.options.joinArrays,v=!this.i18nFormat||this.i18nFormat.handleAsObject,S=o.count!==void 0&&!O(o.count),I=t.hasDefaultValue(o),C=S?this.pluralResolver.getSuffix(d,o.count,o):"",B=o.ordinal&&S?this.pluralResolver.getSuffix(d,o.count,{ordinal:!1}):"",H=S&&!o.ordinal&&o.count===0,D=H&&o[`defaultValue${this.options.pluralSeparator}zero`]||o[`defaultValue${C}`]||o[`defaultValue${B}`]||o.defaultValue,V=w;v&&!w&&I&&(V=D);let ae=Ro(V),W=Object.prototype.toString.apply(V);if(v&&V&&ae&&b.indexOf(W)<0&&!(O(k)&&Array.isArray(V))){if(!o.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");let T=this.options.returnedObjectHandler?this.options.returnedObjectHandler(x,V,{...o,ns:u}):`key '${l} (${this.language})' returned an object instead of string.`;return s?(p.res=T,p.usedParams=this.getUsedParamsDetails(o),p):T}if(a){let T=Array.isArray(V),L=T?[]:{},R=T?y:x;for(let $ in V)if(Object.prototype.hasOwnProperty.call(V,$)){let U=`${R}${a}${$}`;I&&!w?L[$]=this.translate(U,{...o,defaultValue:Ro(D)?D[$]:void 0,joinArrays:!1,ns:u}):L[$]=this.translate(U,{...o,joinArrays:!1,ns:u}),L[$]===U&&(L[$]=V[$])}w=L}}else if(v&&O(k)&&Array.isArray(w))w=w.join(k),w&&(w=this.extendTranslation(w,e,o,r));else{let T=!1,L=!1;!this.isValidLookup(w)&&I&&(T=!0,w=D),this.isValidLookup(w)||(L=!0,w=l);let $=(o.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&L?void 0:w,U=I&&D!==w&&this.options.updateMissing;if(L||T||U){if(this.logger.log(U?"updateKey":"missingKey",d,c,l,U?D:w),a){let Y=this.resolve(l,{...o,keySeparator:!1});Y&&Y.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let le=[],be=this.languageUtils.getFallbackCodes(this.options.fallbackLng,o.lng||this.language);if(this.options.saveMissingTo==="fallback"&&be&&be[0])for(let Y=0;Y<be.length;Y++)le.push(be[Y]);else this.options.saveMissingTo==="all"?le=this.languageUtils.toResolveHierarchy(o.lng||this.language):le.push(o.lng||this.language);let m=i((Y,ue,g)=>{let he=I&&g!==w?g:$;this.options.missingKeyHandler?this.options.missingKeyHandler(Y,c,ue,he,U,o):this.backendConnector?.saveMissing&&this.backendConnector.saveMissing(Y,c,ue,he,U,o),this.emit("missingKey",Y,c,ue,w)},"send");this.options.saveMissing&&(this.options.saveMissingPlurals&&S?le.forEach(Y=>{let ue=this.pluralResolver.getSuffixes(Y,o);H&&o[`defaultValue${this.options.pluralSeparator}zero`]&&ue.indexOf(`${this.options.pluralSeparator}zero`)<0&&ue.push(`${this.options.pluralSeparator}zero`),ue.forEach(g=>{m([Y],l+g,o[`defaultValue${g}`]||D)})}):m(le,l,D))}w=this.extendTranslation(w,e,o,p,r),L&&w===l&&this.options.appendNamespaceToMissingKey&&(w=`${c}${f}${l}`),(L||T)&&this.options.parseMissingKeyHandler&&(w=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${c}${f}${l}`:l,T?w:void 0,o))}return s?(p.res=w,p.usedParams=this.getUsedParamsDetails(o),p):w}extendTranslation(e,n,r,o,s){if(this.i18nFormat?.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...r},r.lng||this.language||o.usedLng,o.usedNS,o.usedKey,{resolved:o});else if(!r.skipInterpolation){r.interpolation&&this.interpolator.init({...r,interpolation:{...this.options.interpolation,...r.interpolation}});let u=O(e)&&(r?.interpolation?.skipOnVariables!==void 0?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables),c;if(u){let d=e.match(this.interpolator.nestingRegexp);c=d&&d.length}let f=r.replace&&!O(r.replace)?r.replace:r;if(this.options.interpolation.defaultVariables&&(f={...this.options.interpolation.defaultVariables,...f}),e=this.interpolator.interpolate(e,f,r.lng||this.language||o.usedLng,r),u){let d=e.match(this.interpolator.nestingRegexp),h=d&&d.length;c<h&&(r.nest=!1)}!r.lng&&o&&o.res&&(r.lng=this.language||o.usedLng),r.nest!==!1&&(e=this.interpolator.nest(e,(...d)=>s?.[0]===d[0]&&!r.context?(this.logger.warn(`It seems you are nesting recursively key: ${d[0]} in key: ${n[0]}`),null):this.translate(...d,n),r)),r.interpolation&&this.interpolator.reset()}let a=r.postProcess||this.options.postProcess,l=O(a)?[a]:a;return e!=null&&l?.length&&r.applyPostProcessor!==!1&&(e=Ll.handle(l,e,n,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...o,usedParams:this.getUsedParamsDetails(r)},...r}:r,this)),e}resolve(e,n={}){let r,o,s,a,l;return O(e)&&(e=[e]),e.forEach(u=>{if(this.isValidLookup(r))return;let c=this.extractFromKey(u,n),f=c.key;o=f;let d=c.namespaces;this.options.fallbackNS&&(d=d.concat(this.options.fallbackNS));let h=n.count!==void 0&&!O(n.count),p=h&&!n.ordinal&&n.count===0,w=n.context!==void 0&&(O(n.context)||typeof n.context=="number")&&n.context!=="",x=n.lngs?n.lngs:this.languageUtils.toResolveHierarchy(n.lng||this.language,n.fallbackLng);d.forEach(y=>{this.isValidLookup(r)||(l=y,!Al[`${x[0]}-${y}`]&&this.utils?.hasLoadedNamespace&&!this.utils?.hasLoadedNamespace(l)&&(Al[`${x[0]}-${y}`]=!0,this.logger.warn(`key "${o}" for languages "${x.join(", ")}" won't get resolved as namespace "${l}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),x.forEach(b=>{if(this.isValidLookup(r))return;a=b;let k=[f];if(this.i18nFormat?.addLookupKeys)this.i18nFormat.addLookupKeys(k,f,b,y,n);else{let S;h&&(S=this.pluralResolver.getSuffix(b,n.count,n));let I=`${this.options.pluralSeparator}zero`,C=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(h&&(n.ordinal&&S.indexOf(C)===0&&k.push(f+S.replace(C,this.options.pluralSeparator)),k.push(f+S),p&&k.push(f+I)),w){let B=`${f}${this.options.contextSeparator||"_"}${n.context}`;k.push(B),h&&(n.ordinal&&S.indexOf(C)===0&&k.push(B+S.replace(C,this.options.pluralSeparator)),k.push(B+S),p&&k.push(B+I))}}let v;for(;v=k.pop();)this.isValidLookup(r)||(s=v,r=this.getResource(b,y,v,n))}))})}),{res:r,usedKey:o,exactUsedKey:s,usedLng:a,usedNS:l}}isValidLookup(e){return e!==void 0&&!(!this.options.returnNull&&e===null)&&!(!this.options.returnEmptyString&&e==="")}getResource(e,n,r,o={}){return this.i18nFormat?.getResource?this.i18nFormat.getResource(e,n,r,o):this.resourceStore.getResource(e,n,r,o)}getUsedParamsDetails(e={}){let n=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],r=e.replace&&!O(e.replace),o=r?e.replace:e;if(r&&typeof e.count<"u"&&(o.count=e.count),this.options.interpolation.defaultVariables&&(o={...this.options.interpolation.defaultVariables,...o}),!r){o={...o};for(let s of n)delete o[s]}return o}static hasDefaultValue(e){let n="defaultValue";for(let r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&n===r.substring(0,n.length)&&e[r]!==void 0)return!0;return!1}},Rr=class{static{i(this,"LanguageUtil")}constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=rt.create("languageUtils")}getScriptPartFromCode(e){if(e=zn(e),!e||e.indexOf("-")<0)return null;let n=e.split("-");return n.length===2||(n.pop(),n[n.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(n.join("-"))}getLanguagePartFromCode(e){if(e=zn(e),!e||e.indexOf("-")<0)return e;let n=e.split("-");return this.formatLanguageCode(n[0])}formatLanguageCode(e){if(O(e)&&e.indexOf("-")>-1){let n;try{n=Intl.getCanonicalLocales(e)[0]}catch{}return n&&this.options.lowerCaseLng&&(n=n.toLowerCase()),n||(this.options.lowerCaseLng?e.toLowerCase():e)}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let n;return e.forEach(r=>{if(n)return;let o=this.formatLanguageCode(r);(!this.options.supportedLngs||this.isSupportedCode(o))&&(n=o)}),!n&&this.options.supportedLngs&&e.forEach(r=>{if(n)return;let o=this.getScriptPartFromCode(r);if(this.isSupportedCode(o))return n=o;let s=this.getLanguagePartFromCode(r);if(this.isSupportedCode(s))return n=s;n=this.options.supportedLngs.find(a=>{if(a===s)return a;if(!(a.indexOf("-")<0&&s.indexOf("-")<0)&&(a.indexOf("-")>0&&s.indexOf("-")<0&&a.substring(0,a.indexOf("-"))===s||a.indexOf(s)===0&&s.length>1))return a})}),n||(n=this.getFallbackCodes(this.options.fallbackLng)[0]),n}getFallbackCodes(e,n){if(!e)return[];if(typeof e=="function"&&(e=e(n)),O(e)&&(e=[e]),Array.isArray(e))return e;if(!n)return e.default||[];let r=e[n];return r||(r=e[this.getScriptPartFromCode(n)]),r||(r=e[this.formatLanguageCode(n)]),r||(r=e[this.getLanguagePartFromCode(n)]),r||(r=e.default),r||[]}toResolveHierarchy(e,n){let r=this.getFallbackCodes((n===!1?[]:n)||this.options.fallbackLng||[],e),o=[],s=i(a=>{a&&(this.isSupportedCode(a)?o.push(a):this.logger.warn(`rejecting language code not found in supportedLngs: ${a}`))},"addCode");return O(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&s(this.formatLanguageCode(e)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&s(this.getScriptPartFromCode(e)),this.options.load!=="currentOnly"&&s(this.getLanguagePartFromCode(e))):O(e)&&s(this.formatLanguageCode(e)),r.forEach(a=>{o.indexOf(a)<0&&s(this.formatLanguageCode(a))}),o}},vl={zero:0,one:1,two:2,few:3,many:4,other:5},El={select:i(t=>t===1?"one":"other","select"),resolvedOptions:i(()=>({pluralCategories:["one","other"]}),"resolvedOptions")},Bo=class{static{i(this,"PluralResolver")}constructor(e,n={}){this.languageUtils=e,this.options=n,this.logger=rt.create("pluralResolver"),this.pluralRulesCache={}}addRule(e,n){this.rules[e]=n}clearCache(){this.pluralRulesCache={}}getRule(e,n={}){let r=zn(e==="dev"?"en":e),o=n.ordinal?"ordinal":"cardinal",s=JSON.stringify({cleanedCode:r,type:o});if(s in this.pluralRulesCache)return this.pluralRulesCache[s];let a;try{a=new Intl.PluralRules(r,{type:o})}catch{if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),El;if(!e.match(/-|_/))return El;let u=this.languageUtils.getLanguagePartFromCode(e);a=this.getRule(u,n)}return this.pluralRulesCache[s]=a,a}needsPlural(e,n={}){let r=this.getRule(e,n);return r||(r=this.getRule("dev",n)),r?.resolvedOptions().pluralCategories.length>1}getPluralFormsOfKey(e,n,r={}){return this.getSuffixes(e,r).map(o=>`${n}${o}`)}getSuffixes(e,n={}){let r=this.getRule(e,n);return r||(r=this.getRule("dev",n)),r?r.resolvedOptions().pluralCategories.sort((o,s)=>vl[o]-vl[s]).map(o=>`${this.options.prepend}${n.ordinal?`ordinal${this.options.prepend}`:""}${o}`):[]}getSuffix(e,n,r={}){let o=this.getRule(e,r);return o?`${this.options.prepend}${r.ordinal?`ordinal${this.options.prepend}`:""}${o.select(n)}`:(this.logger.warn(`no plural rule found for: ${e}`),this.getSuffix("dev",n,r))}},Sl=i((t,e,n,r=".",o=!0)=>{let s=Md(t,e,n);return!s&&o&&O(n)&&(s=Mo(t,n,r),s===void 0&&(s=Mo(e,n,r))),s},"deepFindWithDefaults"),Oo=i(t=>t.replace(/\$/g,"$$$$"),"regexSafe"),$o=class{static{i(this,"Interpolator")}constructor(e={}){this.logger=rt.create("interpolator"),this.options=e,this.format=e?.interpolation?.format||(n=>n),this.init(e)}init(e={}){e.interpolation||(e.interpolation={escapeValue:!0});let{escape:n,escapeValue:r,useRawValueToEscape:o,prefix:s,prefixEscaped:a,suffix:l,suffixEscaped:u,formatSeparator:c,unescapeSuffix:f,unescapePrefix:d,nestingPrefix:h,nestingPrefixEscaped:p,nestingSuffix:w,nestingSuffixEscaped:x,nestingOptionsSeparator:y,maxReplaces:b,alwaysFormat:k}=e.interpolation;this.escape=n!==void 0?n:_d,this.escapeValue=r!==void 0?r:!0,this.useRawValueToEscape=o!==void 0?o:!1,this.prefix=s?nn(s):a||"{{",this.suffix=l?nn(l):u||"}}",this.formatSeparator=c||",",this.unescapePrefix=f?"":d||"-",this.unescapeSuffix=this.unescapePrefix?"":f||"",this.nestingPrefix=h?nn(h):p||nn("$t("),this.nestingSuffix=w?nn(w):x||nn(")"),this.nestingOptionsSeparator=y||",",this.maxReplaces=b||1e3,this.alwaysFormat=k!==void 0?k:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){let e=i((n,r)=>n?.source===r?(n.lastIndex=0,n):new RegExp(r,"g"),"getOrResetRegExp");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}((?:[^()"']+|"[^"]*"|'[^']*'|\\((?:[^()]|"[^"]*"|'[^']*')*\\))*?)${this.nestingSuffix}`)}interpolate(e,n,r,o){let s,a,l,u=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},c=i(p=>{if(p.indexOf(this.formatSeparator)<0){let b=Sl(n,u,p,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(b,void 0,r,{...o,...n,interpolationkey:p}):b}let w=p.split(this.formatSeparator),x=w.shift().trim(),y=w.join(this.formatSeparator).trim();return this.format(Sl(n,u,x,this.options.keySeparator,this.options.ignoreJSONStructure),y,r,{...o,...n,interpolationkey:x})},"handleFormat");this.resetRegExp();let f=o?.missingInterpolationHandler||this.options.missingInterpolationHandler,d=o?.interpolation?.skipOnVariables!==void 0?o.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:i(p=>Oo(p),"safeValue")},{regex:this.regexp,safeValue:i(p=>this.escapeValue?Oo(this.escape(p)):Oo(p),"safeValue")}].forEach(p=>{for(l=0;s=p.regex.exec(e);){let w=s[1].trim();if(a=c(w),a===void 0)if(typeof f=="function"){let y=f(e,s,o);a=O(y)?y:""}else if(o&&Object.prototype.hasOwnProperty.call(o,w))a="";else if(d){a=s[0];continue}else this.logger.warn(`missed to pass in variable ${w} for interpolating ${e}`),a="";else!O(a)&&!this.useRawValueToEscape&&(a=yl(a));let x=p.safeValue(a);if(e=e.replace(s[0],x),d?(p.regex.lastIndex+=a.length,p.regex.lastIndex-=s[0].length):p.regex.lastIndex=0,l++,l>=this.maxReplaces)break}}),e}nest(e,n,r={}){let o,s,a,l=i((u,c)=>{let f=this.nestingOptionsSeparator;if(u.indexOf(f)<0)return u;let d=u.split(new RegExp(`${f}[ ]*{`)),h=`{${d[1]}`;u=d[0],h=this.interpolate(h,a);let p=h.match(/'/g),w=h.match(/"/g);((p?.length??0)%2===0&&!w||w.length%2!==0)&&(h=h.replace(/'/g,'"'));try{a=JSON.parse(h),c&&(a={...c,...a})}catch(x){return this.logger.warn(`failed parsing options string in nesting for key ${u}`,x),`${u}${f}${h}`}return a.defaultValue&&a.defaultValue.indexOf(this.prefix)>-1&&delete a.defaultValue,u},"handleHasOptions");for(;o=this.nestingRegexp.exec(e);){let u=[];a={...r},a=a.replace&&!O(a.replace)?a.replace:a,a.applyPostProcessor=!1,delete a.defaultValue;let c=/{.*}/.test(o[1])?o[1].lastIndexOf("}")+1:o[1].indexOf(this.formatSeparator);if(c!==-1&&(u=o[1].slice(c).split(this.formatSeparator).map(f=>f.trim()).filter(Boolean),o[1]=o[1].slice(0,c)),s=n(l.call(this,o[1].trim(),a),a),s&&o[0]===e&&!O(s))return s;O(s)||(s=yl(s)),s||(this.logger.warn(`missed to resolve ${o[1]} for nesting ${e}`),s=""),u.length&&(s=u.reduce((f,d)=>this.format(f,d,r.lng,{...r,interpolationkey:o[1].trim()}),s.trim())),e=e.replace(o[0],s),this.regexp.lastIndex=0}return e}},Hd=i(t=>{let e=t.toLowerCase().trim(),n={};if(t.indexOf("(")>-1){let r=t.split("(");e=r[0].toLowerCase().trim();let o=r[1].substring(0,r[1].length-1);e==="currency"&&o.indexOf(":")<0?n.currency||(n.currency=o.trim()):e==="relativetime"&&o.indexOf(":")<0?n.range||(n.range=o.trim()):o.split(";").forEach(a=>{if(a){let[l,...u]=a.split(":"),c=u.join(":").trim().replace(/^'+|'+$/g,""),f=l.trim();n[f]||(n[f]=c),c==="false"&&(n[f]=!1),c==="true"&&(n[f]=!0),isNaN(c)||(n[f]=parseInt(c,10))}})}return{formatName:e,formatOptions:n}},"parseFormatStr"),Tl=i(t=>{let e={};return(n,r,o)=>{let s=o;o&&o.interpolationkey&&o.formatParams&&o.formatParams[o.interpolationkey]&&o[o.interpolationkey]&&(s={...s,[o.interpolationkey]:void 0});let a=r+JSON.stringify(s),l=e[a];return l||(l=t(zn(r),o),e[a]=l),l(n)}},"createCachedFormatter"),Ud=i(t=>(e,n,r)=>t(zn(n),r)(e),"createNonCachedFormatter"),Vo=class{static{i(this,"Formatter")}constructor(e={}){this.logger=rt.create("formatter"),this.options=e,this.init(e)}init(e,n={interpolation:{}}){this.formatSeparator=n.interpolation.formatSeparator||",";let r=n.cacheInBuiltFormats?Tl:Ud;this.formats={number:r((o,s)=>{let a=new Intl.NumberFormat(o,{...s});return l=>a.format(l)}),currency:r((o,s)=>{let a=new Intl.NumberFormat(o,{...s,style:"currency"});return l=>a.format(l)}),datetime:r((o,s)=>{let a=new Intl.DateTimeFormat(o,{...s});return l=>a.format(l)}),relativetime:r((o,s)=>{let a=new Intl.RelativeTimeFormat(o,{...s});return l=>a.format(l,s.range||"day")}),list:r((o,s)=>{let a=new Intl.ListFormat(o,{...s});return l=>a.format(l)})}}add(e,n){this.formats[e.toLowerCase().trim()]=n}addCached(e,n){this.formats[e.toLowerCase().trim()]=Tl(n)}format(e,n,r,o={}){let s=n.split(this.formatSeparator);if(s.length>1&&s[0].indexOf("(")>1&&s[0].indexOf(")")<0&&s.find(l=>l.indexOf(")")>-1)){let l=s.findIndex(u=>u.indexOf(")")>-1);s[0]=[s[0],...s.splice(1,l)].join(this.formatSeparator)}return s.reduce((l,u)=>{let{formatName:c,formatOptions:f}=Hd(u);if(this.formats[c]){let d=l;try{let h=o?.formatParams?.[o.interpolationkey]||{},p=h.locale||h.lng||o.locale||o.lng||r;d=this.formats[c](l,p,{...f,...o,...h})}catch(h){this.logger.warn(h)}return d}else this.logger.warn(`there was no format function for ${c}`);return l},e)}},jd=i((t,e)=>{t.pending[e]!==void 0&&(delete t.pending[e],t.pendingCount--)},"removePending"),zo=class extends rn{static{i(this,"Connector")}constructor(e,n,r,o={}){super(),this.backend=e,this.store=n,this.services=r,this.languageUtils=r.languageUtils,this.options=o,this.logger=rt.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=o.maxParallelReads||10,this.readingCalls=0,this.maxRetries=o.maxRetries>=0?o.maxRetries:5,this.retryTimeout=o.retryTimeout>=1?o.retryTimeout:350,this.state={},this.queue=[],this.backend?.init?.(r,o.backend,o)}queueLoad(e,n,r,o){let s={},a={},l={},u={};return e.forEach(c=>{let f=!0;n.forEach(d=>{let h=`${c}|${d}`;!r.reload&&this.store.hasResourceBundle(c,d)?this.state[h]=2:this.state[h]<0||(this.state[h]===1?a[h]===void 0&&(a[h]=!0):(this.state[h]=1,f=!1,a[h]===void 0&&(a[h]=!0),s[h]===void 0&&(s[h]=!0),u[d]===void 0&&(u[d]=!0)))}),f||(l[c]=!0)}),(Object.keys(s).length||Object.keys(a).length)&&this.queue.push({pending:a,pendingCount:Object.keys(a).length,loaded:{},errors:[],callback:o}),{toLoad:Object.keys(s),pending:Object.keys(a),toLoadLanguages:Object.keys(l),toLoadNamespaces:Object.keys(u)}}loaded(e,n,r){let o=e.split("|"),s=o[0],a=o[1];n&&this.emit("failedLoading",s,a,n),!n&&r&&this.store.addResourceBundle(s,a,r,void 0,void 0,{skipCopy:!0}),this.state[e]=n?-1:2,n&&r&&(this.state[e]=0);let l={};this.queue.forEach(u=>{Dd(u.loaded,[s],a),jd(u,e),n&&u.errors.push(n),u.pendingCount===0&&!u.done&&(Object.keys(u.loaded).forEach(c=>{l[c]||(l[c]={});let f=u.loaded[c];f.length&&f.forEach(d=>{l[c][d]===void 0&&(l[c][d]=!0)})}),u.done=!0,u.errors.length?u.callback(u.errors):u.callback())}),this.emit("loaded",l),this.queue=this.queue.filter(u=>!u.done)}read(e,n,r,o=0,s=this.retryTimeout,a){if(!e.length)return a(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:e,ns:n,fcName:r,tried:o,wait:s,callback:a});return}this.readingCalls++;let l=i((c,f)=>{if(this.readingCalls--,this.waitingReads.length>0){let d=this.waitingReads.shift();this.read(d.lng,d.ns,d.fcName,d.tried,d.wait,d.callback)}if(c&&f&&o<this.maxRetries){setTimeout(()=>{this.read.call(this,e,n,r,o+1,s*2,a)},s);return}a(c,f)},"resolver"),u=this.backend[r].bind(this.backend);if(u.length===2){try{let c=u(e,n);c&&typeof c.then=="function"?c.then(f=>l(null,f)).catch(l):l(null,c)}catch(c){l(c)}return}return u(e,n,l)}prepareLoading(e,n,r={},o){if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),o&&o();O(e)&&(e=this.languageUtils.toResolveHierarchy(e)),O(n)&&(n=[n]);let s=this.queueLoad(e,n,r,o);if(!s.toLoad.length)return s.pending.length||o(),null;s.toLoad.forEach(a=>{this.loadOne(a)})}load(e,n,r){this.prepareLoading(e,n,{},r)}reload(e,n,r){this.prepareLoading(e,n,{reload:!0},r)}loadOne(e,n=""){let r=e.split("|"),o=r[0],s=r[1];this.read(o,s,"read",void 0,void 0,(a,l)=>{a&&this.logger.warn(`${n}loading namespace ${s} for language ${o} failed`,a),!a&&l&&this.logger.log(`${n}loaded namespace ${s} for language ${o}`,l),this.loaded(e,a,l)})}saveMissing(e,n,r,o,s,a={},l=()=>{}){if(this.services?.utils?.hasLoadedNamespace&&!this.services?.utils?.hasLoadedNamespace(n)){this.logger.warn(`did not save key "${r}" as the namespace "${n}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(r==null||r==="")){if(this.backend?.create){let u={...a,isUpdate:s},c=this.backend.create.bind(this.backend);if(c.length<6)try{let f;c.length===5?f=c(e,n,r,o,u):f=c(e,n,r,o),f&&typeof f.then=="function"?f.then(d=>l(null,d)).catch(l):l(null,f)}catch(f){l(f)}else c(e,n,r,o,l,u)}!e||!e[0]||this.store.addResource(e[0],n,r,o)}}},Pl=i(()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:i(t=>{let e={};if(typeof t[1]=="object"&&(e=t[1]),O(t[1])&&(e.defaultValue=t[1]),O(t[2])&&(e.tDescription=t[2]),typeof t[2]=="object"||typeof t[3]=="object"){let n=t[3]||t[2];Object.keys(n).forEach(r=>{e[r]=n[r]})}return e},"overloadTranslationOptionHandler"),interpolation:{escapeValue:!0,format:i(t=>t,"format"),prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0},cacheInBuiltFormats:!0}),"get"),Fl=i(t=>(O(t.ns)&&(t.ns=[t.ns]),O(t.fallbackLng)&&(t.fallbackLng=[t.fallbackLng]),O(t.fallbackNS)&&(t.fallbackNS=[t.fallbackNS]),t.supportedLngs?.indexOf?.("cimode")<0&&(t.supportedLngs=t.supportedLngs.concat(["cimode"])),typeof t.initImmediate=="boolean"&&(t.initAsync=t.initImmediate),t),"transformOptions"),Pr=i(()=>{},"noop"),Kd=i(t=>{Object.getOwnPropertyNames(Object.getPrototypeOf(t)).forEach(n=>{typeof t[n]=="function"&&(t[n]=t[n].bind(t))})},"bindMemberFunctions"),Wo=class t extends rn{static{i(this,"I18n")}constructor(e={},n){if(super(),this.options=Fl(e),this.services={},this.logger=rt,this.modules={external:[]},Kd(this),n&&!this.isInitialized&&!e.isClone){if(!this.options.initAsync)return this.init(e,n),this;setTimeout(()=>{this.init(e,n)},0)}}init(e={},n){this.isInitializing=!0,typeof e=="function"&&(n=e,e={}),e.defaultNS==null&&e.ns&&(O(e.ns)?e.defaultNS=e.ns:e.ns.indexOf("translation")<0&&(e.defaultNS=e.ns[0]));let r=Pl();this.options={...r,...this.options,...Fl(e)},this.options.interpolation={...r.interpolation,...this.options.interpolation},e.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=e.keySeparator),e.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=e.nsSeparator);let o=i(c=>c?typeof c=="function"?new c:c:null,"createClassOnDemand");if(!this.options.isClone){this.modules.logger?rt.init(o(this.modules.logger),this.options):rt.init(null,this.options);let c;this.modules.formatter?c=this.modules.formatter:c=Vo;let f=new Rr(this.options);this.store=new Ir(this.options.resources,this.options);let d=this.services;d.logger=rt,d.resourceStore=this.store,d.languageUtils=f,d.pluralResolver=new Bo(f,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),this.options.interpolation.format&&this.options.interpolation.format!==r.interpolation.format&&this.logger.deprecate("init: you are still using the legacy format function, please use the new approach: https://www.i18next.com/translation-function/formatting"),c&&(!this.options.interpolation.format||this.options.interpolation.format===r.interpolation.format)&&(d.formatter=o(c),d.formatter.init&&d.formatter.init(d,this.options),this.options.interpolation.format=d.formatter.format.bind(d.formatter)),d.interpolator=new $o(this.options),d.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},d.backendConnector=new zo(o(this.modules.backend),d.resourceStore,d,this.options),d.backendConnector.on("*",(p,...w)=>{this.emit(p,...w)}),this.modules.languageDetector&&(d.languageDetector=o(this.modules.languageDetector),d.languageDetector.init&&d.languageDetector.init(d,this.options.detection,this.options)),this.modules.i18nFormat&&(d.i18nFormat=o(this.modules.i18nFormat),d.i18nFormat.init&&d.i18nFormat.init(this)),this.translator=new Lr(this.services,this.options),this.translator.on("*",(p,...w)=>{this.emit(p,...w)}),this.modules.external.forEach(p=>{p.init&&p.init(this)})}if(this.format=this.options.interpolation.format,n||(n=Pr),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){let c=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);c.length>0&&c[0]!=="dev"&&(this.options.lng=c[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(c=>{this[c]=(...f)=>this.store[c](...f)}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(c=>{this[c]=(...f)=>(this.store[c](...f),this)});let l=$n(),u=i(()=>{let c=i((f,d)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),l.resolve(d),n(f,d)},"finish");if(this.languages&&!this.isInitialized)return c(null,this.t.bind(this));this.changeLanguage(this.options.lng,c)},"load");return this.options.resources||!this.options.initAsync?u():setTimeout(u,0),l}loadResources(e,n=Pr){let r=n,o=O(e)?e:this.language;if(typeof e=="function"&&(r=e),!this.options.resources||this.options.partialBundledLanguages){if(o?.toLowerCase()==="cimode"&&(!this.options.preload||this.options.preload.length===0))return r();let s=[],a=i(l=>{if(!l||l==="cimode")return;this.services.languageUtils.toResolveHierarchy(l).forEach(c=>{c!=="cimode"&&s.indexOf(c)<0&&s.push(c)})},"append");o?a(o):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(u=>a(u)),this.options.preload?.forEach?.(l=>a(l)),this.services.backendConnector.load(s,this.options.ns,l=>{!l&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),r(l)})}else r(null)}reloadResources(e,n,r){let o=$n();return typeof e=="function"&&(r=e,e=void 0),typeof n=="function"&&(r=n,n=void 0),e||(e=this.languages),n||(n=this.options.ns),r||(r=Pr),this.services.backendConnector.reload(e,n,s=>{o.resolve(),r(s)}),o}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return e.type==="backend"&&(this.modules.backend=e),(e.type==="logger"||e.log&&e.warn&&e.error)&&(this.modules.logger=e),e.type==="languageDetector"&&(this.modules.languageDetector=e),e.type==="i18nFormat"&&(this.modules.i18nFormat=e),e.type==="postProcessor"&&Ll.addPostProcessor(e),e.type==="formatter"&&(this.modules.formatter=e),e.type==="3rdParty"&&this.modules.external.push(e),this}setResolvedLanguage(e){if(!(!e||!this.languages)&&!(["cimode","dev"].indexOf(e)>-1)){for(let n=0;n<this.languages.length;n++){let r=this.languages[n];if(!(["cimode","dev"].indexOf(r)>-1)&&this.store.hasLanguageSomeTranslations(r)){this.resolvedLanguage=r;break}}!this.resolvedLanguage&&this.languages.indexOf(e)<0&&this.store.hasLanguageSomeTranslations(e)&&(this.resolvedLanguage=e,this.languages.unshift(e))}}changeLanguage(e,n){this.isLanguageChangingTo=e;let r=$n();this.emit("languageChanging",e);let o=i(l=>{this.language=l,this.languages=this.services.languageUtils.toResolveHierarchy(l),this.resolvedLanguage=void 0,this.setResolvedLanguage(l)},"setLngProps"),s=i((l,u)=>{u?this.isLanguageChangingTo===e&&(o(u),this.translator.changeLanguage(u),this.isLanguageChangingTo=void 0,this.emit("languageChanged",u),this.logger.log("languageChanged",u)):this.isLanguageChangingTo=void 0,r.resolve((...c)=>this.t(...c)),n&&n(l,(...c)=>this.t(...c))},"done"),a=i(l=>{!e&&!l&&this.services.languageDetector&&(l=[]);let u=O(l)?l:l&&l[0],c=this.store.hasLanguageSomeTranslations(u)?u:this.services.languageUtils.getBestMatchFromCodes(O(l)?[l]:l);c&&(this.language||o(c),this.translator.language||this.translator.changeLanguage(c),this.services.languageDetector?.cacheUserLanguage?.(c)),this.loadResources(c,f=>{s(f,c)})},"setLng");return!e&&this.services.languageDetector&&!this.services.languageDetector.async?a(this.services.languageDetector.detect()):!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(a):this.services.languageDetector.detect(a):a(e),r}getFixedT(e,n,r){let o=i((s,a,...l)=>{let u;typeof a!="object"?u=this.options.overloadTranslationOptionHandler([s,a].concat(l)):u={...a},u.lng=u.lng||o.lng,u.lngs=u.lngs||o.lngs,u.ns=u.ns||o.ns,u.keyPrefix!==""&&(u.keyPrefix=u.keyPrefix||r||o.keyPrefix);let c=this.options.keySeparator||".",f;return u.keyPrefix&&Array.isArray(s)?f=s.map(d=>(typeof d=="function"&&(d=_o(d,{...this.options,...a})),`${u.keyPrefix}${c}${d}`)):(typeof s=="function"&&(s=_o(s,{...this.options,...a})),f=u.keyPrefix?`${u.keyPrefix}${c}${s}`:s),this.t(f,u)},"fixedT");return O(e)?o.lng=e:o.lngs=e,o.ns=n,o.keyPrefix=r,o}t(...e){return this.translator?.translate(...e)}exists(...e){return this.translator?.exists(...e)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e,n={}){if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;let r=n.lng||this.resolvedLanguage||this.languages[0],o=this.options?this.options.fallbackLng:!1,s=this.languages[this.languages.length-1];if(r.toLowerCase()==="cimode")return!0;let a=i((l,u)=>{let c=this.services.backendConnector.state[`${l}|${u}`];return c===-1||c===0||c===2},"loadNotPending");if(n.precheck){let l=n.precheck(this,a);if(l!==void 0)return l}return!!(this.hasResourceBundle(r,e)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||a(r,e)&&(!o||a(s,e)))}loadNamespaces(e,n){let r=$n();return this.options.ns?(O(e)&&(e=[e]),e.forEach(o=>{this.options.ns.indexOf(o)<0&&this.options.ns.push(o)}),this.loadResources(o=>{r.resolve(),n&&n(o)}),r):(n&&n(),Promise.resolve())}loadLanguages(e,n){let r=$n();O(e)&&(e=[e]);let o=this.options.preload||[],s=e.filter(a=>o.indexOf(a)<0&&this.services.languageUtils.isSupportedCode(a));return s.length?(this.options.preload=o.concat(s),this.loadResources(a=>{r.resolve(),n&&n(a)}),r):(n&&n(),Promise.resolve())}dir(e){if(e||(e=this.resolvedLanguage||(this.languages?.length>0?this.languages[0]:this.language)),!e)return"rtl";try{let o=new Intl.Locale(e);if(o&&o.getTextInfo){let s=o.getTextInfo();if(s&&s.direction)return s.direction}}catch{}let n=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],r=this.services?.languageUtils||new Rr(Pl());return e.toLowerCase().indexOf("-latn")>1?"ltr":n.indexOf(r.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(e={},n){let r=new t(e,n);return r.createInstance=t.createInstance,r}cloneInstance(e={},n=Pr){let r=e.forkResourceStore;r&&delete e.forkResourceStore;let o={...this.options,...e,isClone:!0},s=new t(o);if((e.debug!==void 0||e.prefix!==void 0)&&(s.logger=s.logger.clone(e)),["store","services","language"].forEach(l=>{s[l]=this[l]}),s.services={...this.services},s.services.utils={hasLoadedNamespace:s.hasLoadedNamespace.bind(s)},r){let l=Object.keys(this.store.data).reduce((u,c)=>(u[c]={...this.store.data[c]},u[c]=Object.keys(u[c]).reduce((f,d)=>(f[d]={...u[c][d]},f),u[c]),u),{});s.store=new Ir(l,o),s.services.resourceStore=s.store}return s.translator=new Lr(s.services,o),s.translator.on("*",(l,...u)=>{s.emit(l,...u)}),s.init(o,n),s.translator.options=o,s.translator.backendConnector.services.utils={hasLoadedNamespace:s.hasLoadedNamespace.bind(s)},s}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}},me=Wo.createInstance(),tb=me.createInstance,nb=me.dir,Ol=me.init,rb=me.loadResources,ib=me.reloadResources,ob=me.use,sb=me.changeLanguage,ab=me.getFixedT,Or=me.t,lb=me.exists,ub=me.setDefaultNamespace,cb=me.hasLoadedNamespace,fb=me.loadNamespaces,db=me.loadLanguages;var Nl=require("obsidian");var Dl=require("obsidian");i((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();var Dr=class extends Dl.Modal{static{i(this,"ModalBase")}constructor(e,n,r){super(e.app),this.resolve=n,j(this.containerEl,r),e.cssClass&&this.containerEl.addClass(e.cssClass)}};async function Ml(t){return await new Promise(e=>{t(e).open()})}i(Ml,"showModal");i((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();var Ho=class extends Dr{static{i(this,"AlertModal")}options;constructor(e,n){super(e,n,F.AlertModal);let r={app:e.app,cssClass:"",message:e.message,okButtonText:Or(o=>o.obsidianDevUtils.buttons.ok),title:""};this.options={...r,...e}}onClose(){super.onClose(),this.resolve()}onOpen(){super.onOpen(),this.titleEl.setText(this.options.title),this.contentEl.createEl("p",{text:this.options.message});let e=new Nl.ButtonComponent(this.contentEl);e.setButtonText(this.options.okButtonText),e.setCta(),e.onClick(this.close.bind(this)),e.setClass(F.OkButton)}};async function Mr(t){await Ml(e=>new Ho(t,e))}i(Mr,"alert");var Wr=require("obsidian");var _l=require("obsidian");i((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();var Nr=class extends _l.Component{static{i(this,"AsyncEventsComponent")}registerAsyncEvent(e){_r(this,e)}};function _r(t,e){t.register(()=>{e.asyncEvents.offref(e)})}i(_r,"registerAsyncEvent");var $l=require("obsidian");i((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();var Br={obsidianDevUtils:{buttons:{cancel:"Cancel",ok:"OK"},dataview:{itemsPerPage:"Items per page:",jumpToPage:"Jump to page:"},notices:{attachmentIsStillUsed:"Attachment {{attachmentPath}} is still used by other notes. It will not be deleted.",unhandledError:"An unhandled error occurred. Please check the console for more information."}}};i((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();var Uo="en",qd={en:Br},$r=qd;i((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();var Bl="translation",jo=!1;async function Ko(t,e=!0){jo||(jo=!0,await Ol({fallbackLng:Uo,initAsync:e,lng:(0,$l.getLanguage)(),resources:Object.fromEntries(Object.entries(t).map(([n,r])=>[n,{[Bl]:r}])),returnEmptyString:!1,returnNull:!1}),me.addResourceBundle(Uo,Bl,Br,!0,!1))}i(Ko,"initI18N");function Gd(t,e){return jo||(console.warn("I18N was not initialized, initializing default obsidian-dev-utils translations"),Pe(()=>Ko($r,!1))),Or(t,e)}i(Gd,"tImpl");var Vr=Gd;i((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();function Yd(t){let e=new Set;return t.workspace.iterateAllLeaves(n=>{e.add(n.getContainer())}),Array.from(e)}i(Yd,"getAllContainers");function Vl(t){return Yd(t).map(e=>e.win)}i(Vl,"getAllDomWindows");i((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();var zr=class extends Wr.Plugin{static{i(this,"PluginBase")}events=new et;get abortSignal(){if(!this._abortSignal)throw new Error("Abort signal not defined");return this._abortSignal}get settings(){return this.settingsManager.settingsWrapper.safeSettings}get settingsManager(){if(!this._settingsManager)throw new Error("Settings manager not defined");return this._settingsManager}get settingsTab(){if(!this._settingsTab)throw new Error("Settings tab not defined");return this._settingsTab}_abortSignal;_settingsManager=null;_settingsTab=null;lifecycleEventNames=new Set;notice;consoleDebug(e,...n){vr(this.manifest.id,1)(e,...n)}async onExternalSettingsChange(){await super.onExternalSettingsChange?.(),await this._settingsManager?.loadFromFile(!1)}async onload(){await super.onload(),await this.onloadImpl(),cl(this.afterLoad.bind(this))}onunload(){super.onunload(),Pe(async()=>{try{await this.onunloadImpl()}finally{await this.triggerLifecycleEvent("unload")}})}registerDomWindowHandler(e){let n=window;e(n),this.app.workspace.onLayoutReady(()=>{for(let r of Vl(this.app))r!==n&&e(r);this.registerEvent(this.app.workspace.on("window-open",r=>{e(r.win)}))})}registerForLifecycleEvent(e,n){Pe(async()=>{await this.waitForLifecycleEvent(e),await n()})}registerPopupDocumentDomEvent(e,n,r){this.registerDomWindowHandler(o=>{this.registerDomEvent(o.document,e,n,r)})}registerPopupWindowDomEvent(e,n,r){this.registerDomWindowHandler(o=>{this.registerDomEvent(o,e,n,r)})}async waitForLifecycleEvent(e){this.lifecycleEventNames.has(e)||await new Promise(n=>{this.events.once(e,()=>{n()})})}createSettingsManager(){return null}createSettingsTab(){return null}createTranslationsMap(){return $r}handleAsyncError(e){this.showNotice(Vr(n=>n.obsidianDevUtils.notices.unhandledError))}async onLayoutReady(){await Xe()}async onloadImpl(){wl(this.app,this.manifest.id),this.registerDomWindowHandler(n=>{gl(n)}),await Ko(this.createTranslationsMap()),this.register(Da(this.handleAsyncError.bind(this))),this._settingsManager=this.createSettingsManager(),this._settingsManager&&(_r(this,this._settingsManager.on("loadSettings",this.onLoadSettings.bind(this))),_r(this,this._settingsManager.on("saveSettings",this.onSaveSettings.bind(this)))),await this._settingsManager?.loadFromFile(!0),this._settingsTab=this.createSettingsTab(),this._settingsTab&&this.addSettingTab(this._settingsTab);let e=new AbortController;this._abortSignal=e.signal,this.register(()=>{e.abort(new Yt(`Plugin ${this.manifest.id} had been unloaded`))})}async onLoadSettings(e,n){await Xe()}async onSaveSettings(e,n,r){await Xe()}async onunloadImpl(){await Xe()}showNotice(e){this.notice&&this.notice.hide(),this.notice=new Wr.Notice(`${this.manifest.name}
${e}`)}async afterLoad(){this.abortSignal.aborted||(await this.triggerLifecycleEvent("load"),this.app.workspace.onLayoutReady(tn(this.onLayoutReadyBase.bind(this))))}async onLayoutReadyBase(){try{await this.onLayoutReady()}finally{await this.triggerLifecycleEvent("layoutReady")}}async triggerLifecycleEvent(e){this.lifecycleEventNames.add(e),await this.events.triggerAsync(e)}};i((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();async function zl(t,e,n,r){n.throwIfAborted();let o=q("Logger:invokeAsyncAndLog"),s=performance.now();r??=Ce(1),nt(o,r,`${t}:start`,{fn:e,timestampStart:s});try{await e(n);let a=performance.now(),l=a-s;n.aborted&&(nt(o,r,`${t}:aborted`,{abortReason:n.reason,duration:l,fn:e,timestampEnd:a,timestampStart:s}),n.throwIfAborted()),nt(o,r,`${t}:end`,{duration:l,fn:e,timestampEnd:a,timestampStart:s})}catch(a){let l=performance.now();throw nt(o,r,`${t}:error`,{duration:l-s,error:a,fn:e,timestampEnd:l,timestampStart:s}),a}}i(zl,"invokeAsyncAndLog");i((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();function Ve(t,e,n,r,o){o??=Ce(1),Pe(()=>Jd(t,e,n,r,o),o)}i(Ve,"addToQueue");async function Jd(t,e,n,r,o){n??=ke(),n.throwIfAborted(),r??=6e4,o??=Ce(1);let a=Wl(t).value;a.items.push({abortSignal:n,fn:e,stackTrace:o,timeoutInMilliseconds:r}),a.promise=a.promise.then(()=>Hl(t)),await a.promise}i(Jd,"addToQueueAndWait");function Wl(t){return xe(t,"queue",{items:[],promise:Promise.resolve()})}i(Wl,"getQueue");async function Hl(t){let e=Wl(t).value,n=e.items[0];n&&(await Fo(()=>Io(n.timeoutInMilliseconds,r=>zl(Hl.name,n.fn,Tt(r,n.abortSignal),n.stackTrace),{queuedFn:n.fn}),n.stackTrace),e.items.shift())}i(Hl,"processNextQueueItem");var Ti=require("obsidian");i((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();var Ul=".",Qd=[{constructor:ArrayBuffer,equalityComparer:Zd},{constructor:Date,equalityComparer:eh},{constructor:RegExp,equalityComparer:nh},{constructor:Map,equalityComparer:th},{constructor:Set,equalityComparer:rh}];function ze(t,e){if(t===e)return!0;if(typeof t!="object"||typeof e!="object"||t===null||e===null)return!1;let n=t.constructor,r=e.constructor;if(n!==r)return!1;if(n!==Object){let u=ih(t,e);if(u!==void 0)return u}let o=on(t),s=on(e);if(o.length!==s.length)return!1;let a=t,l=e;for(let u of o)if(!s.includes(u)||!ze(a[u],l[u]))return!1;return!0}i(ze,"deepEqual");function ht(t){return typeof t!="object"||t===null?t:"default"in t?t.default:t}i(ht,"extractDefaultExportInterop");function on(t){let e=[],n=t;for(;n;){let r=Object.getOwnPropertyDescriptors(n);for(let[o,s]of Object.entries(r)){if(o==="__proto__"||typeof s.value=="function")continue;let a=typeof s.get=="function",l=typeof s.set=="function";if(a||l){a&&l&&e.push(o);continue}s.enumerable&&s.writable&&e.push(o)}n=Object.getPrototypeOf(n)}return e.sort()}i(on,"getAllKeys");function sn(t,e){let n=t,r=e.split(Ul);for(let o of r){if(n===void 0)return;n=n[o]}return n}i(sn,"getNestedPropertyValue");function jl(t,e,n){let r=new Error(`Property path ${e} not found`),o=t,s=e.split(Ul);for(let l of s.slice(0,-1)){if(o===void 0)throw r;o=o[l]}let a=s.at(-1);if(o===void 0||a===void 0)throw r;o[a]=n}i(jl,"setNestedPropertyValue");function Hr(t,e={}){let n={functionHandlingMode:"exclude",maxDepth:-1,shouldCatchToJSONErrors:!1,shouldHandleCircularReferences:!1,shouldHandleErrors:!1,shouldHandleUndefined:!1,shouldSortKeys:!1,space:2,tokenSubstitutions:{circularReference:qo("CircularReference"),maxDepthLimitReached:qo("MaxDepthLimitReached"),toJSONFailed:qo("ToJSONFailed")}},r={...n,...e,tokenSubstitutions:{...n.tokenSubstitutions,...e.tokenSubstitutions}};r.maxDepth===-1&&(r.maxDepth=1/0);let o=[],a=Ur(t,"",0,!0,r,o,new WeakSet),l=JSON.stringify(a,null,r.space)??"";return l=pe(l,/"\[\[(?<Key>[A-Za-z]+)(?<Index>\d*)\]\]"/g,(u,c,f)=>Xd({functionTexts:o,index:f?parseInt(f,10):0,key:c,substitutions:r.tokenSubstitutions})),l}i(Hr,"toJson");function Xd(t){switch(t.key){case"CircularReference":return t.substitutions.circularReference;case"Function":return t.functionTexts[t.index]??Rn(new Error(`Function with index ${String(t.index)} not found`));case"MaxDepthLimitReached":return t.substitutions.maxDepthLimitReached;case"MaxDepthLimitReachedArray":return`Array(${String(t.index)})`;case"ToJSONFailed":return t.substitutions.toJSONFailed;case"Undefined":return"undefined";default:break}}i(Xd,"applySubstitutions");function Zd(t,e){if(t.byteLength!==e.byteLength)return!1;let n=new Uint8Array(t),r=new Uint8Array(e);return ze(n,r)}i(Zd,"deepEqualArrayBuffer");function eh(t,e){return t.getTime()===e.getTime()}i(eh,"deepEqualDate");function th(t,e){if(t.size!==e.size)return!1;for(let[n,r]of t.entries())if(!e.has(n)||!ze(r,e.get(n)))return!1;return!0}i(th,"deepEqualMap");function nh(t,e){return t.source===e.source&&t.flags===e.flags}i(nh,"deepEqualRegExp");function rh(t,e){if(t.size!==e.size)return!1;for(let n of t){if(e.has(n))continue;let r=!1;for(let o of e)if(ze(n,o)){r=!0;break}if(!r)return!1}return!0}i(rh,"deepEqualSet");function ih(t,e){for(let{constructor:n,equalityComparer:r}of Qd)if(t instanceof n&&e instanceof n)return r(t,e)}i(ih,"deepEqualTyped");function oh(t,e,n,r,o,s){return e>r.maxDepth?an("MaxDepthLimitReachedArray",t.length):t.map((a,l)=>Ur(a,String(l),e+1,n,r,o,s))}i(oh,"handleArray");function sh(t,e,n){if(n.shouldHandleCircularReferences)return an("CircularReference");let r=t.constructor.name||"Object";throw new TypeError(`Converting circular structure to JSON
--> starting at object with constructor '${r}'
--- property '${e}' closes the circle`)}i(sh,"handleCircularReference");function ah(t,e,n){if(n.functionHandlingMode==="exclude")return;let r=e.length,o=n.functionHandlingMode==="full"?String(t):`function ${t.name||"anonymous"}() { /* ... */ }`;return e.push(o),an("Function",r)}i(ah,"handleFunction");function lh(t,e,n,r,o,s,a){if(a.has(t))return sh(t,e,o);if(a.add(t),r){let l=ch(t,e,n,o,s,a);if(l!==void 0)return l}return Array.isArray(t)?oh(t,n,r,o,s,a):n>o.maxDepth?an("MaxDepthLimitReached"):t instanceof Error&&o.shouldHandleErrors?dr(t):uh(t,n,r,o,s,a)}i(lh,"handleObject");function uh(t,e,n,r,o,s){let a=Object.entries(t);return r.shouldSortKeys&&a.sort(([l],[u])=>l.localeCompare(u)),Object.fromEntries(a.map(([l,u])=>[l,Ur(u,l,e+1,n,r,o,s)]))}i(uh,"handlePlainObject");function qo(t){return`{ "[[${t}]]": null }`}i(qo,"makeObjectTokenSubstitution");function an(t,e){return`[[${t}${e?String(e):""}]]`}i(an,"makePlaceholder");function Ur(t,e,n,r,o,s,a){return t===void 0?n===0||o.shouldHandleUndefined?an("Undefined"):void 0:typeof t=="function"?ah(t,s,o):typeof t!="object"||t===null?t:lh(t,e,n,r,o,s,a)}i(Ur,"toPlainObject");function ch(t,e,n,r,o,s){let a=t.toJSON;if(typeof a=="function")try{let l=a.call(t,e);return Ur(l,e,n,!1,r,o,s)}catch(l){if(r.shouldCatchToJSONErrors)return an("ToJSONFailed");throw l}}i(ch,"tryHandleToJSON");i((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();var pt=(t=>(t.DeleteNote="DeleteNote",t.RenameNote="RenameNote",t.Unknown="Unknown",t))(pt||{}),ql="__DUMMY__";async function Wn(t){let{app:e,notePathOrFile:n,oldAttachmentPathOrFile:r,shouldSkipDuplicateCheck:o}=t,s=Q(e,r),a=Ge(s),l=Se(s,a),u=J(e,s),c=e.vault.getAvailablePathForAttachments.extended;return c?c({attachmentFileBaseName:l,attachmentFileContent:u?await e.vault.readBinary(u):void 0,attachmentFileExtension:a.slice(1),attachmentFileStat:u?.stat,context:t.context,notePathOrFile:n,oldAttachmentPathOrFile:t.oldAttachmentPathOrFile,oldNotePathOrFile:t.oldNotePathOrFile,shouldSkipDuplicateCheck:o,shouldSkipMissingAttachmentFolderCreation:!0}):await fh({app:e,attachmentFileBaseName:l,attachmentFileExtension:a.slice(1),notePathOrFile:n,shouldSkipDuplicateCheck:o,shouldSkipMissingAttachmentFolderCreation:!0})}i(Wn,"getAttachmentFilePath");async function ln(t,e,n="Unknown"){return Ne(await Wn({app:t,context:n,notePathOrFile:e,oldAttachmentPathOrFile:ql,shouldSkipDuplicateCheck:!0}))}i(ln,"getAttachmentFolderPath");async function fh(t){let{app:e,attachmentFileExtension:n,notePathOrFile:r,shouldSkipDuplicateCheck:o,shouldSkipMissingAttachmentFolderCreation:s}=t,a=e.vault.getConfig("attachmentFolderPath"),l=a==="."||a==="./",u=a.startsWith("./")?pr(a,"./"):null,c=J(e,r);l?a=c?c.parent?.path??"":"":u&&(a=(c?c.parent?.getParentPrefix()??"":"")+u),a=On(Kl(a));let f=On(Kl(t.attachmentFileBaseName)),d=_e(e,a,!0);!d&&u&&(d=s?It(e,a,!0):await e.vault.createFolder(a));let h=d?.getParentPrefix()??"";return o?_a(h+f,n):e.vault.getAvailablePath(h+f,n)}i(fh,"getAvailablePathForAttachments");async function Go(t,e,n="Unknown"){let r=await ln(t,e,n),o=await ln(t,Z(K(e),`${ql}.${Ft}`),n);return r!==o}i(Go,"hasOwnAttachmentFolder");function Kl(t){return t=pe(t,/(?:[\\/])+/g,"/"),t=pe(t,/^\/+|\/+$/g,""),t||"/"}i(Kl,"normalizeSlashes");var Cn=require("obsidian");var dh={};function Dt(t,e){let n=e||dh,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,o=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return Yl(t,r,o)}i(Dt,"toString");function Yl(t,e,n){if(hh(t)){if("value"in t)return t.type==="html"&&!n?"":t.value;if(e&&"alt"in t&&t.alt)return t.alt;if("children"in t)return Gl(t.children,e,n)}return Array.isArray(t)?Gl(t,e,n):""}i(Yl,"one");function Gl(t,e,n){let r=[],o=-1;for(;++o<t.length;)r[o]=Yl(t[o],e,n);return r.join("")}i(Gl,"all");function hh(t){return!!(t&&typeof t=="object")}i(hh,"node");var Jl=document.createElement("i");function un(t){let e="&"+t+";";Jl.innerHTML=e;let n=Jl.textContent;return n.charCodeAt(n.length-1)===59&&t!=="semi"||n===e?!1:n}i(un,"decodeNamedCharacterReference");function fe(t,e,n,r){let o=t.length,s=0,a;if(e<0?e=-e>o?0:o+e:e=e>o?o:e,n=n>0?n:0,r.length<1e4)a=Array.from(r),a.unshift(e,n),t.splice(...a);else for(n&&t.splice(e,n);s<r.length;)a=r.slice(s,s+1e4),a.unshift(e,0),t.splice(...a),s+=1e4,e+=1e4}i(fe,"splice");function Ae(t,e){return t.length>0?(fe(t,t.length,0,e),t):e}i(Ae,"push");var Ql={}.hasOwnProperty;function Xl(t){let e={},n=-1;for(;++n<t.length;)ph(e,t[n]);return e}i(Xl,"combineExtensions");function ph(t,e){let n;for(n in e){let o=(Ql.call(t,n)?t[n]:void 0)||(t[n]={}),s=e[n],a;if(s)for(a in s){Ql.call(o,a)||(o[a]=[]);let l=s[a];mh(o[a],Array.isArray(l)?l:l?[l]:[])}}}i(ph,"syntaxExtension");function mh(t,e){let n=-1,r=[];for(;++n<e.length;)(e[n].add==="after"?t:r).push(e[n]);fe(t,0,0,r)}i(mh,"constructs");function jr(t,e){let n=Number.parseInt(t,e);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"\uFFFD":String.fromCodePoint(n)}i(jr,"decodeNumericCharacterReference");function ct(t){return t.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}i(ct,"normalizeIdentifier");var Oe=mt(/[A-Za-z]/),ve=mt(/[\dA-Za-z]/),Zl=mt(/[#-'*+\--9=?A-Z^-~]/);function Hn(t){return t!==null&&(t<32||t===127)}i(Hn,"asciiControl");var Un=mt(/\d/),eu=mt(/[\dA-Fa-f]/),tu=mt(/[!-/:-@[-`{-~]/);function P(t){return t!==null&&t<-2}i(P,"markdownLineEnding");function X(t){return t!==null&&(t<0||t===32)}i(X,"markdownLineEndingOrSpace");function M(t){return t===-2||t===-1||t===32}i(M,"markdownSpace");var nu=mt(/\p{P}|\p{S}/u),ru=mt(/\s/);function mt(t){return e;function e(n){return n!==null&&n>-1&&t.test(String.fromCharCode(n))}}i(mt,"regexCheck");function _(t,e,n,r){let o=r?r-1:Number.POSITIVE_INFINITY,s=0;return a;function a(u){return M(u)?(t.enter(n),l(u)):e(u)}function l(u){return M(u)&&s++<o?(t.consume(u),l):(t.exit(n),e(u))}}i(_,"factorySpace");var iu={tokenize:gh};function gh(t){let e=t.attempt(this.parser.constructs.contentInitial,r,o),n;return e;function r(l){if(l===null){t.consume(l);return}return t.enter("lineEnding"),t.consume(l),t.exit("lineEnding"),_(t,e,"linePrefix")}function o(l){return t.enter("paragraph"),s(l)}function s(l){let u=t.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=u),n=u,a(l)}function a(l){if(l===null){t.exit("chunkText"),t.exit("paragraph"),t.consume(l);return}return P(l)?(t.consume(l),t.exit("chunkText"),s):(t.consume(l),a)}}i(gh,"initializeContent");var su={tokenize:wh},ou={tokenize:bh};function wh(t){let e=this,n=[],r=0,o,s,a;return l;function l(v){if(r<n.length){let S=n[r];return e.containerState=S[1],t.attempt(S[0].continuation,u,c)(v)}return c(v)}function u(v){if(r++,e.containerState._closeFlow){e.containerState._closeFlow=void 0,o&&k();let S=e.events.length,I=S,C;for(;I--;)if(e.events[I][0]==="exit"&&e.events[I][1].type==="chunkFlow"){C=e.events[I][1].end;break}b(r);let B=S;for(;B<e.events.length;)e.events[B][1].end={...C},B++;return fe(e.events,I+1,0,e.events.slice(S)),e.events.length=B,c(v)}return l(v)}function c(v){if(r===n.length){if(!o)return h(v);if(o.currentConstruct&&o.currentConstruct.concrete)return w(v);e.interrupt=!!(o.currentConstruct&&!o._gfmTableDynamicInterruptHack)}return e.containerState={},t.check(ou,f,d)(v)}function f(v){return o&&k(),b(r),h(v)}function d(v){return e.parser.lazy[e.now().line]=r!==n.length,a=e.now().offset,w(v)}function h(v){return e.containerState={},t.attempt(ou,p,w)(v)}function p(v){return r++,n.push([e.currentConstruct,e.containerState]),h(v)}function w(v){if(v===null){o&&k(),b(0),t.consume(v);return}return o=o||e.parser.flow(e.now()),t.enter("chunkFlow",{_tokenizer:o,contentType:"flow",previous:s}),x(v)}function x(v){if(v===null){y(t.exit("chunkFlow"),!0),b(0),t.consume(v);return}return P(v)?(t.consume(v),y(t.exit("chunkFlow")),r=0,e.interrupt=void 0,l):(t.consume(v),x)}function y(v,S){let I=e.sliceStream(v);if(S&&I.push(null),v.previous=s,s&&(s.next=v),s=v,o.defineSkip(v.start),o.write(I),e.parser.lazy[v.start.line]){let C=o.events.length;for(;C--;)if(o.events[C][1].start.offset<a&&(!o.events[C][1].end||o.events[C][1].end.offset>a))return;let B=e.events.length,H=B,D,V;for(;H--;)if(e.events[H][0]==="exit"&&e.events[H][1].type==="chunkFlow"){if(D){V=e.events[H][1].end;break}D=!0}for(b(r),C=B;C<e.events.length;)e.events[C][1].end={...V},C++;fe(e.events,H+1,0,e.events.slice(B)),e.events.length=C}}function b(v){let S=n.length;for(;S-- >v;){let I=n[S];e.containerState=I[1],I[0].exit.call(e,t)}n.length=v}function k(){o.write([null]),s=void 0,o=void 0,e.containerState._closeFlow=void 0}}i(wh,"initializeDocument");function bh(t,e,n){return _(t,t.attempt(this.parser.constructs.document,e,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}i(bh,"tokenizeContainer");function cn(t){if(t===null||X(t)||ru(t))return 1;if(nu(t))return 2}i(cn,"classifyCharacter");function fn(t,e,n){let r=[],o=-1;for(;++o<t.length;){let s=t[o].resolveAll;s&&!r.includes(s)&&(e=s(e,n),r.push(s))}return e}i(fn,"resolveAll");var jn={name:"attention",resolveAll:yh,tokenize:kh};function yh(t,e){let n=-1,r,o,s,a,l,u,c,f;for(;++n<t.length;)if(t[n][0]==="enter"&&t[n][1].type==="attentionSequence"&&t[n][1]._close){for(r=n;r--;)if(t[r][0]==="exit"&&t[r][1].type==="attentionSequence"&&t[r][1]._open&&e.sliceSerialize(t[r][1]).charCodeAt(0)===e.sliceSerialize(t[n][1]).charCodeAt(0)){if((t[r][1]._close||t[n][1]._open)&&(t[n][1].end.offset-t[n][1].start.offset)%3&&!((t[r][1].end.offset-t[r][1].start.offset+t[n][1].end.offset-t[n][1].start.offset)%3))continue;u=t[r][1].end.offset-t[r][1].start.offset>1&&t[n][1].end.offset-t[n][1].start.offset>1?2:1;let d={...t[r][1].end},h={...t[n][1].start};au(d,-u),au(h,u),a={type:u>1?"strongSequence":"emphasisSequence",start:d,end:{...t[r][1].end}},l={type:u>1?"strongSequence":"emphasisSequence",start:{...t[n][1].start},end:h},s={type:u>1?"strongText":"emphasisText",start:{...t[r][1].end},end:{...t[n][1].start}},o={type:u>1?"strong":"emphasis",start:{...a.start},end:{...l.end}},t[r][1].end={...a.start},t[n][1].start={...l.end},c=[],t[r][1].end.offset-t[r][1].start.offset&&(c=Ae(c,[["enter",t[r][1],e],["exit",t[r][1],e]])),c=Ae(c,[["enter",o,e],["enter",a,e],["exit",a,e],["enter",s,e]]),c=Ae(c,fn(e.parser.constructs.insideSpan.null,t.slice(r+1,n),e)),c=Ae(c,[["exit",s,e],["enter",l,e],["exit",l,e],["exit",o,e]]),t[n][1].end.offset-t[n][1].start.offset?(f=2,c=Ae(c,[["enter",t[n][1],e],["exit",t[n][1],e]])):f=0,fe(t,r-1,n-r+3,c),n=r+c.length-f-2;break}}for(n=-1;++n<t.length;)t[n][1].type==="attentionSequence"&&(t[n][1].type="data");return t}i(yh,"resolveAllAttention");function kh(t,e){let n=this.parser.constructs.attentionMarkers.null,r=this.previous,o=cn(r),s;return a;function a(u){return s=u,t.enter("attentionSequence"),l(u)}function l(u){if(u===s)return t.consume(u),l;let c=t.exit("attentionSequence"),f=cn(u),d=!f||f===2&&o||n.includes(u),h=!o||o===2&&f||n.includes(r);return c._open=!!(s===42?d:d&&(o||!h)),c._close=!!(s===42?h:h&&(f||!d)),e(u)}}i(kh,"tokenizeAttention");function au(t,e){t.column+=e,t.offset+=e,t._bufferIndex+=e}i(au,"movePoint");var Yo={name:"autolink",tokenize:Ch};function Ch(t,e,n){let r=0;return o;function o(p){return t.enter("autolink"),t.enter("autolinkMarker"),t.consume(p),t.exit("autolinkMarker"),t.enter("autolinkProtocol"),s}function s(p){return Oe(p)?(t.consume(p),a):p===64?n(p):c(p)}function a(p){return p===43||p===45||p===46||ve(p)?(r=1,l(p)):c(p)}function l(p){return p===58?(t.consume(p),r=0,u):(p===43||p===45||p===46||ve(p))&&r++<32?(t.consume(p),l):(r=0,c(p))}function u(p){return p===62?(t.exit("autolinkProtocol"),t.enter("autolinkMarker"),t.consume(p),t.exit("autolinkMarker"),t.exit("autolink"),e):p===null||p===32||p===60||Hn(p)?n(p):(t.consume(p),u)}function c(p){return p===64?(t.consume(p),f):Zl(p)?(t.consume(p),c):n(p)}function f(p){return ve(p)?d(p):n(p)}function d(p){return p===46?(t.consume(p),r=0,f):p===62?(t.exit("autolinkProtocol").type="autolinkEmail",t.enter("autolinkMarker"),t.consume(p),t.exit("autolinkMarker"),t.exit("autolink"),e):h(p)}function h(p){if((p===45||ve(p))&&r++<63){let w=p===45?h:d;return t.consume(p),w}return n(p)}}i(Ch,"tokenizeAutolink");var gt={partial:!0,tokenize:xh};function xh(t,e,n){return r;function r(s){return M(s)?_(t,o,"linePrefix")(s):o(s)}function o(s){return s===null||P(s)?e(s):n(s)}}i(xh,"tokenizeBlankLine");var Kr={continuation:{tokenize:vh},exit:Eh,name:"blockQuote",tokenize:Ah};function Ah(t,e,n){let r=this;return o;function o(a){if(a===62){let l=r.containerState;return l.open||(t.enter("blockQuote",{_container:!0}),l.open=!0),t.enter("blockQuotePrefix"),t.enter("blockQuoteMarker"),t.consume(a),t.exit("blockQuoteMarker"),s}return n(a)}function s(a){return M(a)?(t.enter("blockQuotePrefixWhitespace"),t.consume(a),t.exit("blockQuotePrefixWhitespace"),t.exit("blockQuotePrefix"),e):(t.exit("blockQuotePrefix"),e(a))}}i(Ah,"tokenizeBlockQuoteStart");function vh(t,e,n){let r=this;return o;function o(a){return M(a)?_(t,s,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a):s(a)}function s(a){return t.attempt(Kr,e,n)(a)}}i(vh,"tokenizeBlockQuoteContinuation");function Eh(t){t.exit("blockQuote")}i(Eh,"exit");var qr={name:"characterEscape",tokenize:Sh};function Sh(t,e,n){return r;function r(s){return t.enter("characterEscape"),t.enter("escapeMarker"),t.consume(s),t.exit("escapeMarker"),o}function o(s){return tu(s)?(t.enter("characterEscapeValue"),t.consume(s),t.exit("characterEscapeValue"),t.exit("characterEscape"),e):n(s)}}i(Sh,"tokenizeCharacterEscape");var Gr={name:"characterReference",tokenize:Th};function Th(t,e,n){let r=this,o=0,s,a;return l;function l(d){return t.enter("characterReference"),t.enter("characterReferenceMarker"),t.consume(d),t.exit("characterReferenceMarker"),u}function u(d){return d===35?(t.enter("characterReferenceMarkerNumeric"),t.consume(d),t.exit("characterReferenceMarkerNumeric"),c):(t.enter("characterReferenceValue"),s=31,a=ve,f(d))}function c(d){return d===88||d===120?(t.enter("characterReferenceMarkerHexadecimal"),t.consume(d),t.exit("characterReferenceMarkerHexadecimal"),t.enter("characterReferenceValue"),s=6,a=eu,f):(t.enter("characterReferenceValue"),s=7,a=Un,f(d))}function f(d){if(d===59&&o){let h=t.exit("characterReferenceValue");return a===ve&&!un(r.sliceSerialize(h))?n(d):(t.enter("characterReferenceMarker"),t.consume(d),t.exit("characterReferenceMarker"),t.exit("characterReference"),e)}return a(d)&&o++<s?(t.consume(d),f):n(d)}}i(Th,"tokenizeCharacterReference");var lu={partial:!0,tokenize:Fh},Yr={concrete:!0,name:"codeFenced",tokenize:Ph};function Ph(t,e,n){let r=this,o={partial:!0,tokenize:I},s=0,a=0,l;return u;function u(C){return c(C)}function c(C){let B=r.events[r.events.length-1];return s=B&&B[1].type==="linePrefix"?B[2].sliceSerialize(B[1],!0).length:0,l=C,t.enter("codeFenced"),t.enter("codeFencedFence"),t.enter("codeFencedFenceSequence"),f(C)}function f(C){return C===l?(a++,t.consume(C),f):a<3?n(C):(t.exit("codeFencedFenceSequence"),M(C)?_(t,d,"whitespace")(C):d(C))}function d(C){return C===null||P(C)?(t.exit("codeFencedFence"),r.interrupt?e(C):t.check(lu,x,S)(C)):(t.enter("codeFencedFenceInfo"),t.enter("chunkString",{contentType:"string"}),h(C))}function h(C){return C===null||P(C)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),d(C)):M(C)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),_(t,p,"whitespace")(C)):C===96&&C===l?n(C):(t.consume(C),h)}function p(C){return C===null||P(C)?d(C):(t.enter("codeFencedFenceMeta"),t.enter("chunkString",{contentType:"string"}),w(C))}function w(C){return C===null||P(C)?(t.exit("chunkString"),t.exit("codeFencedFenceMeta"),d(C)):C===96&&C===l?n(C):(t.consume(C),w)}function x(C){return t.attempt(o,S,y)(C)}function y(C){return t.enter("lineEnding"),t.consume(C),t.exit("lineEnding"),b}function b(C){return s>0&&M(C)?_(t,k,"linePrefix",s+1)(C):k(C)}function k(C){return C===null||P(C)?t.check(lu,x,S)(C):(t.enter("codeFlowValue"),v(C))}function v(C){return C===null||P(C)?(t.exit("codeFlowValue"),k(C)):(t.consume(C),v)}function S(C){return t.exit("codeFenced"),e(C)}function I(C,B,H){let D=0;return V;function V(R){return C.enter("lineEnding"),C.consume(R),C.exit("lineEnding"),ae}function ae(R){return C.enter("codeFencedFence"),M(R)?_(C,W,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(R):W(R)}function W(R){return R===l?(C.enter("codeFencedFenceSequence"),T(R)):H(R)}function T(R){return R===l?(D++,C.consume(R),T):D>=a?(C.exit("codeFencedFenceSequence"),M(R)?_(C,L,"whitespace")(R):L(R)):H(R)}function L(R){return R===null||P(R)?(C.exit("codeFencedFence"),B(R)):H(R)}}}i(Ph,"tokenizeCodeFenced");function Fh(t,e,n){let r=this;return o;function o(a){return a===null?n(a):(t.enter("lineEnding"),t.consume(a),t.exit("lineEnding"),s)}function s(a){return r.parser.lazy[r.now().line]?n(a):e(a)}}i(Fh,"tokenizeNonLazyContinuation");var Kn={name:"codeIndented",tokenize:Lh},Ih={partial:!0,tokenize:Rh};function Lh(t,e,n){let r=this;return o;function o(c){return t.enter("codeIndented"),_(t,s,"linePrefix",5)(c)}function s(c){let f=r.events[r.events.length-1];return f&&f[1].type==="linePrefix"&&f[2].sliceSerialize(f[1],!0).length>=4?a(c):n(c)}function a(c){return c===null?u(c):P(c)?t.attempt(Ih,a,u)(c):(t.enter("codeFlowValue"),l(c))}function l(c){return c===null||P(c)?(t.exit("codeFlowValue"),a(c)):(t.consume(c),l)}function u(c){return t.exit("codeIndented"),e(c)}}i(Lh,"tokenizeCodeIndented");function Rh(t,e,n){let r=this;return o;function o(a){return r.parser.lazy[r.now().line]?n(a):P(a)?(t.enter("lineEnding"),t.consume(a),t.exit("lineEnding"),o):_(t,s,"linePrefix",5)(a)}function s(a){let l=r.events[r.events.length-1];return l&&l[1].type==="linePrefix"&&l[2].sliceSerialize(l[1],!0).length>=4?e(a):P(a)?o(a):n(a)}}i(Rh,"tokenizeFurtherStart");var Jo={name:"codeText",previous:Dh,resolve:Oh,tokenize:Mh};function Oh(t){let e=t.length-4,n=3,r,o;if((t[n][1].type==="lineEnding"||t[n][1].type==="space")&&(t[e][1].type==="lineEnding"||t[e][1].type==="space")){for(r=n;++r<e;)if(t[r][1].type==="codeTextData"){t[n][1].type="codeTextPadding",t[e][1].type="codeTextPadding",n+=2,e-=2;break}}for(r=n-1,e++;++r<=e;)o===void 0?r!==e&&t[r][1].type!=="lineEnding"&&(o=r):(r===e||t[r][1].type==="lineEnding")&&(t[o][1].type="codeTextData",r!==o+2&&(t[o][1].end=t[r-1][1].end,t.splice(o+2,r-o-2),e-=r-o-2,r=o+2),o=void 0);return t}i(Oh,"resolveCodeText");function Dh(t){return t!==96||this.events[this.events.length-1][1].type==="characterEscape"}i(Dh,"previous");function Mh(t,e,n){let r=this,o=0,s,a;return l;function l(h){return t.enter("codeText"),t.enter("codeTextSequence"),u(h)}function u(h){return h===96?(t.consume(h),o++,u):(t.exit("codeTextSequence"),c(h))}function c(h){return h===null?n(h):h===32?(t.enter("space"),t.consume(h),t.exit("space"),c):h===96?(a=t.enter("codeTextSequence"),s=0,d(h)):P(h)?(t.enter("lineEnding"),t.consume(h),t.exit("lineEnding"),c):(t.enter("codeTextData"),f(h))}function f(h){return h===null||h===32||h===96||P(h)?(t.exit("codeTextData"),c(h)):(t.consume(h),f)}function d(h){return h===96?(t.consume(h),s++,d):s===o?(t.exit("codeTextSequence"),t.exit("codeText"),e(h)):(a.type="codeTextData",f(h))}}i(Mh,"tokenizeCodeText");var Jr=class{static{i(this,"SpliceBuffer")}constructor(e){this.left=e?[...e]:[],this.right=[]}get(e){if(e<0||e>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+e+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return e<this.left.length?this.left[e]:this.right[this.right.length-e+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(e,n){let r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(e,r):e>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-e+this.left.length).reverse():this.left.slice(e).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(e,n,r){let o=n||0;this.setCursor(Math.trunc(e));let s=this.right.splice(this.right.length-o,Number.POSITIVE_INFINITY);return r&&qn(this.left,r),s.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(e){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(e)}pushMany(e){this.setCursor(Number.POSITIVE_INFINITY),qn(this.left,e)}unshift(e){this.setCursor(0),this.right.push(e)}unshiftMany(e){this.setCursor(0),qn(this.right,e.reverse())}setCursor(e){if(!(e===this.left.length||e>this.left.length&&this.right.length===0||e<0&&this.left.length===0))if(e<this.left.length){let n=this.left.splice(e,Number.POSITIVE_INFINITY);qn(this.right,n.reverse())}else{let n=this.right.splice(this.left.length+this.right.length-e,Number.POSITIVE_INFINITY);qn(this.left,n.reverse())}}};function qn(t,e){let n=0;if(e.length<1e4)t.push(...e);else for(;n<e.length;)t.push(...e.slice(n,n+1e4)),n+=1e4}i(qn,"chunkedPush");function Qr(t){let e={},n=-1,r,o,s,a,l,u,c,f=new Jr(t);for(;++n<f.length;){for(;n in e;)n=e[n];if(r=f.get(n),n&&r[1].type==="chunkFlow"&&f.get(n-1)[1].type==="listItemPrefix"&&(u=r[1]._tokenizer.events,s=0,s<u.length&&u[s][1].type==="lineEndingBlank"&&(s+=2),s<u.length&&u[s][1].type==="content"))for(;++s<u.length&&u[s][1].type!=="content";)u[s][1].type==="chunkText"&&(u[s][1]._isInFirstContentOfListItem=!0,s++);if(r[0]==="enter")r[1].contentType&&(Object.assign(e,Nh(f,n)),n=e[n],c=!0);else if(r[1]._container){for(s=n,o=void 0;s--;)if(a=f.get(s),a[1].type==="lineEnding"||a[1].type==="lineEndingBlank")a[0]==="enter"&&(o&&(f.get(o)[1].type="lineEndingBlank"),a[1].type="lineEnding",o=s);else if(!(a[1].type==="linePrefix"||a[1].type==="listItemIndent"))break;o&&(r[1].end={...f.get(o)[1].start},l=f.slice(o,n),l.unshift(r),f.splice(o,n-o+1,l))}}return fe(t,0,Number.POSITIVE_INFINITY,f.slice(0)),!c}i(Qr,"subtokenize");function Nh(t,e){let n=t.get(e)[1],r=t.get(e)[2],o=e-1,s=[],a=n._tokenizer;a||(a=r.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(a._contentTypeTextTrailing=!0));let l=a.events,u=[],c={},f,d,h=-1,p=n,w=0,x=0,y=[x];for(;p;){for(;t.get(++o)[1]!==p;);s.push(o),p._tokenizer||(f=r.sliceStream(p),p.next||f.push(null),d&&a.defineSkip(p.start),p._isInFirstContentOfListItem&&(a._gfmTasklistFirstContentOfListItem=!0),a.write(f),p._isInFirstContentOfListItem&&(a._gfmTasklistFirstContentOfListItem=void 0)),d=p,p=p.next}for(p=n;++h<l.length;)l[h][0]==="exit"&&l[h-1][0]==="enter"&&l[h][1].type===l[h-1][1].type&&l[h][1].start.line!==l[h][1].end.line&&(x=h+1,y.push(x),p._tokenizer=void 0,p.previous=void 0,p=p.next);for(a.events=[],p?(p._tokenizer=void 0,p.previous=void 0):y.pop(),h=y.length;h--;){let b=l.slice(y[h],y[h+1]),k=s.pop();u.push([k,k+b.length-1]),t.splice(k,2,b)}for(u.reverse(),h=-1;++h<u.length;)c[w+u[h][0]]=w+u[h][1],w+=u[h][1]-u[h][0]-1;return c}i(Nh,"subcontent");var Qo={resolve:Bh,tokenize:$h},_h={partial:!0,tokenize:Vh};function Bh(t){return Qr(t),t}i(Bh,"resolveContent");function $h(t,e){let n;return r;function r(l){return t.enter("content"),n=t.enter("chunkContent",{contentType:"content"}),o(l)}function o(l){return l===null?s(l):P(l)?t.check(_h,a,s)(l):(t.consume(l),o)}function s(l){return t.exit("chunkContent"),t.exit("content"),e(l)}function a(l){return t.consume(l),t.exit("chunkContent"),n.next=t.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,o}}i($h,"tokenizeContent");function Vh(t,e,n){let r=this;return o;function o(a){return t.exit("chunkContent"),t.enter("lineEnding"),t.consume(a),t.exit("lineEnding"),_(t,s,"linePrefix")}function s(a){if(a===null||P(a))return n(a);let l=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&l&&l[1].type==="linePrefix"&&l[2].sliceSerialize(l[1],!0).length>=4?e(a):t.interrupt(r.parser.constructs.flow,n,e)(a)}}i(Vh,"tokenizeContinuation");function Xr(t,e,n,r,o,s,a,l,u){let c=u||Number.POSITIVE_INFINITY,f=0;return d;function d(b){return b===60?(t.enter(r),t.enter(o),t.enter(s),t.consume(b),t.exit(s),h):b===null||b===32||b===41||Hn(b)?n(b):(t.enter(r),t.enter(a),t.enter(l),t.enter("chunkString",{contentType:"string"}),x(b))}function h(b){return b===62?(t.enter(s),t.consume(b),t.exit(s),t.exit(o),t.exit(r),e):(t.enter(l),t.enter("chunkString",{contentType:"string"}),p(b))}function p(b){return b===62?(t.exit("chunkString"),t.exit(l),h(b)):b===null||b===60||P(b)?n(b):(t.consume(b),b===92?w:p)}function w(b){return b===60||b===62||b===92?(t.consume(b),p):p(b)}function x(b){return!f&&(b===null||b===41||X(b))?(t.exit("chunkString"),t.exit(l),t.exit(a),t.exit(r),e(b)):f<c&&b===40?(t.consume(b),f++,x):b===41?(t.consume(b),f--,x):b===null||b===32||b===40||Hn(b)?n(b):(t.consume(b),b===92?y:x)}function y(b){return b===40||b===41||b===92?(t.consume(b),x):x(b)}}i(Xr,"factoryDestination");function Zr(t,e,n,r,o,s){let a=this,l=0,u;return c;function c(p){return t.enter(r),t.enter(o),t.consume(p),t.exit(o),t.enter(s),f}function f(p){return l>999||p===null||p===91||p===93&&!u||p===94&&!l&&"_hiddenFootnoteSupport"in a.parser.constructs?n(p):p===93?(t.exit(s),t.enter(o),t.consume(p),t.exit(o),t.exit(r),e):P(p)?(t.enter("lineEnding"),t.consume(p),t.exit("lineEnding"),f):(t.enter("chunkString",{contentType:"string"}),d(p))}function d(p){return p===null||p===91||p===93||P(p)||l++>999?(t.exit("chunkString"),f(p)):(t.consume(p),u||(u=!M(p)),p===92?h:d)}function h(p){return p===91||p===92||p===93?(t.consume(p),l++,d):d(p)}}i(Zr,"factoryLabel");function ei(t,e,n,r,o,s){let a;return l;function l(h){return h===34||h===39||h===40?(t.enter(r),t.enter(o),t.consume(h),t.exit(o),a=h===40?41:h,u):n(h)}function u(h){return h===a?(t.enter(o),t.consume(h),t.exit(o),t.exit(r),e):(t.enter(s),c(h))}function c(h){return h===a?(t.exit(s),u(a)):h===null?n(h):P(h)?(t.enter("lineEnding"),t.consume(h),t.exit("lineEnding"),_(t,c,"linePrefix")):(t.enter("chunkString",{contentType:"string"}),f(h))}function f(h){return h===a||h===null||P(h)?(t.exit("chunkString"),c(h)):(t.consume(h),h===92?d:f)}function d(h){return h===a||h===92?(t.consume(h),f):f(h)}}i(ei,"factoryTitle");function Mt(t,e){let n;return r;function r(o){return P(o)?(t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),n=!0,r):M(o)?_(t,r,n?"linePrefix":"lineSuffix")(o):e(o)}}i(Mt,"factoryWhitespace");var Xo={name:"definition",tokenize:Wh},zh={partial:!0,tokenize:Hh};function Wh(t,e,n){let r=this,o;return s;function s(p){return t.enter("definition"),a(p)}function a(p){return Zr.call(r,t,l,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(p)}function l(p){return o=ct(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),p===58?(t.enter("definitionMarker"),t.consume(p),t.exit("definitionMarker"),u):n(p)}function u(p){return X(p)?Mt(t,c)(p):c(p)}function c(p){return Xr(t,f,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(p)}function f(p){return t.attempt(zh,d,d)(p)}function d(p){return M(p)?_(t,h,"whitespace")(p):h(p)}function h(p){return p===null||P(p)?(t.exit("definition"),r.parser.defined.push(o),e(p)):n(p)}}i(Wh,"tokenizeDefinition");function Hh(t,e,n){return r;function r(l){return X(l)?Mt(t,o)(l):n(l)}function o(l){return ei(t,s,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(l)}function s(l){return M(l)?_(t,a,"whitespace")(l):a(l)}function a(l){return l===null||P(l)?e(l):n(l)}}i(Hh,"tokenizeTitleBefore");var Zo={name:"hardBreakEscape",tokenize:Uh};function Uh(t,e,n){return r;function r(s){return t.enter("hardBreakEscape"),t.consume(s),o}function o(s){return P(s)?(t.exit("hardBreakEscape"),e(s)):n(s)}}i(Uh,"tokenizeHardBreakEscape");var es={name:"headingAtx",resolve:jh,tokenize:Kh};function jh(t,e){let n=t.length-2,r=3,o,s;return t[r][1].type==="whitespace"&&(r+=2),n-2>r&&t[n][1].type==="whitespace"&&(n-=2),t[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&t[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(o={type:"atxHeadingText",start:t[r][1].start,end:t[n][1].end},s={type:"chunkText",start:t[r][1].start,end:t[n][1].end,contentType:"text"},fe(t,r,n-r+1,[["enter",o,e],["enter",s,e],["exit",s,e],["exit",o,e]])),t}i(jh,"resolveHeadingAtx");function Kh(t,e,n){let r=0;return o;function o(f){return t.enter("atxHeading"),s(f)}function s(f){return t.enter("atxHeadingSequence"),a(f)}function a(f){return f===35&&r++<6?(t.consume(f),a):f===null||X(f)?(t.exit("atxHeadingSequence"),l(f)):n(f)}function l(f){return f===35?(t.enter("atxHeadingSequence"),u(f)):f===null||P(f)?(t.exit("atxHeading"),e(f)):M(f)?_(t,l,"whitespace")(f):(t.enter("atxHeadingText"),c(f))}function u(f){return f===35?(t.consume(f),u):(t.exit("atxHeadingSequence"),l(f))}function c(f){return f===null||f===35||X(f)?(t.exit("atxHeadingText"),l(f)):(t.consume(f),c)}}i(Kh,"tokenizeHeadingAtx");var uu=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],ts=["pre","script","style","textarea"];var ns={concrete:!0,name:"htmlFlow",resolveTo:Yh,tokenize:Jh},qh={partial:!0,tokenize:Xh},Gh={partial:!0,tokenize:Qh};function Yh(t){let e=t.length;for(;e--&&!(t[e][0]==="enter"&&t[e][1].type==="htmlFlow"););return e>1&&t[e-2][1].type==="linePrefix"&&(t[e][1].start=t[e-2][1].start,t[e+1][1].start=t[e-2][1].start,t.splice(e-2,2)),t}i(Yh,"resolveToHtmlFlow");function Jh(t,e,n){let r=this,o,s,a,l,u;return c;function c(g){return f(g)}function f(g){return t.enter("htmlFlow"),t.enter("htmlFlowData"),t.consume(g),d}function d(g){return g===33?(t.consume(g),h):g===47?(t.consume(g),s=!0,x):g===63?(t.consume(g),o=3,r.interrupt?e:m):Oe(g)?(t.consume(g),a=String.fromCharCode(g),y):n(g)}function h(g){return g===45?(t.consume(g),o=2,p):g===91?(t.consume(g),o=5,l=0,w):Oe(g)?(t.consume(g),o=4,r.interrupt?e:m):n(g)}function p(g){return g===45?(t.consume(g),r.interrupt?e:m):n(g)}function w(g){let he="CDATA[";return g===he.charCodeAt(l++)?(t.consume(g),l===he.length?r.interrupt?e:W:w):n(g)}function x(g){return Oe(g)?(t.consume(g),a=String.fromCharCode(g),y):n(g)}function y(g){if(g===null||g===47||g===62||X(g)){let he=g===47,vt=a.toLowerCase();return!he&&!s&&ts.includes(vt)?(o=1,r.interrupt?e(g):W(g)):uu.includes(a.toLowerCase())?(o=6,he?(t.consume(g),b):r.interrupt?e(g):W(g)):(o=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(g):s?k(g):v(g))}return g===45||ve(g)?(t.consume(g),a+=String.fromCharCode(g),y):n(g)}function b(g){return g===62?(t.consume(g),r.interrupt?e:W):n(g)}function k(g){return M(g)?(t.consume(g),k):V(g)}function v(g){return g===47?(t.consume(g),V):g===58||g===95||Oe(g)?(t.consume(g),S):M(g)?(t.consume(g),v):V(g)}function S(g){return g===45||g===46||g===58||g===95||ve(g)?(t.consume(g),S):I(g)}function I(g){return g===61?(t.consume(g),C):M(g)?(t.consume(g),I):v(g)}function C(g){return g===null||g===60||g===61||g===62||g===96?n(g):g===34||g===39?(t.consume(g),u=g,B):M(g)?(t.consume(g),C):H(g)}function B(g){return g===u?(t.consume(g),u=null,D):g===null||P(g)?n(g):(t.consume(g),B)}function H(g){return g===null||g===34||g===39||g===47||g===60||g===61||g===62||g===96||X(g)?I(g):(t.consume(g),H)}function D(g){return g===47||g===62||M(g)?v(g):n(g)}function V(g){return g===62?(t.consume(g),ae):n(g)}function ae(g){return g===null||P(g)?W(g):M(g)?(t.consume(g),ae):n(g)}function W(g){return g===45&&o===2?(t.consume(g),$):g===60&&o===1?(t.consume(g),U):g===62&&o===4?(t.consume(g),Y):g===63&&o===3?(t.consume(g),m):g===93&&o===5?(t.consume(g),be):P(g)&&(o===6||o===7)?(t.exit("htmlFlowData"),t.check(qh,ue,T)(g)):g===null||P(g)?(t.exit("htmlFlowData"),T(g)):(t.consume(g),W)}function T(g){return t.check(Gh,L,ue)(g)}function L(g){return t.enter("lineEnding"),t.consume(g),t.exit("lineEnding"),R}function R(g){return g===null||P(g)?T(g):(t.enter("htmlFlowData"),W(g))}function $(g){return g===45?(t.consume(g),m):W(g)}function U(g){return g===47?(t.consume(g),a="",le):W(g)}function le(g){if(g===62){let he=a.toLowerCase();return ts.includes(he)?(t.consume(g),Y):W(g)}return Oe(g)&&a.length<8?(t.consume(g),a+=String.fromCharCode(g),le):W(g)}function be(g){return g===93?(t.consume(g),m):W(g)}function m(g){return g===62?(t.consume(g),Y):g===45&&o===2?(t.consume(g),m):W(g)}function Y(g){return g===null||P(g)?(t.exit("htmlFlowData"),ue(g)):(t.consume(g),Y)}function ue(g){return t.exit("htmlFlow"),e(g)}}i(Jh,"tokenizeHtmlFlow");function Qh(t,e,n){let r=this;return o;function o(a){return P(a)?(t.enter("lineEnding"),t.consume(a),t.exit("lineEnding"),s):n(a)}function s(a){return r.parser.lazy[r.now().line]?n(a):e(a)}}i(Qh,"tokenizeNonLazyContinuationStart");function Xh(t,e,n){return r;function r(o){return t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),t.attempt(gt,e,n)}}i(Xh,"tokenizeBlankLineBefore");var rs={name:"htmlText",tokenize:Zh};function Zh(t,e,n){let r=this,o,s,a;return l;function l(m){return t.enter("htmlText"),t.enter("htmlTextData"),t.consume(m),u}function u(m){return m===33?(t.consume(m),c):m===47?(t.consume(m),I):m===63?(t.consume(m),v):Oe(m)?(t.consume(m),H):n(m)}function c(m){return m===45?(t.consume(m),f):m===91?(t.consume(m),s=0,w):Oe(m)?(t.consume(m),k):n(m)}function f(m){return m===45?(t.consume(m),p):n(m)}function d(m){return m===null?n(m):m===45?(t.consume(m),h):P(m)?(a=d,U(m)):(t.consume(m),d)}function h(m){return m===45?(t.consume(m),p):d(m)}function p(m){return m===62?$(m):m===45?h(m):d(m)}function w(m){let Y="CDATA[";return m===Y.charCodeAt(s++)?(t.consume(m),s===Y.length?x:w):n(m)}function x(m){return m===null?n(m):m===93?(t.consume(m),y):P(m)?(a=x,U(m)):(t.consume(m),x)}function y(m){return m===93?(t.consume(m),b):x(m)}function b(m){return m===62?$(m):m===93?(t.consume(m),b):x(m)}function k(m){return m===null||m===62?$(m):P(m)?(a=k,U(m)):(t.consume(m),k)}function v(m){return m===null?n(m):m===63?(t.consume(m),S):P(m)?(a=v,U(m)):(t.consume(m),v)}function S(m){return m===62?$(m):v(m)}function I(m){return Oe(m)?(t.consume(m),C):n(m)}function C(m){return m===45||ve(m)?(t.consume(m),C):B(m)}function B(m){return P(m)?(a=B,U(m)):M(m)?(t.consume(m),B):$(m)}function H(m){return m===45||ve(m)?(t.consume(m),H):m===47||m===62||X(m)?D(m):n(m)}function D(m){return m===47?(t.consume(m),$):m===58||m===95||Oe(m)?(t.consume(m),V):P(m)?(a=D,U(m)):M(m)?(t.consume(m),D):$(m)}function V(m){return m===45||m===46||m===58||m===95||ve(m)?(t.consume(m),V):ae(m)}function ae(m){return m===61?(t.consume(m),W):P(m)?(a=ae,U(m)):M(m)?(t.consume(m),ae):D(m)}function W(m){return m===null||m===60||m===61||m===62||m===96?n(m):m===34||m===39?(t.consume(m),o=m,T):P(m)?(a=W,U(m)):M(m)?(t.consume(m),W):(t.consume(m),L)}function T(m){return m===o?(t.consume(m),o=void 0,R):m===null?n(m):P(m)?(a=T,U(m)):(t.consume(m),T)}function L(m){return m===null||m===34||m===39||m===60||m===61||m===96?n(m):m===47||m===62||X(m)?D(m):(t.consume(m),L)}function R(m){return m===47||m===62||X(m)?D(m):n(m)}function $(m){return m===62?(t.consume(m),t.exit("htmlTextData"),t.exit("htmlText"),e):n(m)}function U(m){return t.exit("htmlTextData"),t.enter("lineEnding"),t.consume(m),t.exit("lineEnding"),le}function le(m){return M(m)?_(t,be,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(m):be(m)}function be(m){return t.enter("htmlTextData"),a(m)}}i(Zh,"tokenizeHtmlText");var Nt={name:"labelEnd",resolveAll:rp,resolveTo:ip,tokenize:op},ep={tokenize:sp},tp={tokenize:ap},np={tokenize:lp};function rp(t){let e=-1,n=[];for(;++e<t.length;){let r=t[e][1];if(n.push(t[e]),r.type==="labelImage"||r.type==="labelLink"||r.type==="labelEnd"){let o=r.type==="labelImage"?4:2;r.type="data",e+=o}}return t.length!==n.length&&fe(t,0,t.length,n),t}i(rp,"resolveAllLabelEnd");function ip(t,e){let n=t.length,r=0,o,s,a,l;for(;n--;)if(o=t[n][1],s){if(o.type==="link"||o.type==="labelLink"&&o._inactive)break;t[n][0]==="enter"&&o.type==="labelLink"&&(o._inactive=!0)}else if(a){if(t[n][0]==="enter"&&(o.type==="labelImage"||o.type==="labelLink")&&!o._balanced&&(s=n,o.type!=="labelLink")){r=2;break}}else o.type==="labelEnd"&&(a=n);let u={type:t[s][1].type==="labelLink"?"link":"image",start:{...t[s][1].start},end:{...t[t.length-1][1].end}},c={type:"label",start:{...t[s][1].start},end:{...t[a][1].end}},f={type:"labelText",start:{...t[s+r+2][1].end},end:{...t[a-2][1].start}};return l=[["enter",u,e],["enter",c,e]],l=Ae(l,t.slice(s+1,s+r+3)),l=Ae(l,[["enter",f,e]]),l=Ae(l,fn(e.parser.constructs.insideSpan.null,t.slice(s+r+4,a-3),e)),l=Ae(l,[["exit",f,e],t[a-2],t[a-1],["exit",c,e]]),l=Ae(l,t.slice(a+1)),l=Ae(l,[["exit",u,e]]),fe(t,s,t.length,l),t}i(ip,"resolveToLabelEnd");function op(t,e,n){let r=this,o=r.events.length,s,a;for(;o--;)if((r.events[o][1].type==="labelImage"||r.events[o][1].type==="labelLink")&&!r.events[o][1]._balanced){s=r.events[o][1];break}return l;function l(h){return s?s._inactive?d(h):(a=r.parser.defined.includes(ct(r.sliceSerialize({start:s.end,end:r.now()}))),t.enter("labelEnd"),t.enter("labelMarker"),t.consume(h),t.exit("labelMarker"),t.exit("labelEnd"),u):n(h)}function u(h){return h===40?t.attempt(ep,f,a?f:d)(h):h===91?t.attempt(tp,f,a?c:d)(h):a?f(h):d(h)}function c(h){return t.attempt(np,f,d)(h)}function f(h){return e(h)}function d(h){return s._balanced=!0,n(h)}}i(op,"tokenizeLabelEnd");function sp(t,e,n){return r;function r(d){return t.enter("resource"),t.enter("resourceMarker"),t.consume(d),t.exit("resourceMarker"),o}function o(d){return X(d)?Mt(t,s)(d):s(d)}function s(d){return d===41?f(d):Xr(t,a,l,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(d)}function a(d){return X(d)?Mt(t,u)(d):f(d)}function l(d){return n(d)}function u(d){return d===34||d===39||d===40?ei(t,c,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(d):f(d)}function c(d){return X(d)?Mt(t,f)(d):f(d)}function f(d){return d===41?(t.enter("resourceMarker"),t.consume(d),t.exit("resourceMarker"),t.exit("resource"),e):n(d)}}i(sp,"tokenizeResource");function ap(t,e,n){let r=this;return o;function o(l){return Zr.call(r,t,s,a,"reference","referenceMarker","referenceString")(l)}function s(l){return r.parser.defined.includes(ct(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?e(l):n(l)}function a(l){return n(l)}}i(ap,"tokenizeReferenceFull");function lp(t,e,n){return r;function r(s){return t.enter("reference"),t.enter("referenceMarker"),t.consume(s),t.exit("referenceMarker"),o}function o(s){return s===93?(t.enter("referenceMarker"),t.consume(s),t.exit("referenceMarker"),t.exit("reference"),e):n(s)}}i(lp,"tokenizeReferenceCollapsed");var is={name:"labelStartImage",resolveAll:Nt.resolveAll,tokenize:up};function up(t,e,n){let r=this;return o;function o(l){return t.enter("labelImage"),t.enter("labelImageMarker"),t.consume(l),t.exit("labelImageMarker"),s}function s(l){return l===91?(t.enter("labelMarker"),t.consume(l),t.exit("labelMarker"),t.exit("labelImage"),a):n(l)}function a(l){return l===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(l):e(l)}}i(up,"tokenizeLabelStartImage");var os={name:"labelStartLink",resolveAll:Nt.resolveAll,tokenize:cp};function cp(t,e,n){let r=this;return o;function o(a){return t.enter("labelLink"),t.enter("labelMarker"),t.consume(a),t.exit("labelMarker"),t.exit("labelLink"),s}function s(a){return a===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(a):e(a)}}i(cp,"tokenizeLabelStartLink");var Gn={name:"lineEnding",tokenize:fp};function fp(t,e){return n;function n(r){return t.enter("lineEnding"),t.consume(r),t.exit("lineEnding"),_(t,e,"linePrefix")}}i(fp,"tokenizeLineEnding");var _t={name:"thematicBreak",tokenize:dp};function dp(t,e,n){let r=0,o;return s;function s(c){return t.enter("thematicBreak"),a(c)}function a(c){return o=c,l(c)}function l(c){return c===o?(t.enter("thematicBreakSequence"),u(c)):r>=3&&(c===null||P(c))?(t.exit("thematicBreak"),e(c)):n(c)}function u(c){return c===o?(t.consume(c),r++,u):(t.exit("thematicBreakSequence"),M(c)?_(t,l,"whitespace")(c):l(c))}}i(dp,"tokenizeThematicBreak");var ge={continuation:{tokenize:gp},exit:bp,name:"list",tokenize:mp},hp={partial:!0,tokenize:yp},pp={partial:!0,tokenize:wp};function mp(t,e,n){let r=this,o=r.events[r.events.length-1],s=o&&o[1].type==="linePrefix"?o[2].sliceSerialize(o[1],!0).length:0,a=0;return l;function l(p){let w=r.containerState.type||(p===42||p===43||p===45?"listUnordered":"listOrdered");if(w==="listUnordered"?!r.containerState.marker||p===r.containerState.marker:Un(p)){if(r.containerState.type||(r.containerState.type=w,t.enter(w,{_container:!0})),w==="listUnordered")return t.enter("listItemPrefix"),p===42||p===45?t.check(_t,n,c)(p):c(p);if(!r.interrupt||p===49)return t.enter("listItemPrefix"),t.enter("listItemValue"),u(p)}return n(p)}function u(p){return Un(p)&&++a<10?(t.consume(p),u):(!r.interrupt||a<2)&&(r.containerState.marker?p===r.containerState.marker:p===41||p===46)?(t.exit("listItemValue"),c(p)):n(p)}function c(p){return t.enter("listItemMarker"),t.consume(p),t.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||p,t.check(gt,r.interrupt?n:f,t.attempt(hp,h,d))}function f(p){return r.containerState.initialBlankLine=!0,s++,h(p)}function d(p){return M(p)?(t.enter("listItemPrefixWhitespace"),t.consume(p),t.exit("listItemPrefixWhitespace"),h):n(p)}function h(p){return r.containerState.size=s+r.sliceSerialize(t.exit("listItemPrefix"),!0).length,e(p)}}i(mp,"tokenizeListStart");function gp(t,e,n){let r=this;return r.containerState._closeFlow=void 0,t.check(gt,o,s);function o(l){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,_(t,e,"listItemIndent",r.containerState.size+1)(l)}i(o,"onBlank");function s(l){return r.containerState.furtherBlankLines||!M(l)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,a(l)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,t.attempt(pp,e,a)(l))}i(s,"notBlank");function a(l){return r.containerState._closeFlow=!0,r.interrupt=void 0,_(t,t.attempt(ge,e,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(l)}i(a,"notInCurrentItem")}i(gp,"tokenizeListContinuation");function wp(t,e,n){let r=this;return _(t,o,"listItemIndent",r.containerState.size+1);function o(s){let a=r.events[r.events.length-1];return a&&a[1].type==="listItemIndent"&&a[2].sliceSerialize(a[1],!0).length===r.containerState.size?e(s):n(s)}}i(wp,"tokenizeIndent");function bp(t){t.exit(this.containerState.type)}i(bp,"tokenizeListEnd");function yp(t,e,n){let r=this;return _(t,o,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function o(s){let a=r.events[r.events.length-1];return!M(s)&&a&&a[1].type==="listItemPrefixWhitespace"?e(s):n(s)}}i(yp,"tokenizeListItemPrefixWhitespace");var ti={name:"setextUnderline",resolveTo:kp,tokenize:Cp};function kp(t,e){let n=t.length,r,o,s;for(;n--;)if(t[n][0]==="enter"){if(t[n][1].type==="content"){r=n;break}t[n][1].type==="paragraph"&&(o=n)}else t[n][1].type==="content"&&t.splice(n,1),!s&&t[n][1].type==="definition"&&(s=n);let a={type:"setextHeading",start:{...t[r][1].start},end:{...t[t.length-1][1].end}};return t[o][1].type="setextHeadingText",s?(t.splice(o,0,["enter",a,e]),t.splice(s+1,0,["exit",t[r][1],e]),t[r][1].end={...t[s][1].end}):t[r][1]=a,t.push(["exit",a,e]),t}i(kp,"resolveToSetextUnderline");function Cp(t,e,n){let r=this,o;return s;function s(c){let f=r.events.length,d;for(;f--;)if(r.events[f][1].type!=="lineEnding"&&r.events[f][1].type!=="linePrefix"&&r.events[f][1].type!=="content"){d=r.events[f][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||d)?(t.enter("setextHeadingLine"),o=c,a(c)):n(c)}function a(c){return t.enter("setextHeadingLineSequence"),l(c)}function l(c){return c===o?(t.consume(c),l):(t.exit("setextHeadingLineSequence"),M(c)?_(t,u,"lineSuffix")(c):u(c))}function u(c){return c===null||P(c)?(t.exit("setextHeadingLine"),e(c)):n(c)}}i(Cp,"tokenizeSetextUnderline");var cu={tokenize:xp};function xp(t){let e=this,n=t.attempt(gt,r,t.attempt(this.parser.constructs.flowInitial,o,_(t,t.attempt(this.parser.constructs.flow,o,t.attempt(Qo,o)),"linePrefix")));return n;function r(s){if(s===null){t.consume(s);return}return t.enter("lineEndingBlank"),t.consume(s),t.exit("lineEndingBlank"),e.currentConstruct=void 0,n}function o(s){if(s===null){t.consume(s);return}return t.enter("lineEnding"),t.consume(s),t.exit("lineEnding"),e.currentConstruct=void 0,n}}i(xp,"initializeFlow");var fu={resolveAll:mu()},du=pu("string"),hu=pu("text");function pu(t){return{resolveAll:mu(t==="text"?Ap:void 0),tokenize:e};function e(n){let r=this,o=this.parser.constructs[t],s=n.attempt(o,a,l);return a;function a(f){return c(f)?s(f):l(f)}function l(f){if(f===null){n.consume(f);return}return n.enter("data"),n.consume(f),u}function u(f){return c(f)?(n.exit("data"),s(f)):(n.consume(f),u)}function c(f){if(f===null)return!0;let d=o[f],h=-1;if(d)for(;++h<d.length;){let p=d[h];if(!p.previous||p.previous.call(r,r.previous))return!0}return!1}}}i(pu,"initializeFactory");function mu(t){return e;function e(n,r){let o=-1,s;for(;++o<=n.length;)s===void 0?n[o]&&n[o][1].type==="data"&&(s=o,o++):(!n[o]||n[o][1].type!=="data")&&(o!==s+2&&(n[s][1].end=n[o-1][1].end,n.splice(s+2,o-s-2),o=s+2),s=void 0);return t?t(n,r):n}}i(mu,"createResolver");function Ap(t,e){let n=0;for(;++n<=t.length;)if((n===t.length||t[n][1].type==="lineEnding")&&t[n-1][1].type==="data"){let r=t[n-1][1],o=e.sliceStream(r),s=o.length,a=-1,l=0,u;for(;s--;){let c=o[s];if(typeof c=="string"){for(a=c.length;c.charCodeAt(a-1)===32;)l++,a--;if(a)break;a=-1}else if(c===-2)u=!0,l++;else if(c!==-1){s++;break}}if(e._contentTypeTextTrailing&&n===t.length&&(l=0),l){let c={type:n===t.length||u||l<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:s?a:r.start._bufferIndex+a,_index:r.start._index+s,line:r.end.line,column:r.end.column-l,offset:r.end.offset-l},end:{...r.end}};r.end={...c.start},r.start.offset===r.end.offset?Object.assign(r,c):(t.splice(n,0,["enter",c,e],["exit",c,e]),n+=2)}n++}return t}i(Ap,"resolveAllLineSuffixes");var ss={};ba(ss,{attentionMarkers:()=>Lp,contentInitial:()=>Ep,disable:()=>Rp,document:()=>vp,flow:()=>Tp,flowInitial:()=>Sp,insideSpan:()=>Ip,string:()=>Pp,text:()=>Fp});var vp={42:ge,43:ge,45:ge,48:ge,49:ge,50:ge,51:ge,52:ge,53:ge,54:ge,55:ge,56:ge,57:ge,62:Kr},Ep={91:Xo},Sp={[-2]:Kn,[-1]:Kn,32:Kn},Tp={35:es,42:_t,45:[ti,_t],60:ns,61:ti,95:_t,96:Yr,126:Yr},Pp={38:Gr,92:qr},Fp={[-5]:Gn,[-4]:Gn,[-3]:Gn,33:is,38:Gr,42:jn,60:[Yo,rs],91:os,92:[Zo,qr],93:Nt,95:jn,96:Jo},Ip={null:[jn,fu]},Lp={null:[42,95]},Rp={null:[]};function gu(t,e,n){let r={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0},o={},s=[],a=[],l=[],u=!0,c={attempt:D(B),check:D(H),consume:S,enter:I,exit:C,interrupt:D(H,{interrupt:!0})},f={code:null,containerState:{},defineSkip:b,events:[],now:y,parser:t,previous:null,sliceSerialize:w,sliceStream:x,write:p},d=e.tokenize.call(f,c),h;return e.resolveAll&&s.push(e),f;function p(T){return a=Ae(a,T),k(),a[a.length-1]!==null?[]:(V(e,0),f.events=fn(s,f.events,f),f.events)}i(p,"write");function w(T,L){return Dp(x(T),L)}i(w,"sliceSerialize");function x(T){return Op(a,T)}i(x,"sliceStream");function y(){let{_bufferIndex:T,_index:L,line:R,column:$,offset:U}=r;return{_bufferIndex:T,_index:L,line:R,column:$,offset:U}}i(y,"now");function b(T){o[T.line]=T.column,W()}i(b,"defineSkip");function k(){let T;for(;r._index<a.length;){let L=a[r._index];if(typeof L=="string")for(T=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===T&&r._bufferIndex<L.length;)v(L.charCodeAt(r._bufferIndex));else v(L)}}i(k,"main");function v(T){u=void 0,h=T,d=d(T)}i(v,"go");function S(T){P(T)?(r.line++,r.column=1,r.offset+=T===-3?2:1,W()):T!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===a[r._index].length&&(r._bufferIndex=-1,r._index++)),f.previous=T,u=!0}i(S,"consume");function I(T,L){let R=L||{};return R.type=T,R.start=y(),f.events.push(["enter",R,f]),l.push(R),R}i(I,"enter");function C(T){let L=l.pop();return L.end=y(),f.events.push(["exit",L,f]),L}i(C,"exit");function B(T,L){V(T,L.from)}i(B,"onsuccessfulconstruct");function H(T,L){L.restore()}i(H,"onsuccessfulcheck");function D(T,L){return R;function R($,U,le){let be,m,Y,ue;return Array.isArray($)?he($):"tokenize"in $?he([$]):g($);function g(ce){return Sn;function Sn(at){let Et=at!==null&&ce[at],jt=at!==null&&ce.null,wo=[...Array.isArray(Et)?Et:Et?[Et]:[],...Array.isArray(jt)?jt:jt?[jt]:[]];return he(wo)(at)}}function he(ce){return be=ce,m=0,ce.length===0?le:vt(ce[m])}function vt(ce){return Sn;function Sn(at){return ue=ae(),Y=ce,ce.partial||(f.currentConstruct=ce),ce.name&&f.parser.constructs.disable.null.includes(ce.name)?sr(at):ce.tokenize.call(L?Object.assign(Object.create(f),L):f,c,go,sr)(at)}}function go(ce){return u=!0,T(Y,ue),U}function sr(ce){return u=!0,ue.restore(),++m<be.length?vt(be[m]):le}}}i(D,"constructFactory");function V(T,L){T.resolveAll&&!s.includes(T)&&s.push(T),T.resolve&&fe(f.events,L,f.events.length-L,T.resolve(f.events.slice(L),f)),T.resolveTo&&(f.events=T.resolveTo(f.events,f))}i(V,"addResult");function ae(){let T=y(),L=f.previous,R=f.currentConstruct,$=f.events.length,U=Array.from(l);return{from:$,restore:le};function le(){r=T,f.previous=L,f.currentConstruct=R,f.events.length=$,l=U,W()}}i(ae,"store");function W(){r.line in o&&r.column<2&&(r.column=o[r.line],r.offset+=o[r.line]-1)}i(W,"accountForPotentialSkip")}i(gu,"createTokenizer");function Op(t,e){let n=e.start._index,r=e.start._bufferIndex,o=e.end._index,s=e.end._bufferIndex,a;if(n===o)a=[t[n].slice(r,s)];else{if(a=t.slice(n,o),r>-1){let l=a[0];typeof l=="string"?a[0]=l.slice(r):a.shift()}s>0&&a.push(t[o].slice(0,s))}return a}i(Op,"sliceChunks");function Dp(t,e){let n=-1,r=[],o;for(;++n<t.length;){let s=t[n],a;if(typeof s=="string")a=s;else switch(s){case-5:{a="\r";break}case-4:{a=`
`;break}case-3:{a=`\r
`;break}case-2:{a=e?" ":"	";break}case-1:{if(!e&&o)continue;a=" ";break}default:a=String.fromCharCode(s)}o=s===-2,r.push(a)}return r.join("")}i(Dp,"serializeChunks");function as(t){let r={constructs:Xl([ss,...(t||{}).extensions||[]]),content:o(iu),defined:[],document:o(su),flow:o(cu),lazy:{},string:o(du),text:o(hu)};return r;function o(s){return a;function a(l){return gu(r,s,l)}}}i(as,"parse");function ls(t){for(;!Qr(t););return t}i(ls,"postprocess");var wu=/[\0\t\n\r]/g;function us(){let t=1,e="",n=!0,r;return o;function o(s,a,l){let u=[],c,f,d,h,p;for(s=e+(typeof s=="string"?s.toString():new TextDecoder(a||void 0).decode(s)),d=0,e="",n&&(s.charCodeAt(0)===65279&&d++,n=void 0);d<s.length;){if(wu.lastIndex=d,c=wu.exec(s),h=c&&c.index!==void 0?c.index:s.length,p=s.charCodeAt(h),!c){e=s.slice(d);break}if(p===10&&d===h&&r)u.push(-3),r=void 0;else switch(r&&(u.push(-5),r=void 0),d<h&&(u.push(s.slice(d,h)),t+=h-d),p){case 0:{u.push(65533),t++;break}case 9:{for(f=Math.ceil(t/4)*4,u.push(-2);t++<f;)u.push(-1);break}case 10:{u.push(-4),t=1;break}default:r=!0,t=1}d=h+1}return l&&(r&&u.push(-5),e&&u.push(e),u.push(null)),u}}i(us,"preprocess");var Mp=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function ni(t){return t.replace(Mp,Np)}i(ni,"decodeString");function Np(t,e,n){if(e)return e;if(n.charCodeAt(0)===35){let o=n.charCodeAt(1),s=o===120||o===88;return jr(n.slice(s?2:1),s?16:10)}return un(n)||t}i(Np,"decode");function wt(t){return!t||typeof t!="object"?"":"position"in t||"type"in t?bu(t.position):"start"in t||"end"in t?bu(t):"line"in t||"column"in t?cs(t):""}i(wt,"stringifyPosition");function cs(t){return yu(t&&t.line)+":"+yu(t&&t.column)}i(cs,"point");function bu(t){return cs(t&&t.start)+"-"+cs(t&&t.end)}i(bu,"position");function yu(t){return t&&typeof t=="number"?t:1}i(yu,"index");var Cu={}.hasOwnProperty;function fs(t,e,n){return typeof e!="string"&&(n=e,e=void 0),_p(n)(ls(as(n).document().write(us()(t,e,!0))))}i(fs,"fromMarkdown");function _p(t){let e={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:s(ga),autolinkProtocol:D,autolinkEmail:D,atxHeading:s(ha),blockQuote:s(at),characterEscape:D,characterReference:D,codeFenced:s(Et),codeFencedFenceInfo:a,codeFencedFenceMeta:a,codeIndented:s(Et,a),codeText:s(jt,a),codeTextData:D,data:D,codeFlowValue:D,definition:s(wo),definitionDestinationString:a,definitionLabelString:a,definitionTitleString:a,emphasis:s(Sf),hardBreakEscape:s(pa),hardBreakTrailing:s(pa),htmlFlow:s(ma,a),htmlFlowData:D,htmlText:s(ma,a),htmlTextData:D,image:s(Tf),label:a,link:s(ga),listItem:s(Pf),listItemValue:h,listOrdered:s(wa,d),listUnordered:s(wa),paragraph:s(Ff),reference:g,referenceString:a,resourceDestinationString:a,resourceTitleString:a,setextHeading:s(ha),strong:s(If),thematicBreak:s(Rf)},exit:{atxHeading:u(),atxHeadingSequence:I,autolink:u(),autolinkEmail:Sn,autolinkProtocol:ce,blockQuote:u(),characterEscapeValue:V,characterReferenceMarkerHexadecimal:vt,characterReferenceMarkerNumeric:vt,characterReferenceValue:go,characterReference:sr,codeFenced:u(y),codeFencedFence:x,codeFencedFenceInfo:p,codeFencedFenceMeta:w,codeFlowValue:V,codeIndented:u(b),codeText:u(R),codeTextData:V,data:V,definition:u(),definitionDestinationString:S,definitionLabelString:k,definitionTitleString:v,emphasis:u(),hardBreakEscape:u(W),hardBreakTrailing:u(W),htmlFlow:u(T),htmlFlowData:V,htmlText:u(L),htmlTextData:V,image:u(U),label:be,labelText:le,lineEnding:ae,link:u($),listItem:u(),listOrdered:u(),listUnordered:u(),paragraph:u(),referenceString:he,resourceDestinationString:m,resourceTitleString:Y,resource:ue,setextHeading:u(H),setextHeadingLineSequence:B,setextHeadingText:C,strong:u(),thematicBreak:u()}};xu(e,(t||{}).mdastExtensions||[]);let n={};return r;function r(A){let E={type:"root",children:[]},N={stack:[E],tokenStack:[],config:e,enter:l,exit:c,buffer:a,resume:f,data:n},z=[],G=-1;for(;++G<A.length;)if(A[G][1].type==="listOrdered"||A[G][1].type==="listUnordered")if(A[G][0]==="enter")z.push(G);else{let je=z.pop();G=o(A,je,G)}for(G=-1;++G<A.length;){let je=e[A[G][0]];Cu.call(je,A[G][1].type)&&je[A[G][1].type].call(Object.assign({sliceSerialize:A[G][2].sliceSerialize},N),A[G][1])}if(N.tokenStack.length>0){let je=N.tokenStack[N.tokenStack.length-1];(je[1]||ku).call(N,void 0,je[0])}for(E.position={start:bt(A.length>0?A[0][1].start:{line:1,column:1,offset:0}),end:bt(A.length>0?A[A.length-2][1].end:{line:1,column:1,offset:0})},G=-1;++G<e.transforms.length;)E=e.transforms[G](E)||E;return E}function o(A,E,N){let z=E-1,G=-1,je=!1,St,lt,Tn,Pn;for(;++z<=N;){let Le=A[z];switch(Le[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{Le[0]==="enter"?G++:G--,Pn=void 0;break}case"lineEndingBlank":{Le[0]==="enter"&&(St&&!Pn&&!G&&!Tn&&(Tn=z),Pn=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:Pn=void 0}if(!G&&Le[0]==="enter"&&Le[1].type==="listItemPrefix"||G===-1&&Le[0]==="exit"&&(Le[1].type==="listUnordered"||Le[1].type==="listOrdered")){if(St){let Kt=z;for(lt=void 0;Kt--;){let ut=A[Kt];if(ut[1].type==="lineEnding"||ut[1].type==="lineEndingBlank"){if(ut[0]==="exit")continue;lt&&(A[lt][1].type="lineEndingBlank",je=!0),ut[1].type="lineEnding",lt=Kt}else if(!(ut[1].type==="linePrefix"||ut[1].type==="blockQuotePrefix"||ut[1].type==="blockQuotePrefixWhitespace"||ut[1].type==="blockQuoteMarker"||ut[1].type==="listItemIndent"))break}Tn&&(!lt||Tn<lt)&&(St._spread=!0),St.end=Object.assign({},lt?A[lt][1].start:Le[1].end),A.splice(lt||z,0,["exit",St,Le[2]]),z++,N++}if(Le[1].type==="listItemPrefix"){let Kt={type:"listItem",_spread:!1,start:Object.assign({},Le[1].start),end:void 0};St=Kt,A.splice(z,0,["enter",Kt,Le[2]]),z++,N++,Tn=void 0,Pn=!0}}}return A[E][1]._spread=je,N}function s(A,E){return N;function N(z){l.call(this,A(z),z),E&&E.call(this,z)}}function a(){this.stack.push({type:"fragment",children:[]})}function l(A,E,N){this.stack[this.stack.length-1].children.push(A),this.stack.push(A),this.tokenStack.push([E,N||void 0]),A.position={start:bt(E.start),end:void 0}}function u(A){return E;function E(N){A&&A.call(this,N),c.call(this,N)}}function c(A,E){let N=this.stack.pop(),z=this.tokenStack.pop();if(z)z[0].type!==A.type&&(E?E.call(this,A,z[0]):(z[1]||ku).call(this,A,z[0]));else throw new Error("Cannot close `"+A.type+"` ("+wt({start:A.start,end:A.end})+"): it\u2019s not open");N.position.end=bt(A.end)}function f(){return Dt(this.stack.pop())}function d(){this.data.expectingFirstListItemValue=!0}function h(A){if(this.data.expectingFirstListItemValue){let E=this.stack[this.stack.length-2];E.start=Number.parseInt(this.sliceSerialize(A),10),this.data.expectingFirstListItemValue=void 0}}function p(){let A=this.resume(),E=this.stack[this.stack.length-1];E.lang=A}function w(){let A=this.resume(),E=this.stack[this.stack.length-1];E.meta=A}function x(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function y(){let A=this.resume(),E=this.stack[this.stack.length-1];E.value=A.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function b(){let A=this.resume(),E=this.stack[this.stack.length-1];E.value=A.replace(/(\r?\n|\r)$/g,"")}function k(A){let E=this.resume(),N=this.stack[this.stack.length-1];N.label=E,N.identifier=ct(this.sliceSerialize(A)).toLowerCase()}function v(){let A=this.resume(),E=this.stack[this.stack.length-1];E.title=A}function S(){let A=this.resume(),E=this.stack[this.stack.length-1];E.url=A}function I(A){let E=this.stack[this.stack.length-1];if(!E.depth){let N=this.sliceSerialize(A).length;E.depth=N}}function C(){this.data.setextHeadingSlurpLineEnding=!0}function B(A){let E=this.stack[this.stack.length-1];E.depth=this.sliceSerialize(A).codePointAt(0)===61?1:2}function H(){this.data.setextHeadingSlurpLineEnding=void 0}function D(A){let N=this.stack[this.stack.length-1].children,z=N[N.length-1];(!z||z.type!=="text")&&(z=Lf(),z.position={start:bt(A.start),end:void 0},N.push(z)),this.stack.push(z)}function V(A){let E=this.stack.pop();E.value+=this.sliceSerialize(A),E.position.end=bt(A.end)}function ae(A){let E=this.stack[this.stack.length-1];if(this.data.atHardBreak){let N=E.children[E.children.length-1];N.position.end=bt(A.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&e.canContainEols.includes(E.type)&&(D.call(this,A),V.call(this,A))}function W(){this.data.atHardBreak=!0}function T(){let A=this.resume(),E=this.stack[this.stack.length-1];E.value=A}function L(){let A=this.resume(),E=this.stack[this.stack.length-1];E.value=A}function R(){let A=this.resume(),E=this.stack[this.stack.length-1];E.value=A}function $(){let A=this.stack[this.stack.length-1];if(this.data.inReference){let E=this.data.referenceType||"shortcut";A.type+="Reference",A.referenceType=E,delete A.url,delete A.title}else delete A.identifier,delete A.label;this.data.referenceType=void 0}function U(){let A=this.stack[this.stack.length-1];if(this.data.inReference){let E=this.data.referenceType||"shortcut";A.type+="Reference",A.referenceType=E,delete A.url,delete A.title}else delete A.identifier,delete A.label;this.data.referenceType=void 0}function le(A){let E=this.sliceSerialize(A),N=this.stack[this.stack.length-2];N.label=ni(E),N.identifier=ct(E).toLowerCase()}function be(){let A=this.stack[this.stack.length-1],E=this.resume(),N=this.stack[this.stack.length-1];if(this.data.inReference=!0,N.type==="link"){let z=A.children;N.children=z}else N.alt=E}function m(){let A=this.resume(),E=this.stack[this.stack.length-1];E.url=A}function Y(){let A=this.resume(),E=this.stack[this.stack.length-1];E.title=A}function ue(){this.data.inReference=void 0}function g(){this.data.referenceType="collapsed"}function he(A){let E=this.resume(),N=this.stack[this.stack.length-1];N.label=E,N.identifier=ct(this.sliceSerialize(A)).toLowerCase(),this.data.referenceType="full"}function vt(A){this.data.characterReferenceType=A.type}function go(A){let E=this.sliceSerialize(A),N=this.data.characterReferenceType,z;N?(z=jr(E,N==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):z=un(E);let G=this.stack[this.stack.length-1];G.value+=z}function sr(A){let E=this.stack.pop();E.position.end=bt(A.end)}function ce(A){V.call(this,A);let E=this.stack[this.stack.length-1];E.url=this.sliceSerialize(A)}function Sn(A){V.call(this,A);let E=this.stack[this.stack.length-1];E.url="mailto:"+this.sliceSerialize(A)}function at(){return{type:"blockquote",children:[]}}function Et(){return{type:"code",lang:null,meta:null,value:""}}function jt(){return{type:"inlineCode",value:""}}function wo(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function Sf(){return{type:"emphasis",children:[]}}function ha(){return{type:"heading",depth:0,children:[]}}function pa(){return{type:"break"}}function ma(){return{type:"html",value:""}}function Tf(){return{type:"image",title:null,url:"",alt:null}}function ga(){return{type:"link",title:null,url:"",children:[]}}function wa(A){return{type:"list",ordered:A.type==="listOrdered",start:null,spread:A._spread,children:[]}}function Pf(A){return{type:"listItem",spread:A._spread,checked:null,children:[]}}function Ff(){return{type:"paragraph",children:[]}}function If(){return{type:"strong",children:[]}}function Lf(){return{type:"text",value:""}}function Rf(){return{type:"thematicBreak"}}}i(_p,"compiler");function bt(t){return{line:t.line,column:t.column,offset:t.offset}}i(bt,"point");function xu(t,e){let n=-1;for(;++n<e.length;){let r=e[n];Array.isArray(r)?xu(t,r):Bp(t,r)}}i(xu,"configure");function Bp(t,e){let n;for(n in e)if(Cu.call(e,n))switch(n){case"canContainEols":{let r=e[n];r&&t[n].push(...r);break}case"transforms":{let r=e[n];r&&t[n].push(...r);break}case"enter":case"exit":{let r=e[n];r&&Object.assign(t[n],r);break}}}i(Bp,"extension");function ku(t,e){throw t?new Error("Cannot close `"+t.type+"` ("+wt({start:t.start,end:t.end})+"): a different token (`"+e.type+"`, "+wt({start:e.start,end:e.end})+") is open"):new Error("Cannot close document, a token (`"+e.type+"`, "+wt({start:e.start,end:e.end})+") is still open")}i(ku,"defaultOnError");function dn(t){let e=this;e.parser=n;function n(r){return fs(r,{...e.data("settings"),...t,extensions:e.data("micromarkExtensions")||[],mdastExtensions:e.data("fromMarkdownExtensions")||[]})}i(n,"parser")}i(dn,"remarkParse");var Au={}.hasOwnProperty;function vu(t,e){let n=e||{};function r(o,...s){let a=r.invalid,l=r.handlers;if(o&&Au.call(o,t)){let u=String(o[t]);a=Au.call(l,u)?l[u]:r.unknown}if(a)return a.call(this,o,...s)}return i(r,"one"),r.handlers=n.handlers||{},r.invalid=n.invalid,r.unknown=n.unknown,r}i(vu,"zwitch");var $p={}.hasOwnProperty;function ds(t,e){let n=-1,r;if(e.extensions)for(;++n<e.extensions.length;)ds(t,e.extensions[n]);for(r in e)if($p.call(e,r))switch(r){case"extensions":break;case"unsafe":{Eu(t[r],e[r]);break}case"join":{Eu(t[r],e[r]);break}case"handlers":{Vp(t[r],e[r]);break}default:t.options[r]=e[r]}return t}i(ds,"configure");function Eu(t,e){e&&t.push(...e)}i(Eu,"list");function Vp(t,e){e&&Object.assign(t,e)}i(Vp,"map");function Su(t,e,n,r){let o=n.enter("blockquote"),s=n.createTracker(r);s.move("> "),s.shift(2);let a=n.indentLines(n.containerFlow(t,s.current()),zp);return o(),a}i(Su,"blockquote");function zp(t,e,n){return">"+(n?"":" ")+t}i(zp,"map");function ri(t,e){return Tu(t,e.inConstruct,!0)&&!Tu(t,e.notInConstruct,!1)}i(ri,"patternInScope");function Tu(t,e,n){if(typeof e=="string"&&(e=[e]),!e||e.length===0)return n;let r=-1;for(;++r<e.length;)if(t.includes(e[r]))return!0;return!1}i(Tu,"listInScope");function hs(t,e,n,r){let o=-1;for(;++o<n.unsafe.length;)if(n.unsafe[o].character===`
`&&ri(n.stack,n.unsafe[o]))return/[ \t]/.test(r.before)?"":" ";return`\\
`}i(hs,"hardBreak");function Pu(t,e){let n=String(t),r=n.indexOf(e),o=r,s=0,a=0;if(typeof e!="string")throw new TypeError("Expected substring");for(;r!==-1;)r===o?++s>a&&(a=s):s=1,o=r+e.length,r=n.indexOf(e,o);return a}i(Pu,"longestStreak");function Yn(t,e){return!!(e.options.fences===!1&&t.value&&!t.lang&&/[^ \r\n]/.test(t.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(t.value))}i(Yn,"formatCodeAsIndented");function Fu(t){let e=t.options.fence||"`";if(e!=="`"&&e!=="~")throw new Error("Cannot serialize code with `"+e+"` for `options.fence`, expected `` ` `` or `~`");return e}i(Fu,"checkFence");function Iu(t,e,n,r){let o=Fu(n),s=t.value||"",a=o==="`"?"GraveAccent":"Tilde";if(Yn(t,n)){let d=n.enter("codeIndented"),h=n.indentLines(s,Wp);return d(),h}let l=n.createTracker(r),u=o.repeat(Math.max(Pu(s,o)+1,3)),c=n.enter("codeFenced"),f=l.move(u);if(t.lang){let d=n.enter(`codeFencedLang${a}`);f+=l.move(n.safe(t.lang,{before:f,after:" ",encode:["`"],...l.current()})),d()}if(t.lang&&t.meta){let d=n.enter(`codeFencedMeta${a}`);f+=l.move(" "),f+=l.move(n.safe(t.meta,{before:f,after:`
`,encode:["`"],...l.current()})),d()}return f+=l.move(`
`),s&&(f+=l.move(s+`
`)),f+=l.move(u),c(),f}i(Iu,"code");function Wp(t,e,n){return(n?"":"    ")+t}i(Wp,"map");function hn(t){let e=t.options.quote||'"';if(e!=='"'&&e!=="'")throw new Error("Cannot serialize title with `"+e+"` for `options.quote`, expected `\"`, or `'`");return e}i(hn,"checkQuote");function Lu(t,e,n,r){let o=hn(n),s=o==='"'?"Quote":"Apostrophe",a=n.enter("definition"),l=n.enter("label"),u=n.createTracker(r),c=u.move("[");return c+=u.move(n.safe(n.associationId(t),{before:c,after:"]",...u.current()})),c+=u.move("]: "),l(),!t.url||/[\0- \u007F]/.test(t.url)?(l=n.enter("destinationLiteral"),c+=u.move("<"),c+=u.move(n.safe(t.url,{before:c,after:">",...u.current()})),c+=u.move(">")):(l=n.enter("destinationRaw"),c+=u.move(n.safe(t.url,{before:c,after:t.title?" ":`
`,...u.current()}))),l(),t.title&&(l=n.enter(`title${s}`),c+=u.move(" "+o),c+=u.move(n.safe(t.title,{before:c,after:o,...u.current()})),c+=u.move(o),l()),a(),c}i(Lu,"definition");function Ru(t){let e=t.options.emphasis||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize emphasis with `"+e+"` for `options.emphasis`, expected `*`, or `_`");return e}i(Ru,"checkEmphasis");function De(t){return"&#x"+t.toString(16).toUpperCase()+";"}i(De,"encodeCharacterReference");function pn(t,e,n){let r=cn(t),o=cn(e);return r===void 0?o===void 0?n==="_"?{inside:!0,outside:!0}:{inside:!1,outside:!1}:o===1?{inside:!0,outside:!0}:{inside:!1,outside:!0}:r===1?o===void 0?{inside:!1,outside:!1}:o===1?{inside:!0,outside:!0}:{inside:!1,outside:!1}:o===void 0?{inside:!1,outside:!1}:o===1?{inside:!0,outside:!1}:{inside:!1,outside:!1}}i(pn,"encodeInfo");ps.peek=Hp;function ps(t,e,n,r){let o=Ru(n),s=n.enter("emphasis"),a=n.createTracker(r),l=a.move(o),u=a.move(n.containerPhrasing(t,{after:o,before:l,...a.current()})),c=u.charCodeAt(0),f=pn(r.before.charCodeAt(r.before.length-1),c,o);f.inside&&(u=De(c)+u.slice(1));let d=u.charCodeAt(u.length-1),h=pn(r.after.charCodeAt(0),d,o);h.inside&&(u=u.slice(0,-1)+De(d));let p=a.move(o);return s(),n.attentionEncodeSurroundingInfo={after:h.outside,before:f.outside},l+u+p}i(ps,"emphasis");function Hp(t,e,n){return n.options.emphasis||"*"}i(Hp,"emphasisPeek");var mn=i((function(t){if(t==null)return qp;if(typeof t=="function")return ii(t);if(typeof t=="object")return Array.isArray(t)?Up(t):jp(t);if(typeof t=="string")return Kp(t);throw new Error("Expected function, string, or object as test")}),"convert");function Up(t){let e=[],n=-1;for(;++n<t.length;)e[n]=mn(t[n]);return ii(r);function r(...o){let s=-1;for(;++s<e.length;)if(e[s].apply(this,o))return!0;return!1}}i(Up,"anyFactory");function jp(t){let e=t;return ii(n);function n(r){let o=r,s;for(s in t)if(o[s]!==e[s])return!1;return!0}}i(jp,"propertiesFactory");function Kp(t){return ii(e);function e(n){return n&&n.type===t}}i(Kp,"typeFactory");function ii(t){return e;function e(n,r,o){return!!(Gp(n)&&t.call(this,n,typeof r=="number"?r:void 0,o||void 0))}}i(ii,"castFactory");function qp(){return!0}i(qp,"ok");function Gp(t){return t!==null&&typeof t=="object"&&"type"in t}i(Gp,"looksLikeANode");function Ou(t){return"\x1B[33m"+t+"\x1B[39m"}i(Ou,"color");var Du=[],oi=!0,Bt=!1,si="skip";function ms(t,e,n,r){let o;typeof e=="function"&&typeof n!="function"?(r=n,n=e):o=e;let s=mn(o),a=r?-1:1;l(t,void 0,[])();function l(u,c,f){let d=u&&typeof u=="object"?u:{};if(typeof d.type=="string"){let p=typeof d.tagName=="string"?d.tagName:typeof d.name=="string"?d.name:void 0;Object.defineProperty(h,"name",{value:"node ("+Ou(u.type+(p?"<"+p+">":""))+")"})}return h;function h(){let p=Du,w,x,y;if((!e||s(u,c,f[f.length-1]||void 0))&&(p=Yp(n(u,f)),p[0]===Bt))return p;if("children"in u&&u.children){let b=u;if(b.children&&p[0]!==si)for(x=(r?b.children.length:-1)+a,y=f.concat(b);x>-1&&x<b.children.length;){let k=b.children[x];if(w=l(k,x,y)(),w[0]===Bt)return w;x=typeof w[1]=="number"?w[1]:x+a}}return p}}i(l,"factory")}i(ms,"visitParents");function Yp(t){return Array.isArray(t)?t:typeof t=="number"?[oi,t]:t==null?Du:[t]}i(Yp,"toResult");function Jn(t,e,n,r){let o,s,a;typeof e=="function"&&typeof n!="function"?(s=void 0,a=e,o=n):(s=e,a=n,o=r),ms(t,s,l,o);function l(u,c){let f=c[c.length-1],d=f?f.children.indexOf(u):void 0;return a(u,d,f)}i(l,"overload")}i(Jn,"visit");function ai(t,e){let n=!1;return Jn(t,function(r){if("value"in r&&/\r?\n|\r/.test(r.value)||r.type==="break")return n=!0,Bt}),!!((!t.depth||t.depth<3)&&Dt(t)&&(e.options.setext||n))}i(ai,"formatHeadingAsSetext");function Mu(t,e,n,r){let o=Math.max(Math.min(6,t.depth||1),1),s=n.createTracker(r);if(ai(t,n)){let f=n.enter("headingSetext"),d=n.enter("phrasing"),h=n.containerPhrasing(t,{...s.current(),before:`
`,after:`
`});return d(),f(),h+`
`+(o===1?"=":"-").repeat(h.length-(Math.max(h.lastIndexOf("\r"),h.lastIndexOf(`
`))+1))}let a="#".repeat(o),l=n.enter("headingAtx"),u=n.enter("phrasing");s.move(a+" ");let c=n.containerPhrasing(t,{before:"# ",after:`
`,...s.current()});return/^[\t ]/.test(c)&&(c=De(c.charCodeAt(0))+c.slice(1)),c=c?a+" "+c:a,n.options.closeAtx&&(c+=" "+a),u(),l(),c}i(Mu,"heading");gs.peek=Jp;function gs(t){return t.value||""}i(gs,"html");function Jp(){return"<"}i(Jp,"htmlPeek");ws.peek=Qp;function ws(t,e,n,r){let o=hn(n),s=o==='"'?"Quote":"Apostrophe",a=n.enter("image"),l=n.enter("label"),u=n.createTracker(r),c=u.move("![");return c+=u.move(n.safe(t.alt,{before:c,after:"]",...u.current()})),c+=u.move("]("),l(),!t.url&&t.title||/[\0- \u007F]/.test(t.url)?(l=n.enter("destinationLiteral"),c+=u.move("<"),c+=u.move(n.safe(t.url,{before:c,after:">",...u.current()})),c+=u.move(">")):(l=n.enter("destinationRaw"),c+=u.move(n.safe(t.url,{before:c,after:t.title?" ":")",...u.current()}))),l(),t.title&&(l=n.enter(`title${s}`),c+=u.move(" "+o),c+=u.move(n.safe(t.title,{before:c,after:o,...u.current()})),c+=u.move(o),l()),c+=u.move(")"),a(),c}i(ws,"image");function Qp(){return"!"}i(Qp,"imagePeek");bs.peek=Xp;function bs(t,e,n,r){let o=t.referenceType,s=n.enter("imageReference"),a=n.enter("label"),l=n.createTracker(r),u=l.move("!["),c=n.safe(t.alt,{before:u,after:"]",...l.current()});u+=l.move(c+"]["),a();let f=n.stack;n.stack=[],a=n.enter("reference");let d=n.safe(n.associationId(t),{before:u,after:"]",...l.current()});return a(),n.stack=f,s(),o==="full"||!c||c!==d?u+=l.move(d+"]"):o==="shortcut"?u=u.slice(0,-1):u+=l.move("]"),u}i(bs,"imageReference");function Xp(){return"!"}i(Xp,"imageReferencePeek");ys.peek=Zp;function ys(t,e,n){let r=t.value||"",o="`",s=-1;for(;new RegExp("(^|[^`])"+o+"([^`]|$)").test(r);)o+="`";for(/[^ \r\n]/.test(r)&&(/^[ \r\n]/.test(r)&&/[ \r\n]$/.test(r)||/^`|`$/.test(r))&&(r=" "+r+" ");++s<n.unsafe.length;){let a=n.unsafe[s],l=n.compilePattern(a),u;if(a.atBreak)for(;u=l.exec(r);){let c=u.index;r.charCodeAt(c)===10&&r.charCodeAt(c-1)===13&&c--,r=r.slice(0,c)+" "+r.slice(u.index+1)}}return o+r+o}i(ys,"inlineCode");function Zp(){return"`"}i(Zp,"inlineCodePeek");function ks(t,e){let n=Dt(t);return!!(!e.options.resourceLink&&t.url&&!t.title&&t.children&&t.children.length===1&&t.children[0].type==="text"&&(n===t.url||"mailto:"+n===t.url)&&/^[a-z][a-z+.-]+:/i.test(t.url)&&!/[\0- <>\u007F]/.test(t.url))}i(ks,"formatLinkAsAutolink");Cs.peek=em;function Cs(t,e,n,r){let o=hn(n),s=o==='"'?"Quote":"Apostrophe",a=n.createTracker(r),l,u;if(ks(t,n)){let f=n.stack;n.stack=[],l=n.enter("autolink");let d=a.move("<");return d+=a.move(n.containerPhrasing(t,{before:d,after:">",...a.current()})),d+=a.move(">"),l(),n.stack=f,d}l=n.enter("link"),u=n.enter("label");let c=a.move("[");return c+=a.move(n.containerPhrasing(t,{before:c,after:"](",...a.current()})),c+=a.move("]("),u(),!t.url&&t.title||/[\0- \u007F]/.test(t.url)?(u=n.enter("destinationLiteral"),c+=a.move("<"),c+=a.move(n.safe(t.url,{before:c,after:">",...a.current()})),c+=a.move(">")):(u=n.enter("destinationRaw"),c+=a.move(n.safe(t.url,{before:c,after:t.title?" ":")",...a.current()}))),u(),t.title&&(u=n.enter(`title${s}`),c+=a.move(" "+o),c+=a.move(n.safe(t.title,{before:c,after:o,...a.current()})),c+=a.move(o),u()),c+=a.move(")"),l(),c}i(Cs,"link");function em(t,e,n){return ks(t,n)?"<":"["}i(em,"linkPeek");xs.peek=tm;function xs(t,e,n,r){let o=t.referenceType,s=n.enter("linkReference"),a=n.enter("label"),l=n.createTracker(r),u=l.move("["),c=n.containerPhrasing(t,{before:u,after:"]",...l.current()});u+=l.move(c+"]["),a();let f=n.stack;n.stack=[],a=n.enter("reference");let d=n.safe(n.associationId(t),{before:u,after:"]",...l.current()});return a(),n.stack=f,s(),o==="full"||!c||c!==d?u+=l.move(d+"]"):o==="shortcut"?u=u.slice(0,-1):u+=l.move("]"),u}i(xs,"linkReference");function tm(){return"["}i(tm,"linkReferencePeek");function gn(t){let e=t.options.bullet||"*";if(e!=="*"&&e!=="+"&&e!=="-")throw new Error("Cannot serialize items with `"+e+"` for `options.bullet`, expected `*`, `+`, or `-`");return e}i(gn,"checkBullet");function Nu(t){let e=gn(t),n=t.options.bulletOther;if(!n)return e==="*"?"-":"*";if(n!=="*"&&n!=="+"&&n!=="-")throw new Error("Cannot serialize items with `"+n+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(n===e)throw new Error("Expected `bullet` (`"+e+"`) and `bulletOther` (`"+n+"`) to be different");return n}i(Nu,"checkBulletOther");function _u(t){let e=t.options.bulletOrdered||".";if(e!=="."&&e!==")")throw new Error("Cannot serialize items with `"+e+"` for `options.bulletOrdered`, expected `.` or `)`");return e}i(_u,"checkBulletOrdered");function li(t){let e=t.options.rule||"*";if(e!=="*"&&e!=="-"&&e!=="_")throw new Error("Cannot serialize rules with `"+e+"` for `options.rule`, expected `*`, `-`, or `_`");return e}i(li,"checkRule");function Bu(t,e,n,r){let o=n.enter("list"),s=n.bulletCurrent,a=t.ordered?_u(n):gn(n),l=t.ordered?a==="."?")":".":Nu(n),u=e&&n.bulletLastUsed?a===n.bulletLastUsed:!1;if(!t.ordered){let f=t.children?t.children[0]:void 0;if((a==="*"||a==="-")&&f&&(!f.children||!f.children[0])&&n.stack[n.stack.length-1]==="list"&&n.stack[n.stack.length-2]==="listItem"&&n.stack[n.stack.length-3]==="list"&&n.stack[n.stack.length-4]==="listItem"&&n.indexStack[n.indexStack.length-1]===0&&n.indexStack[n.indexStack.length-2]===0&&n.indexStack[n.indexStack.length-3]===0&&(u=!0),li(n)===a&&f){let d=-1;for(;++d<t.children.length;){let h=t.children[d];if(h&&h.type==="listItem"&&h.children&&h.children[0]&&h.children[0].type==="thematicBreak"){u=!0;break}}}}u&&(a=l),n.bulletCurrent=a;let c=n.containerFlow(t,r);return n.bulletLastUsed=a,n.bulletCurrent=s,o(),c}i(Bu,"list");function $u(t){let e=t.options.listItemIndent||"one";if(e!=="tab"&&e!=="one"&&e!=="mixed")throw new Error("Cannot serialize items with `"+e+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return e}i($u,"checkListItemIndent");function Vu(t,e,n,r){let o=$u(n),s=n.bulletCurrent||gn(n);e&&e.type==="list"&&e.ordered&&(s=(typeof e.start=="number"&&e.start>-1?e.start:1)+(n.options.incrementListMarker===!1?0:e.children.indexOf(t))+s);let a=s.length+1;(o==="tab"||o==="mixed"&&(e&&e.type==="list"&&e.spread||t.spread))&&(a=Math.ceil(a/4)*4);let l=n.createTracker(r);l.move(s+" ".repeat(a-s.length)),l.shift(a);let u=n.enter("listItem"),c=n.indentLines(n.containerFlow(t,l.current()),f);return u(),c;function f(d,h,p){return h?(p?"":" ".repeat(a))+d:(p?s:s+" ".repeat(a-s.length))+d}i(f,"map")}i(Vu,"listItem");function zu(t,e,n,r){let o=n.enter("paragraph"),s=n.enter("phrasing"),a=n.containerPhrasing(t,r);return s(),o(),a}i(zu,"paragraph");var As=mn(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function Wu(t,e,n,r){return(t.children.some(function(a){return As(a)})?n.containerPhrasing:n.containerFlow).call(n,t,r)}i(Wu,"root");function Hu(t){let e=t.options.strong||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize strong with `"+e+"` for `options.strong`, expected `*`, or `_`");return e}i(Hu,"checkStrong");vs.peek=nm;function vs(t,e,n,r){let o=Hu(n),s=n.enter("strong"),a=n.createTracker(r),l=a.move(o+o),u=a.move(n.containerPhrasing(t,{after:o,before:l,...a.current()})),c=u.charCodeAt(0),f=pn(r.before.charCodeAt(r.before.length-1),c,o);f.inside&&(u=De(c)+u.slice(1));let d=u.charCodeAt(u.length-1),h=pn(r.after.charCodeAt(0),d,o);h.inside&&(u=u.slice(0,-1)+De(d));let p=a.move(o+o);return s(),n.attentionEncodeSurroundingInfo={after:h.outside,before:f.outside},l+u+p}i(vs,"strong");function nm(t,e,n){return n.options.strong||"*"}i(nm,"strongPeek");function Uu(t,e,n,r){return n.safe(t.value,r)}i(Uu,"text");function ju(t){let e=t.options.ruleRepetition||3;if(e<3)throw new Error("Cannot serialize rules with repetition `"+e+"` for `options.ruleRepetition`, expected `3` or more");return e}i(ju,"checkRuleRepetition");function Ku(t,e,n){let r=(li(n)+(n.options.ruleSpaces?" ":"")).repeat(ju(n));return n.options.ruleSpaces?r.slice(0,-1):r}i(Ku,"thematicBreak");var qu={blockquote:Su,break:hs,code:Iu,definition:Lu,emphasis:ps,hardBreak:hs,heading:Mu,html:gs,image:ws,imageReference:bs,inlineCode:ys,link:Cs,linkReference:xs,list:Bu,listItem:Vu,paragraph:zu,root:Wu,strong:vs,text:Uu,thematicBreak:Ku};var Gu=[rm];function rm(t,e,n,r){if(e.type==="code"&&Yn(e,r)&&(t.type==="list"||t.type===e.type&&Yn(t,r)))return!1;if("spread"in n&&typeof n.spread=="boolean")return t.type==="paragraph"&&(t.type===e.type||e.type==="definition"||e.type==="heading"&&ai(e,r))?void 0:n.spread?1:0}i(rm,"joinDefaults");var $t=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"],Yu=[{character:"	",after:"[\\r\\n]",inConstruct:"phrasing"},{character:"	",before:"[\\r\\n]",inConstruct:"phrasing"},{character:"	",inConstruct:["codeFencedLangGraveAccent","codeFencedLangTilde"]},{character:"\r",inConstruct:["codeFencedLangGraveAccent","codeFencedLangTilde","codeFencedMetaGraveAccent","codeFencedMetaTilde","destinationLiteral","headingAtx"]},{character:`
`,inConstruct:["codeFencedLangGraveAccent","codeFencedLangTilde","codeFencedMetaGraveAccent","codeFencedMetaTilde","destinationLiteral","headingAtx"]},{character:" ",after:"[\\r\\n]",inConstruct:"phrasing"},{character:" ",before:"[\\r\\n]",inConstruct:"phrasing"},{character:" ",inConstruct:["codeFencedLangGraveAccent","codeFencedLangTilde"]},{character:"!",after:"\\[",inConstruct:"phrasing",notInConstruct:$t},{character:'"',inConstruct:"titleQuote"},{atBreak:!0,character:"#"},{character:"#",inConstruct:"headingAtx",after:`(?:[\r
]|$)`},{character:"&",after:"[#A-Za-z]",inConstruct:"phrasing"},{character:"'",inConstruct:"titleApostrophe"},{character:"(",inConstruct:"destinationRaw"},{before:"\\]",character:"(",inConstruct:"phrasing",notInConstruct:$t},{atBreak:!0,before:"\\d+",character:")"},{character:")",inConstruct:"destinationRaw"},{atBreak:!0,character:"*",after:`(?:[ 	\r
*])`},{character:"*",inConstruct:"phrasing",notInConstruct:$t},{atBreak:!0,character:"+",after:`(?:[ 	\r
])`},{atBreak:!0,character:"-",after:`(?:[ 	\r
-])`},{atBreak:!0,before:"\\d+",character:".",after:`(?:[ 	\r
]|$)`},{atBreak:!0,character:"<",after:"[!/?A-Za-z]"},{character:"<",after:"[!/?A-Za-z]",inConstruct:"phrasing",notInConstruct:$t},{character:"<",inConstruct:"destinationLiteral"},{atBreak:!0,character:"="},{atBreak:!0,character:">"},{character:">",inConstruct:"destinationLiteral"},{atBreak:!0,character:"["},{character:"[",inConstruct:"phrasing",notInConstruct:$t},{character:"[",inConstruct:["label","reference"]},{character:"\\",after:"[\\r\\n]",inConstruct:"phrasing"},{character:"]",inConstruct:["label","reference"]},{atBreak:!0,character:"_"},{character:"_",inConstruct:"phrasing",notInConstruct:$t},{atBreak:!0,character:"`"},{character:"`",inConstruct:["codeFencedLangGraveAccent","codeFencedMetaGraveAccent"]},{character:"`",inConstruct:"phrasing",notInConstruct:$t},{atBreak:!0,character:"~"}];function Ju(t){return t.label||!t.identifier?t.label||"":ni(t.identifier)}i(Ju,"association");function Qu(t){if(!t._compiled){let e=(t.atBreak?"[\\r\\n][\\t ]*":"")+(t.before?"(?:"+t.before+")":"");t._compiled=new RegExp((e?"("+e+")":"")+(/[|\\{}()[\]^$+*?.-]/.test(t.character)?"\\":"")+t.character+(t.after?"(?:"+t.after+")":""),"g")}return t._compiled}i(Qu,"compilePattern");function Xu(t,e,n){let r=e.indexStack,o=t.children||[],s=[],a=-1,l=n.before,u;r.push(-1);let c=e.createTracker(n);for(;++a<o.length;){let f=o[a],d;if(r[r.length-1]=a,a+1<o.length){let w=e.handle.handlers[o[a+1].type];w&&w.peek&&(w=w.peek),d=w?w(o[a+1],t,e,{before:"",after:"",...c.current()}).charAt(0):""}else d=n.after;s.length>0&&(l==="\r"||l===`
`)&&f.type==="html"&&(s[s.length-1]=s[s.length-1].replace(/(\r?\n|\r)$/," "),l=" ",c=e.createTracker(n),c.move(s.join("")));let h=e.handle(f,t,e,{...c.current(),after:d,before:l});u&&u===h.slice(0,1)&&(h=De(u.charCodeAt(0))+h.slice(1));let p=e.attentionEncodeSurroundingInfo;e.attentionEncodeSurroundingInfo=void 0,u=void 0,p&&(s.length>0&&p.before&&l===s[s.length-1].slice(-1)&&(s[s.length-1]=s[s.length-1].slice(0,-1)+De(l.charCodeAt(0))),p.after&&(u=d)),c.move(h),s.push(h),l=h.slice(-1)}return r.pop(),s.join("")}i(Xu,"containerPhrasing");function Zu(t,e,n){let r=e.indexStack,o=t.children||[],s=e.createTracker(n),a=[],l=-1;for(r.push(-1);++l<o.length;){let u=o[l];r[r.length-1]=l,a.push(s.move(e.handle(u,t,e,{before:`
`,after:`
`,...s.current()}))),u.type!=="list"&&(e.bulletLastUsed=void 0),l<o.length-1&&a.push(s.move(im(u,o[l+1],t,e)))}return r.pop(),a.join("")}i(Zu,"containerFlow");function im(t,e,n,r){let o=r.join.length;for(;o--;){let s=r.join[o](t,e,n,r);if(s===!0||s===1)break;if(typeof s=="number")return`
`.repeat(1+s);if(s===!1)return`

<!---->

`}return`

`}i(im,"between");var om=/\r?\n|\r/g;function ec(t,e){let n=[],r=0,o=0,s;for(;s=om.exec(t);)a(t.slice(r,s.index)),n.push(s[0]),r=s.index+s[0].length,o++;return a(t.slice(r)),n.join("");function a(l){n.push(e(l,o,!l))}i(a,"one")}i(ec,"indentLines");function nc(t,e,n){let r=(n.before||"")+(e||"")+(n.after||""),o=[],s=[],a={},l=-1;for(;++l<t.unsafe.length;){let f=t.unsafe[l];if(!ri(t.stack,f))continue;let d=t.compilePattern(f),h;for(;h=d.exec(r);){let p="before"in f||!!f.atBreak,w="after"in f,x=h.index+(p?h[1].length:0);o.includes(x)?(a[x].before&&!p&&(a[x].before=!1),a[x].after&&!w&&(a[x].after=!1)):(o.push(x),a[x]={before:p,after:w})}}o.sort(sm);let u=n.before?n.before.length:0,c=r.length-(n.after?n.after.length:0);for(l=-1;++l<o.length;){let f=o[l];f<u||f>=c||f+1<c&&o[l+1]===f+1&&a[f].after&&!a[f+1].before&&!a[f+1].after||o[l-1]===f-1&&a[f].before&&!a[f-1].before&&!a[f-1].after||(u!==f&&s.push(tc(r.slice(u,f),"\\")),u=f,/[!-/:-@[-`{-~]/.test(r.charAt(f))&&(!n.encode||!n.encode.includes(r.charAt(f)))?s.push("\\"):(s.push(De(r.charCodeAt(f))),u++))}return s.push(tc(r.slice(u,c),n.after)),s.join("")}i(nc,"safe");function sm(t,e){return t-e}i(sm,"numerical");function tc(t,e){let n=/\\(?=[!-/:-@[-`{-~])/g,r=[],o=[],s=t+e,a=-1,l=0,u;for(;u=n.exec(s);)r.push(u.index);for(;++a<r.length;)l!==r[a]&&o.push(t.slice(l,r[a])),o.push("\\"),l=r[a];return o.push(t.slice(l)),o.join("")}i(tc,"escapeBackslashes");function rc(t){let e=t||{},n=e.now||{},r=e.lineShift||0,o=n.line||1,s=n.column||1;return{move:u,current:a,shift:l};function a(){return{now:{line:o,column:s},lineShift:r}}function l(c){r+=c}function u(c){let f=c||"",d=f.split(/\r?\n|\r/g),h=d[d.length-1];return o+=d.length-1,s=d.length===1?s+h.length:1+h.length+r,f}}i(rc,"track");function Es(t,e){let n=e||{},r={associationId:Ju,containerPhrasing:cm,containerFlow:fm,createTracker:rc,compilePattern:Qu,enter:s,handlers:{...qu},handle:void 0,indentLines:ec,indexStack:[],join:[...Gu],options:{},safe:dm,stack:[],unsafe:[...Yu]};ds(r,n),r.options.tightDefinitions&&r.join.push(um),r.handle=vu("type",{invalid:am,unknown:lm,handlers:r.handlers});let o=r.handle(t,void 0,r,{before:`
`,after:`
`,now:{line:1,column:1},lineShift:0});return o&&o.charCodeAt(o.length-1)!==10&&o.charCodeAt(o.length-1)!==13&&(o+=`
`),o;function s(a){return r.stack.push(a),l;function l(){r.stack.pop()}i(l,"exit")}i(s,"enter")}i(Es,"toMarkdown");function am(t){throw new Error("Cannot handle value `"+t+"`, expected node")}i(am,"invalid");function lm(t){let e=t;throw new Error("Cannot handle unknown node `"+e.type+"`")}i(lm,"unknown");function um(t,e){if(t.type==="definition"&&t.type===e.type)return 0}i(um,"joinDefinition");function cm(t,e){return Xu(t,this,e)}i(cm,"containerPhrasingBound");function fm(t,e){return Zu(t,this,e)}i(fm,"containerFlowBound");function dm(t,e){return nc(this,t,e)}i(dm,"safeBound");function ui(t){let e=this;e.compiler=n;function n(r){return Es(r,{...e.data("settings"),...t,extensions:e.data("toMarkdownExtensions")||[]})}i(n,"compiler")}i(ui,"remarkStringify");function Ss(t){if(t)throw t}i(Ss,"bail");var hi=qt(dc(),1);function Qn(t){if(typeof t!="object"||t===null)return!1;let e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)}i(Qn,"isPlainObject");function Ts(){let t=[],e={run:n,use:r};return e;function n(...o){let s=-1,a=o.pop();if(typeof a!="function")throw new TypeError("Expected function as last argument, not "+a);l(null,...o);function l(u,...c){let f=t[++s],d=-1;if(u){a(u);return}for(;++d<o.length;)(c[d]===null||c[d]===void 0)&&(c[d]=o[d]);o=c,f?hc(f,l)(...c):a(null,...c)}i(l,"next")}function r(o){if(typeof o!="function")throw new TypeError("Expected `middelware` to be a function, not "+o);return t.push(o),e}}i(Ts,"trough");function hc(t,e){let n;return r;function r(...a){let l=t.length>a.length,u;l&&a.push(o);try{u=t.apply(this,a)}catch(c){let f=c;if(l&&n)throw f;return o(f)}l||(u&&u.then&&typeof u.then=="function"?u.then(s,o):u instanceof Error?o(u):s(u))}function o(a,...l){n||(n=!0,e(a,...l))}function s(a){o(null,a)}}i(hc,"wrap");var oe=class extends Error{static{i(this,"VFileMessage")}constructor(e,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let o="",s={},a=!1;if(n&&("line"in n&&"column"in n?s={place:n}:"start"in n&&"end"in n?s={place:n}:"type"in n?s={ancestors:[n],place:n.position}:s={...n}),typeof e=="string"?o=e:!s.cause&&e&&(a=!0,o=e.message,s.cause=e),!s.ruleId&&!s.source&&typeof r=="string"){let u=r.indexOf(":");u===-1?s.ruleId=r:(s.source=r.slice(0,u),s.ruleId=r.slice(u+1))}if(!s.place&&s.ancestors&&s.ancestors){let u=s.ancestors[s.ancestors.length-1];u&&(s.place=u.position)}let l=s.place&&"start"in s.place?s.place.start:s.place;this.ancestors=s.ancestors||void 0,this.cause=s.cause||void 0,this.column=l?l.column:void 0,this.fatal=void 0,this.file="",this.message=o,this.line=l?l.line:void 0,this.name=wt(s.place)||"1:1",this.place=s.place||void 0,this.reason=this.message,this.ruleId=s.ruleId||void 0,this.source=s.source||void 0,this.stack=a&&s.cause&&typeof s.cause.stack=="string"?s.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}};oe.prototype.file="";oe.prototype.name="";oe.prototype.reason="";oe.prototype.message="";oe.prototype.stack="";oe.prototype.column=void 0;oe.prototype.line=void 0;oe.prototype.ancestors=void 0;oe.prototype.cause=void 0;oe.prototype.fatal=void 0;oe.prototype.place=void 0;oe.prototype.ruleId=void 0;oe.prototype.source=void 0;var We=qt(require("node:path"),1);var Ps=qt(require("node:process"),1);var Fs=require("node:url");function fi(t){return!!(t!==null&&typeof t=="object"&&"href"in t&&t.href&&"protocol"in t&&t.protocol&&t.auth===void 0)}i(fi,"isUrl");var Is=["history","path","basename","stem","extname","dirname"],Xn=class{static{i(this,"VFile")}constructor(e){let n;e?fi(e)?n={path:e}:typeof e=="string"||hm(e)?n={value:e}:n=e:n={},this.cwd="cwd"in n?"":Ps.default.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<Is.length;){let s=Is[r];s in n&&n[s]!==void 0&&n[s]!==null&&(this[s]=s==="history"?[...n[s]]:n[s])}let o;for(o in n)Is.includes(o)||(this[o]=n[o])}get basename(){return typeof this.path=="string"?We.default.basename(this.path):void 0}set basename(e){Rs(e,"basename"),Ls(e,"basename"),this.path=We.default.join(this.dirname||"",e)}get dirname(){return typeof this.path=="string"?We.default.dirname(this.path):void 0}set dirname(e){pc(this.basename,"dirname"),this.path=We.default.join(e||"",this.basename)}get extname(){return typeof this.path=="string"?We.default.extname(this.path):void 0}set extname(e){if(Ls(e,"extname"),pc(this.dirname,"extname"),e){if(e.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=We.default.join(this.dirname,this.stem+(e||""))}get path(){return this.history[this.history.length-1]}set path(e){fi(e)&&(e=(0,Fs.fileURLToPath)(e)),Rs(e,"path"),this.path!==e&&this.history.push(e)}get stem(){return typeof this.path=="string"?We.default.basename(this.path,this.extname):void 0}set stem(e){Rs(e,"stem"),Ls(e,"stem"),this.path=We.default.join(this.dirname||"",e+(this.extname||""))}fail(e,n,r){let o=this.message(e,n,r);throw o.fatal=!0,o}info(e,n,r){let o=this.message(e,n,r);return o.fatal=void 0,o}message(e,n,r){let o=new oe(e,n,r);return this.path&&(o.name=this.path+":"+o.name,o.file=this.path),o.fatal=!1,this.messages.push(o),o}toString(e){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(e||void 0).decode(this.value)}};function Ls(t,e){if(t&&t.includes(We.default.sep))throw new Error("`"+e+"` cannot be a path: did not expect `"+We.default.sep+"`")}i(Ls,"assertPart");function Rs(t,e){if(!t)throw new Error("`"+e+"` cannot be empty")}i(Rs,"assertNonEmpty");function pc(t,e){if(!t)throw new Error("Setting `"+e+"` requires `path` to be set too")}i(pc,"assertPath");function hm(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}i(hm,"isUint8Array");var mc=i((function(t){let r=this.constructor.prototype,o=r[t],s=i(function(){return o.apply(s,arguments)},"apply");return Object.setPrototypeOf(s,r),s}),"CallableInstance");var pm={}.hasOwnProperty,Ns=class t extends mc{static{i(this,"Processor")}constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=Ts()}copy(){let e=new t,n=-1;for(;++n<this.attachers.length;){let r=this.attachers[n];e.use(...r)}return e.data((0,hi.default)(!0,{},this.namespace)),e}data(e,n){return typeof e=="string"?arguments.length===2?(Ms("data",this.frozen),this.namespace[e]=n,this):pm.call(this.namespace,e)&&this.namespace[e]||void 0:e?(Ms("data",this.frozen),this.namespace=e,this):this.namespace}freeze(){if(this.frozen)return this;let e=this;for(;++this.freezeIndex<this.attachers.length;){let[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);let o=n.call(e,...r);typeof o=="function"&&this.transformers.use(o)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(e){this.freeze();let n=di(e),r=this.parser||this.Parser;return Os("parse",r),r(String(n),n)}process(e,n){let r=this;return this.freeze(),Os("process",this.parser||this.Parser),Ds("process",this.compiler||this.Compiler),n?o(void 0,n):new Promise(o);function o(s,a){let l=di(e),u=r.parse(l);r.run(u,l,function(f,d,h){if(f||!d||!h)return c(f);let p=d,w=r.stringify(p,h);gm(w)?h.value=w:h.result=w,c(f,h)});function c(f,d){f||!d?a(f):s?s(d):n(void 0,d)}i(c,"realDone")}i(o,"executor")}processSync(e){let n=!1,r;return this.freeze(),Os("processSync",this.parser||this.Parser),Ds("processSync",this.compiler||this.Compiler),this.process(e,o),wc("processSync","process",n),r;function o(s,a){n=!0,Ss(s),r=a}i(o,"realDone")}run(e,n,r){gc(e),this.freeze();let o=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?s(void 0,r):new Promise(s);function s(a,l){let u=di(n);o.run(e,u,c);function c(f,d,h){let p=d||e;f?l(f):a?a(p):r(void 0,p,h)}i(c,"realDone")}i(s,"executor")}runSync(e,n){let r=!1,o;return this.run(e,n,s),wc("runSync","run",r),o;function s(a,l){Ss(a),o=l,r=!0}i(s,"realDone")}stringify(e,n){this.freeze();let r=di(n),o=this.compiler||this.Compiler;return Ds("stringify",o),gc(e),o(e,r)}use(e,...n){let r=this.attachers,o=this.namespace;if(Ms("use",this.frozen),e!=null)if(typeof e=="function")u(e,n);else if(typeof e=="object")Array.isArray(e)?l(e):a(e);else throw new TypeError("Expected usable value, not `"+e+"`");return this;function s(c){if(typeof c=="function")u(c,[]);else if(typeof c=="object")if(Array.isArray(c)){let[f,...d]=c;u(f,d)}else a(c);else throw new TypeError("Expected usable value, not `"+c+"`")}function a(c){if(!("plugins"in c)&&!("settings"in c))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");l(c.plugins),c.settings&&(o.settings=(0,hi.default)(!0,o.settings,c.settings))}function l(c){let f=-1;if(c!=null)if(Array.isArray(c))for(;++f<c.length;){let d=c[f];s(d)}else throw new TypeError("Expected a list of plugins, not `"+c+"`")}function u(c,f){let d=-1,h=-1;for(;++d<r.length;)if(r[d][0]===c){h=d;break}if(h===-1)r.push([c,...f]);else if(f.length>0){let[p,...w]=f,x=r[h][1];Qn(x)&&Qn(p)&&(p=(0,hi.default)(!0,x,p)),r[h]=[c,p,...w]}}}},_s=new Ns().freeze();function Os(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `parser`")}i(Os,"assertParser");function Ds(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `compiler`")}i(Ds,"assertCompiler");function Ms(t,e){if(e)throw new Error("Cannot call `"+t+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}i(Ms,"assertUnfrozen");function gc(t){if(!Qn(t)||typeof t.type!="string")throw new TypeError("Expected node, got `"+t+"`")}i(gc,"assertNode");function wc(t,e,n){if(!n)throw new Error("`"+t+"` finished async. Use `"+e+"` instead")}i(wc,"assertDone");function di(t){return mm(t)?t:new Xn(t)}i(di,"vfile");function mm(t){return!!(t&&typeof t=="object"&&"message"in t&&"messages"in t)}i(mm,"looksLikeAVFile");function gm(t){return typeof t=="string"||wm(t)}i(gm,"looksLikeAValue");function wm(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}i(wm,"isUint8Array");var bc=_s().use(dn).use(ui).freeze();var $s={d:i((t,e)=>{for(var n in e)$s.o(e,n)&&!$s.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},"d"),o:i((t,e)=>Object.prototype.hasOwnProperty.call(t,e),"o")},Vs={};$s.d(Vs,{Z:i(()=>Cm,"Z"),$:i(()=>xc,"$")});var wn={horizontalTab:-2,virtualSpace:-1,nul:0,eof:null,space:32};function yc(t){return t<wn.nul||t===wn.space}i(yc,"n");function Bs(t){return t<wn.horizontalTab}i(Bs,"i");var bm={553:t=>{t.exports=function(e){var n,r;return e._compiled||(n=e.before?"(?:"+e.before+")":"",r=e.after?"(?:"+e.after+")":"",e.atBreak&&(n="[\\r\\n][\\t ]*"+n),e._compiled=new RegExp((n?"("+n+")":"")+(/[|\\{}()[\]^$+*?.-]/.test(e.character)?"\\":"")+e.character+(r||""),"g")),e._compiled}},112:t=>{function e(n,r,o){var s;if(!r)return o;for(typeof r=="string"&&(r=[r]),s=-1;++s<r.length;)if(n.indexOf(r[s])!==-1)return!0;return!1}i(e,"t"),t.exports=function(n,r){return e(n,r.inConstruct,!0)&&!e(n,r.notInConstruct)}},113:(t,e,n)=>{t.exports=function(l,u,c){for(var f,d,h,p,w,x,y,b,k=(c.before||"")+(u||"")+(c.after||""),v=[],S=[],I={},C=-1;++C<l.unsafe.length;)if(p=l.unsafe[C],o(l.stack,p))for(w=r(p);x=w.exec(k);)f="before"in p||p.atBreak,d="after"in p,h=x.index+(f?x[1].length:0),v.indexOf(h)===-1?(v.push(h),I[h]={before:f,after:d}):(I[h].before&&!f&&(I[h].before=!1),I[h].after&&!d&&(I[h].after=!1));for(v.sort(s),y=c.before?c.before.length:0,b=k.length-(c.after?c.after.length:0),C=-1;++C<v.length;)(h=v[C])<y||h>=b||h+1<b&&v[C+1]===h+1&&I[h].after&&!I[h+1].before&&!I[h+1].after||(y!==h&&S.push(a(k.slice(y,h),"\\")),y=h,!/[!-/:-@[-`{-~]/.test(k.charAt(h))||c.encode&&c.encode.indexOf(k.charAt(h))!==-1?(S.push("&#x"+k.charCodeAt(h).toString(16).toUpperCase()+";"),y++):S.push("\\"));return S.push(a(k.slice(y,b),c.after)),S.join("")};var r=n(553),o=n(112);function s(l,u){return l-u}i(s,"a");function a(l,u){for(var c,f=/\\(?=[!-/:-@[-`{-~])/g,d=[],h=[],p=-1,w=0,x=l+u;c=f.exec(x);)d.push(c.index);for(;++p<d.length;)w!==d[p]&&h.push(l.slice(w,d[p])),h.push("\\"),w=d[p];return h.push(l.slice(w)),h.join("")}i(a,"o")}},kc={};function it(t){var e=kc[t];if(e!==void 0)return e.exports;var n=kc[t]={exports:{}};return bm[t](n,n.exports,it),n.exports}i(it,"s");it.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return it.d(e,{a:e}),e},it.d=(t,e)=>{for(var n in e)it.o(e,n)&&!it.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},it.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var zs={};(()=>{function t(o={}){let s=o.permalinks||[],a=o.pageResolver||(h=>[h.replace(/ /g,"_").toLowerCase()]),l=o.newClassName||"new",u=o.wikiLinkClassName||"internal",c=o.hrefTemplate||(h=>`#/page/${h}`),f;function d(h){return h[h.length-1]}return i(d,"s"),{enter:{wikiLink:i(function(h){f={type:"wikiLink",value:null,data:{alias:null,permalink:null,exists:null}},this.enter(f,h)},"wikiLink")},exit:{wikiLinkTarget:i(function(h){let p=this.sliceSerialize(h);d(this.stack).value=p},"wikiLinkTarget"),wikiLinkAlias:i(function(h){let p=this.sliceSerialize(h);d(this.stack).data.alias=p},"wikiLinkAlias"),wikiLink:i(function(h){this.exit(h);let p=f,w=a(p.value),x=w.find((S=>s.indexOf(S)!==-1)),y=x!==void 0,b;b=y?x:w[0]||"";let k=p.value;p.data.alias&&(k=p.data.alias);let v=u;y||(v+=" "+l),p.data.alias=k,p.data.permalink=b,p.data.exists=y,p.data.hName="a",p.data.hProperties={className:v,href:c(b)},p.data.hChildren=[{type:"text",value:k}]},"wikiLink")}}}i(t,"e"),it.d(zs,{V:i(()=>t,"V"),x:i(()=>r,"x")});var e=it(113),n=it.n(e);function r(o={}){let s=o.aliasDivider||":";return{unsafe:[{character:"[",inConstruct:["phrasing","label","reference"]},{character:"]",inConstruct:["label","reference"]}],handlers:{wikiLink:i(function(a,l,u){let c=u.enter("wikiLink"),f=n()(u,a.value,{before:"[",after:"]"}),d=n()(u,a.data.alias,{before:"[",after:"]"}),h;return h=d!==f?`[[${f}${s}${d}]]`:`[[${f}]]`,c(),h},"wikiLink")}}}i(r,"n")})();var ym=zs.V,km=zs.x,Cc=!1;function xc(t={}){let e=this.data();function n(r,o){e[r]?e[r].push(o):e[r]=[o]}i(n,"a"),!Cc&&(this.Parser&&this.Parser.prototype&&this.Parser.prototype.blockTokenizers||this.Compiler&&this.Compiler.prototype&&this.Compiler.prototype.visitors)&&(Cc=!0,console.warn("[remark-wiki-link] Warning: please upgrade to remark 13 to use this plugin")),n("micromarkExtensions",(function(){var r=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:{}).aliasDivider||":",o="]]";return{text:{91:{tokenize:i(function(s,a,l){var u,c,f=0,d=0,h=0;return function(k){return k!=="[[".charCodeAt(d)?l(k):(s.enter("wikiLink"),s.enter("wikiLinkMarker"),p(k))};function p(k){return d===2?(s.exit("wikiLinkMarker"),(function(v){return Bs(v)||v===wn.eof?l(v):(s.enter("wikiLinkData"),s.enter("wikiLinkTarget"),w(v))})(k)):k!=="[[".charCodeAt(d)?l(k):(s.consume(k),d++,p)}function w(k){return k===r.charCodeAt(f)?u?(s.exit("wikiLinkTarget"),s.enter("wikiLinkAliasMarker"),x(k)):l(k):k===o.charCodeAt(h)?u?(s.exit("wikiLinkTarget"),s.exit("wikiLinkData"),s.enter("wikiLinkMarker"),b(k)):l(k):Bs(k)||k===wn.eof?l(k):(yc(k)||(u=!0),s.consume(k),w)}function x(k){return f===r.length?(s.exit("wikiLinkAliasMarker"),s.enter("wikiLinkAlias"),y(k)):k!==r.charCodeAt(f)?l(k):(s.consume(k),f++,x)}function y(k){return k===o.charCodeAt(h)?c?(s.exit("wikiLinkAlias"),s.exit("wikiLinkData"),s.enter("wikiLinkMarker"),b(k)):l(k):Bs(k)||k===wn.eof?l(k):(yc(k)||(c=!0),s.consume(k),y)}function b(k){return h===2?(s.exit("wikiLinkMarker"),s.exit("wikiLink"),a(k)):k!==o.charCodeAt(h)?l(k):(s.consume(k),h++,b)}},"tokenize")}}}})(t)),n("fromMarkdownExtensions",ym(t)),n("toMarkdownExtensions",km(t))}i(xc,"k");var Cm=xc,tS=Vs.Z,Ac=Vs.$;i((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();var xm=/^[A-Za-z][A-Za-z0-9+\-.]*:\S+$/;function Ws(t){if(/\s/.test(t))return!1;if(t.includes("://"))try{return new URL(t),!0}catch{return!1}return xm.test(t)}i(Ws,"isUrl");var Vt=require("obsidian");i((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();function pi(t){let e=(0,Vt.getFrontMatterInfo)(t);return(0,Vt.parseYaml)(e.frontmatter)??{}}i(pi,"parseFrontmatter");function vc(t,e){let n=(0,Vt.getFrontMatterInfo)(t);if(Object.keys(e).length===0)return t.slice(n.contentStart);let r=(0,Vt.stringifyYaml)(e);return n.exists?Na(t,r,n.from,n.to):`---
${r}---
${t}`}i(vc,"setFrontmatter");i((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();function Fe(t){if(!ye(t))return!1;let e=t;return e.startOffset!==void 0&&e.endOffset!==void 0}i(Fe,"isFrontmatterLinkCacheWithOffsets");function mi(t){return Fe(t)?t:{...t,endOffset:t.original.length,startOffset:0}}i(mi,"toFrontmatterLinkCacheWithOffsets");i((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();function Ec(t){return Hs(t)&&t.type==="file"}i(Ec,"isCanvasFileNodeReference");function Hs(t){return ye(t)&&!!t.isCanvas}i(Hs,"isCanvasReference");function zt(t,e){return Fe(t)?{newContent:e,oldContent:t.original.slice(t.startOffset,t.endOffset),reference:t}:{newContent:e,oldContent:t.original,reference:t}}i(zt,"referenceToFileChange");function Sc(t){return t.sort((e,n)=>{if(ye(e)&&ye(n)){let r=Fe(e)?e.startOffset:0,o=Fe(n)?n.startOffset:0;return e.key.localeCompare(n.key)||Number(Fe(n))-Number(Fe(e))||r-o}return Ke(e)&&Ke(n)?e.position.start.offset-n.position.start.offset:ye(e)?1:-1})}i(Sc,"sortReferences");var Wt=require("obsidian");var Zn=require("@codemirror/state"),Us=require("@codemirror/view");i((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();var Tc=new WeakMap;function js(t){let e=Fc(t);t.cm.dispatch({effects:e.reconfigure([Zn.EditorState.readOnly.of(!0),Us.EditorView.editable.of(!1)])})}i(js,"lockEditor");function Pc(t){let e=Fc(t);t.cm.dispatch({effects:e.reconfigure([Zn.EditorState.readOnly.of(!1),Us.EditorView.editable.of(!0)])})}i(Pc,"unlockEditor");function Fc(t){let e=Tc.get(t);return e||(e=new Zn.Compartment,Tc.set(t,e)),e}i(Fc,"ensureCompartment");i((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();async function Ic(t,e,n){let r=te(t,e),o=Ne(n);await bn(t,o);let s=gi(t,n);try{await t.vault.copy(r,s)}catch(a){if(!await t.vault.exists(s))throw a}return s}i(Ic,"copySafe");async function bn(t,e){if(await t.vault.adapter.exists(e))return!1;try{return await t.vault.createFolder(e),!0}catch(n){if(!await t.vault.exists(e))throw n;return!0}}i(bn,"createFolderSafe");function gi(t,e){let n=Ge(e);return t.vault.getAvailablePath(Z(K(e),Se(e,n)),n.slice(1))}i(gi,"getAvailablePath");function yn(t){return t.vault.getMarkdownFiles().sort((e,n)=>e.path.localeCompare(n.path))}i(yn,"getMarkdownFilesSorted");function Ks(t,e,n){let r=Q(t,e);if(t.vault.adapter.insensitive){let o=K(n),s=Se(n),a;for(;a=_e(t,o,!0),!a;)s=Z(Se(o),s),o=K(o);n=Z(a.getParentPrefix(),s)}return r.toLowerCase()===n.toLowerCase()?n:gi(t,n)}i(Ks,"getSafeRenamePath");async function wi(t,e){let n=await kn(t,Q(t,e));return n.files.length===0&&n.folders.length===0}i(wi,"isEmptyFolder");async function kn(t,e){let n=Q(t,e),r={files:[],folders:[]};if((await t.vault.adapter.stat(n))?.type!=="folder")return r;try{return await t.vault.adapter.list(n)}catch(o){if(await t.vault.exists(n))throw o;return r}}i(kn,"listSafe");async function Lc(t,e,n,r={}){let s={...{noticeDelayInMilliseconds:200,shouldFailOnMissingFile:!0,shouldLockEditorWhileProcessing:!0,shouldShowNoticeWhileProcessing:!0},...r},a=new AbortController;s.abortSignal=Tt(s.abortSignal,a.signal);let l=!0,u=null,c=Q(t,e);s.shouldShowNoticeWhileProcessing&&window.setTimeout(()=>{l&&(u=new Wt.Notice(createFragment(d=>{d.appendText(`Processing file ${c}...`),d.createEl("br"),d.createEl("button",{text:"Cancel"}).addEventListener("click",()=>{a.abort()})}),0))},s.noticeDelayInMilliseconds);let f=null;if(s.shouldLockEditorWhileProcessing){for(let d of t.workspace.getLeavesOfType(ar.Markdown))d.view instanceof Wt.MarkdownView&&d.view.file?.path===c&&js(d.view.editor);f=t.workspace.on("active-leaf-change",d=>{d?.view instanceof Wt.MarkdownView&&d.view.file?.path===c&&js(d.view.editor)})}try{await Sr(async d=>{d.throwIfAborted();let h=await qs(t,e);if(d.throwIfAborted(),h===null)return y();let p=await Jt(n,d,h);if(d.throwIfAborted(),p===null)return!1;let w=!0;if(!await Rc(t,e,async b=>{d.throwIfAborted(),await t.vault.process(b,k=>(d.throwIfAborted(),k!==h?(q("Vault:process")("Content has changed since it was read. Retrying...",{actualContent:k,expectedContent:h,path:b.path}),w=!1,k):p)),d.throwIfAborted()}))return y();return w;function y(){if(s.shouldFailOnMissingFile)throw new Error(`File '${c}' not found`);return!0}},s)}finally{l=!1,u?.hide(),f?.e.offref(f);for(let d of t.workspace.getLeavesOfType(ar.Markdown))d.view instanceof Wt.MarkdownView&&d.view.file?.path===c&&Pc(d.view.editor)}}i(Lc,"process");async function qs(t,e){let n=null;return await Rc(t,e,async r=>{await yi(t,r),n=await t.vault.read(r)}),n}i(qs,"readSafe");async function bi(t,e,n){let r=te(t,e,!1,!0),o=Ks(t,e,n);if(r.path.toLowerCase()===o.toLowerCase())return r.path!==n&&await t.vault.rename(r,o),o;let s=Ne(o);await bn(t,s);try{await t.vault.rename(r,o)}catch(a){if(!await t.vault.exists(o)||await t.vault.exists(r.path))throw a}return o}i(bi,"renameSafe");async function yi(t,e){if(!ee(t,e))return;let n=Q(t,e);for(let r of t.workspace.getLeavesOfType(ar.Markdown))r.view instanceof Wt.MarkdownView&&r.view.file?.path===n&&r.view.dirty&&await r.view.save()}i(yi,"saveNote");async function Rc(t,e,n){let r=Q(t,e),o=J(t,r);if(!o||o.deleted)return!1;try{return await n(o),!0}catch(s){if(o=J(t,r),!o||o.deleted)return!1;throw s}}i(Rc,"invokeFileActionSafe");i((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();async function xi(t,e,n,r,o=!0){t.throwIfAborted();let s=await Jt(r,t,e);if(t.throwIfAborted(),s===null)return null;let{frontmatter:a,hasFrontmatterError:l}=Im(e,n);if(!Om(s,e,a,n))return o?null:e;s=Rm(s);let{frontmatterChanged:u,newContent:c}=Tm(s,e,l,n);return await Pm(t,a,u,n),t.throwIfAborted(),Fm(c,a,u)}i(xi,"applyContentChanges");async function er(t,e,n,r={},o=!0){await Lc(t,e,async(s,a)=>Lt(t,e)?await Sm(s,a,Q(t,e),n,o):await xi(s,a,Q(t,e),n,o),r)}i(er,"applyFileChanges");function tr(t){return Hs(t.reference)}i(tr,"isCanvasChange");function Am(t){return tr(t)&&t.reference.type==="file"}i(Am,"isCanvasFileNodeChange");function vm(t){return tr(t)&&t.reference.type==="text"}i(vm,"isCanvasTextNodeChange");function Ht(t){return Ke(t.reference)}i(Ht,"isContentChange");function ki(t){return ye(t.reference)}i(ki,"isFrontmatterChange");function Ci(t){return Fe(t.reference)}i(Ci,"isFrontmatterChangeWithOffsets");function Em(t){return Ci(t)?t:{...t,reference:mi(t.reference)}}i(Em,"toFrontmatterChangeWithOffsets");async function Sm(t,e,n,r,o=!0){let s=await Jt(r,t,e);if(t.throwIfAborted(),s===null)return null;let a=Lm(e),l=new Map;for(let u of s){if(!tr(u)){let f="Only canvas changes are supported for canvas files";throw console.error(f,{change:u,path:n}),new Error(f)}let c=a.nodes[u.reference.nodeIndex];if(!c){let f="Node not found";throw console.error(f,{nodeIndex:u.reference.nodeIndex,path:n}),new Error(f)}if(Am(u)){if(c.file!==u.oldContent)return q("FileChange:applyCanvasChanges")("Content mismatch",{actualContent:c.file,expectedContent:u.oldContent,nodeIndex:u.reference.nodeIndex,path:n,type:"file"}),null;c.file=u.newContent}else if(vm(u)){let f=l.get(u.reference.nodeIndex);f||(f=[],l.set(u.reference.nodeIndex,f)),f.push(u)}}for(let[u,c]of l.entries()){let f=a.nodes[u];if(!f){let h="Node not found";throw console.error(h,{nodeIndex:u,path:n}),new Error(h)}if(typeof f.text!="string"){let h="Node text is not a string";throw console.error(h,{nodeIndex:u,path:n}),new Error(h)}let d=c.map(h=>zt(h.reference.originalReference,h.newContent));f.text=await xi(t,f.text,`${n}.node${String(u)}.VIRTUAL_FILE.md`,d,o)}return JSON.stringify(a,null,"	")}i(Sm,"applyCanvasChanges");function Tm(t,e,n,r){let o="",s=0,a={newContent:"",oldContent:"",reference:{link:"",original:"",position:{end:{col:0,line:0,offset:0},start:{col:0,line:0,offset:0}}}},l=new Map;for(let u of t)if(Ht(u))if(s<=u.reference.position.start.offset)o+=e.slice(s,u.reference.position.start.offset),o+=u.newContent,s=u.reference.position.end.offset,a=u;else{let c=u.reference.position.start.offset-a.reference.position.start.offset,f=u.reference.position.end.offset-a.reference.position.start.offset;if(a.newContent.slice(c,f)!==u.oldContent){let h="Overlapping changes";throw console.error(h,{change:u,lastContentChange:a}),new Error(h)}o=o.slice(0,o.length-a.newContent.length)+a.newContent.slice(0,c)+u.newContent+a.newContent.slice(f)}else if(ki(u))if(n)console.error(`Cannot apply frontmatter change in ${r}, because frontmatter parsing failed`,{change:u});else{let c=l.get(u.reference.key);c||(c=[],l.set(u.reference.key,c)),c.push(Em(u))}return o+=e.slice(s),{frontmatterChanged:l,newContent:o}}i(Tm,"applyContentChangesToText");async function Pm(t,e,n,r){for(let[o,s]of n.entries()){let a=sn(e,o);if(typeof a!="string")return;let l=s.map(c=>({newContent:c.newContent,oldContent:c.oldContent,reference:{link:"",original:"",position:{end:{col:c.reference.endOffset,line:0,offset:c.reference.endOffset},start:{col:c.reference.startOffset,line:0,offset:c.reference.startOffset}}}})),u=await xi(t,a,`${r}.frontmatter.${o}.VIRTUAL_FILE.md`,l);if(u===null)return;jl(e,o,u)}}i(Pm,"applyFrontmatterChangesWithOffsets");function Fm(t,e,n){return n.size>0?vc(t,e):t}i(Fm,"buildFinalContent");function Im(t,e){let n={},r=!1;try{n=pi(t)}catch(o){Pt(new Error(`Frontmatter parsing failed in ${e}`,{cause:o})),r=!0}return{frontmatter:n,hasFrontmatterError:r}}i(Im,"parseFrontmatterSafely");function Lm(t){let e;try{e=JSON.parse(t)}catch{e=null}return(e===null||typeof e!="object")&&(e={}),e}i(Lm,"parseJsonSafe");function Rm(t){return t.sort((e,n)=>Ht(e)&&Ht(n)?e.reference.position.start.offset-n.reference.position.start.offset:Ci(e)&&Ci(n)?e.reference.key.localeCompare(n.reference.key)||e.reference.startOffset-n.reference.startOffset:ki(e)&&ki(n)?e.reference.key.localeCompare(n.reference.key):Ht(e)?-1:1),t.filter((e,n)=>e.oldContent===e.newContent?!1:n===0?!0:!ze(e,t[n-1]))}i(Rm,"sortAndFilterChanges");function Om(t,e,n,r){let o=q("FileChange:validateChanges");for(let s of t)if(Ht(s)){let a=s.reference.position.start.offset,l=s.reference.position.end.offset,u=e.slice(a,l);if(u!==s.oldContent)return o("Content mismatch",{actualContent:u,endOffset:l,expectedContent:s.oldContent,path:r,startOffset:a}),!1}else if(Ci(s)){let a=sn(n,s.reference.key);if(typeof a!="string")return o("Property value is not a string",{frontmatterKey:s.reference.key,path:r,propertyValue:a}),!1;let l=a.slice(s.reference.startOffset,s.reference.endOffset);if(l!==s.oldContent)return o("Content mismatch",{actualContent:l,expectedContent:s.oldContent,frontmatterKey:s.reference.key,path:r,startOffset:s.reference.startOffset}),!1}else if(ki(s)){let a=sn(n,s.reference.key);if(a!==s.oldContent)return o("Content mismatch",{actualContent:a,expectedContent:s.oldContent,frontmatterKey:s.reference.key,path:r}),!1}return!0}i(Om,"validateChanges");i((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();async function Oc(t){await new Promise(e=>{t.metadataCache.onCleanCache(e)})}i(Oc,"ensureMetadataCacheReady");function Je(t){let e=[];return t.links&&e.push(...t.links),t.embeds&&e.push(...t.embeds),t.frontmatterLinks&&e.push(...t.frontmatterLinks),Sc(e),e=e.filter((n,r)=>{if(r===0)return!0;let o=e[r-1];if(!o)return!0;if(Ke(n)&&Ke(o))return n.position.start.offset!==o.position.start.offset;if(ye(n)&&ye(o)){let s=Fe(n)?n.startOffset:0,a=Fe(o)?o.startOffset:0;return n.key!==o.key||Fe(n)!==Fe(o)||s!==a}return!0}),e}i(Je,"getAllLinks");function Gs(t,e){let n=te(t,e,!0);return nr(t,[n],()=>t.metadataCache.getBacklinksForFile(n))}i(Gs,"getBacklinksForFileOrPath");async function ft(t,e,n={}){let r=t.metadataCache.getBacklinksForFile.safe;if(r)return r(e);let o=new ka;return await Sr(async s=>{s.throwIfAborted();let a=te(t,e);await Oc(t),s.throwIfAborted(),o=Gs(t,a);for(let l of o.keys()){s.throwIfAborted();let u=J(t,l);if(!u)return!1;await yi(t,u),s.throwIfAborted();let c=await qs(t,u);if(s.throwIfAborted(),!c)return!1;let f=pi(c),d=o.get(l);if(!d)return!1;for(let h of d){let p;if(Ke(h))p=c.slice(h.position.start.offset,h.position.end.offset);else if(ye(h)){let w=sn(f,h.key);if(typeof w!="string")return!1;let x=mi(h);p=w.slice(x.startOffset,x.endOffset)}else return!0;if(p!==h.original)return!1}}return!0},n),o}i(ft,"getBacklinksForFileSafe");async function ot(t,e){let n=J(t,e);try{if(!n)return null;if(n.deleted)return t.metadataCache.getFileCache(n);await yi(t,n);let r=t.metadataCache.fileCache[n.path];return r&&r.mtime===n.stat.mtime&&r.size===n.stat.size&&t.metadataCache.metadataCache[r.hash]||(await t.metadataCache.computeFileMetadataAsync(n),await Oc(t)),t.metadataCache.getFileCache(n)}catch(r){if(!n||n.deleted)return null;throw r}}i(ot,"getCacheSafe");function Dc(t,e,n){let r=te(t,e,!0);if(!r.deleted)throw new Error("File is existing");t.metadataCache.fileCache[r.path]={hash:r.path,mtime:0,size:0},t.metadataCache.metadataCache[r.path]=n}i(Dc,"registerFileCacheForNonExistingFile");function Mc(t,e){let n=$c(t);for(let r of e)for(;r.deleted;){let o=n.get(r.path)??0;o++,n.set(r.path,o),t.vault.fileMap[r.path]=r,Be(r)&&t.metadataCache.uniqueFileLookup.add(r.name.toLowerCase(),r),r=It(t,Ne(r.path),!0)}}i(Mc,"registerFiles");function nr(t,e,n){try{return Mc(t,e),n()}finally{Bc(t,e)}}i(nr,"tempRegisterFilesAndRun");async function Nc(t,e,n){try{return Mc(t,e),await n()}finally{Bc(t,e)}}i(Nc,"tempRegisterFilesAndRunAsync");function _c(t,e){let n=te(t,e,!0);if(!n.deleted)throw new Error("File is existing");delete t.metadataCache.fileCache[n.path],delete t.metadataCache.metadataCache[n.path]}i(_c,"unregisterFileCacheForNonExistingFile");function Bc(t,e){let n=$c(t);for(let r of e)for(;r.deleted;){let o=n.get(r.path)??1;o--,n.set(r.path,o),o===0&&(n.delete(r.path),delete t.vault.fileMap[r.path],Be(r)&&t.metadataCache.uniqueFileLookup.remove(r.name.toLowerCase(),r)),r=It(t,Ne(r.path),!0)}}i(Bc,"unregisterFiles");function $c(t){return xe(t,"registeredFilesCounts",new Map).value}i($c,"getRegisteredFilesCounts");i((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();function Vc(t){return t.vault.getConfig("newLinkFormat")}i(Vc,"getNewLinkFormat");function Ys(t){return!t.vault.getConfig("useMarkdownLinks")}i(Ys,"shouldUseWikilinks");i((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();var Dm="\\|",Mm=/[\\\x00\x08\x0B\x0C\x0E-\x1F ]/g,Nm=/[\\[\]<>_*~=`$]/g,Hc=/(?<!\\)\|/g,Uc="|",Ai=(t=>(t.AbsolutePathInVault="AbsolutePathInVault",t.ObsidianSettingsDefault="ObsidianSettingsDefault",t.RelativePathToTheSource="RelativePathToTheSource",t.ShortestPathWhenPossible="ShortestPathWhenPossible",t))(Ai||{}),Qs=(t=>(t.Markdown="Markdown",t.ObsidianSettingsDefault="ObsidianSettingsDefault",t.PreserveExisting="PreserveExisting",t.Wikilink="Wikilink",t))(Qs||{});function _m(t){let e=st(t.app,t.link,t.oldSourcePathOrFile??t.newSourcePathOrFile);return e?ea({app:t.app,link:t.link,linkStyle:t.linkStyle,newSourcePathOrFile:t.newSourcePathOrFile,newTargetPathOrFile:e,oldSourcePathOrFile:t.oldSourcePathOrFile,shouldUpdateFileNameAlias:t.shouldUpdateFileNameAlias}):t.link.original}i(_m,"convertLink");async function Xs(t,e,n,r={}){await er(t,e,async(o,s)=>{let a=await ot(t,e);o.throwIfAborted();let l=te(t,e),u=await t.vault.cachedRead(l);return o.throwIfAborted(),s!==u?null:await Qm(a,Lt(t,e),n,o)},r)}i(Xs,"editLinks");function Zs(t){return pe(t,Mm,({substring:e})=>encodeURIComponent(e))}i(Zs,"encodeUrl");function Bm(t){return pe(t,Nm,"\\$&")}i(Bm,"escapeAlias");function st(t,e,n,r=!1){let{linkPath:o}=yt(e.link),s=Q(t,n),a=t.metadataCache.getFirstLinkpathDest(o,s);if(a)return a;if(!r)return null;if(o.startsWith("/"))return te(t,o,!0);let l=Z(K(s),`./${o}`);return l.startsWith("../")?null:te(t,l,!0)}i(st,"extractLinkFile");function vi(t){let{app:e}=t,n={isEmptyEmbedAliasAllowed:!0},r=Zm(e).map(s=>s());t=Object.assign({},n,...r,t);let o=te(e,t.targetPathOrFile,t.isNonExistingFileAllowed);return nr(e,[o],()=>Gm(t))}i(vi,"generateMarkdownLink");function Js(t){let e=t.isEmbed?"!":"";if(t.isWikilink){let l=t.alias?`|${t.alias}`:"";return`${e}[[${t.url}${l}]]`}let n=t.alias??"",o=t.shouldEscapeAlias??!1?Bm(n):n,s=t.shouldUseAngleBrackets?`<${t.url}>`:Zs(t.url),a=t.title?` ${JSON.stringify(t.title)}`:"";return`${e}[${o}](${s}${a})`}i(Js,"generateRawMarkdownLink");function xn(t){let e=$m(t);return e[0]?.raw===t?e[0]:null}i(xn,"parseLink");function $m(t){let e=new Set,n="![",r="@[",o="@",a=pe(t,/\[(?<LinkAlias>!\[.*?\]\(.+?\))\]\((?<Link>.+?)\)/g,(p,w,x)=>`[${o.repeat(w.length)}](${x})`),l=pe(a,n,p=>(e.add(p.offset),r)),c=bc().use(dn).use(Ac,{aliasDivider:Uc}).parse(l),f=[],d=[];Jn(c,p=>{let w;switch(p.type){case"link":w=ng(p,t);break;case"wikiLink":w=rg(p,t);break;default:return}e.has(w.startOffset-1)&&(w.isEmbed=!0,w.startOffset--,w.raw=`!${w.raw}`),f.push(w)}),f.sort((p,w)=>p.startOffset-w.startOffset);let h=0;for(let p of f)zc(t,h,p.startOffset-1,d),h=p.endOffset+1;return zc(t,h,t.length-1,d),f.push(...d),f.sort((p,w)=>p.startOffset-w.startOffset),f}i($m,"parseLinks");function Vm(t){let{app:e,displayText:n,isWikilink:r,newSourcePathOrFile:o,oldSourcePathOrFile:s,oldTargetPath:a,targetPathOrFile:l}=t;if(r===!1)return!1;if(!n)return!0;let u=te(e,l,!0),c=Q(e,o),f=Q(e,s??o),d=K(c),h=K(f),p=new Set;for(let x of[u.path,a]){if(!x)continue;let y=Q(e,x);p.add(y),p.add(Se(y)),p.add(Qt(d,y)),p.add(Qt(h,y))}for(let x of[f,c])p.add(e.metadataCache.fileToLinktext(u,x,!1));let w=pe((0,Cn.normalizePath)(n.split(" > ")[0]??""),/^\.\//g,"").toLowerCase();for(let x of p){if(x.toLowerCase()===w)return!0;let y=K(x),b=Se(x,Ge(x));if(Z(y,b).toLowerCase()===w)return!0}return!1}i(Vm,"shouldResetAlias");function yt(t){let e=(0,Cn.parseLinktext)(On(t));return{linkPath:e.path,subpath:e.subpath}}i(yt,"splitSubpath");function zm(t){return xn(t)?.hasAngleBrackets??!1}i(zm,"testAngleBrackets");function Ei(t){return xn(t)?.isEmbed??!1}i(Ei,"testEmbed");function Wm(t){return xn(t)?.url.startsWith("./")??!1}i(Wm,"testLeadingDot");function Hm(t){return xn(t)?.url.startsWith("/")??!1}i(Hm,"testLeadingSlash");function rr(t){return xn(t)?.isWikilink??!1}i(rr,"testWikilink");function Um(t){return pe(t,/(?<Backslashes>\\+)(?<SpecialCharacter>[!"#$%&'()*+,-./:;<=>?@[\\\]^_`{|}~])/g,(e,n,r)=>{let s=n.length,a=Math.floor(s/2);return"\\".repeat(a)+r})}i(Um,"unescapeAlias");function ea(t){let{app:e,link:n,linkStyle:r,newSourcePathOrFile:o,newTargetPathOrFile:s,oldSourcePathOrFile:a,oldTargetPathOrFile:l,shouldUpdateFileNameAlias:u}=t;if(!s)return n.original;let c=te(e,s,!0),f=Q(e,a??o),d=Q(e,l??s),h=Kc(e,n.original,r),{subpath:p}=yt(n.link),w=!u;if(Lt(e,o)&&Ec(n))return c.path+p;let x=xn(n.original),y;return h&&x?.alias&&(y=x.alias,w=!0),y??=Vm({app:e,displayText:n.displayText,isWikilink:h,newSourcePathOrFile:o,oldSourcePathOrFile:a,oldTargetPath:d,targetPathOrFile:c})?void 0:x?.alias,w||(y===Se(d,Ge(d))?y=c.basename:y===Se(d)&&(y=c.name)),vi({alias:y,app:e,isSingleSubpathAllowed:f===d&&!!x?.alias,linkStyle:r,originalLink:n.original,sourcePathOrFile:o,subpath:p,targetPathOrFile:c})}i(ea,"updateLink");async function Si(t){let{app:e,linkStyle:n,newSourcePathOrFile:r,oldSourcePathOrFile:o,shouldUpdateEmbedOnlyLinks:s,shouldUpdateFileNameAlias:a}=t;Lt(e,r)&&!e.internalPlugins.getEnabledPluginById(Me.Canvas)||await Xs(e,r,l=>{let u=Ei(l.original);if(!(s!==void 0&&s!==u))return _m({app:e,link:l,linkStyle:n,newSourcePathOrFile:r,oldSourcePathOrFile:o,shouldUpdateFileNameAlias:a})},t)}i(Si,"updateLinksInFile");function jm(t,e,n){if(e||n)return t;try{return decodeURIComponent(t)}catch(r){return console.error(`Failed to decode URL ${t}`,r),t}}i(jm,"decodeUrlSafely");function Km(t,e,n){return e<n?t.slice(e,n):void 0}i(Km,"extractAlias");function zc(t,e,n,r){if(e>n)return;let o=t.slice(e,n+1);pe(o,/(?<Url>\S+)/g,(s,a)=>{Ws(a)&&r.push({encodedUrl:Zs(a),endOffset:e+s.offset+a.length,hasAngleBrackets:!1,isEmbed:!1,isExternal:!0,isWikilink:!1,raw:a,startOffset:e+s.offset,url:a})})}i(zc,"extractTextLinks");function qm(t,e,n,r,o){n==="/"&&(n="");let s;if(e.path===n&&r&&o.isSingleSubpathAllowed)s="";else switch(o.linkPathStyle){case"AbsolutePathInVault":s=e.path,o.shouldUseLeadingSlashForAbsolutePaths&&!s.startsWith("/")&&(s=`/${s}`);break;case"RelativePathToTheNote":s=Qt(K(n),e.path),o.shouldUseLeadingDotForRelativePaths&&!s.startsWith(".")&&(s=`./${s}`);break;case"ShortestPathWhenPossible":{let a=ee(t,e)?e.basename:e.name,l=t.metadataCache.getLinkpathDest(a,n);s=l.length===1&&l[0]===e?e.name:e.path;break}default:throw new Error(`Invalid link path style: ${o.linkPathStyle}.`)}return s=o.isWikilink?yo(s,`.${Ft}`):s,s+=r,s}i(qm,"generateLinkText");function Gm(t){let{app:e}=t,n=te(e,t.targetPathOrFile,t.isNonExistingFileAllowed),r=Q(e,t.sourcePathOrFile),o=t.subpath??"",s=eg(t,n),a=qm(e,n,r,o,s);return s.isWikilink?Jm(a,t.alias,s.isEmbed):Ym(a,n,t,s)}i(Gm,"generateMarkdownLinkImpl");function Ym(t,e,n,r){let{app:o}=n,s=n.alias??"";return!s&&(ee(o,e)||!n.isEmptyEmbedAliasAllowed)&&(s=!n.shouldIncludeAttachmentExtensionToEmbedAlias||ee(o,e)?e.basename:e.name),Js({alias:s,isEmbed:r.isEmbed,isWikilink:!1,shouldEscapeAlias:n.shouldEscapeAlias??!1,shouldUseAngleBrackets:r.shouldUseAngleBrackets,url:t})}i(Ym,"generateMarkdownStyleLink");function Jm(t,e,n){return e?.toLowerCase()===t.toLowerCase()?Js({isEmbed:n,isWikilink:!0,url:e}):Js({alias:e,isEmbed:n,isWikilink:!0,url:t})}i(Jm,"generateWikiLink");async function Qm(t,e,n,r){if(r??=ke(),r.throwIfAborted(),!t)return[];let o=[],s=(t.sections??[]).filter(a=>a.type==="table").map(a=>({end:a.position.end.offset,start:a.position.start.offset}));for(let a of Je(t)){r.throwIfAborted();let l=await n(a,r);if(r.throwIfAborted(),l===void 0)continue;let u=zt(a,l);if(e)if(tr(u))o.push(u);else{let c="Unsupported file change";throw console.error(c,u),new Error(c)}else ig(u,s)&&(u.newContent=u.newContent.replaceAll(Hc,Dm)),o.push(u)}return o}i(Qm,"getFileChanges");function Xm(t,e){switch(e??"ObsidianSettingsDefault"){case"AbsolutePathInVault":return"AbsolutePathInVault";case"RelativePathToTheSource":return"RelativePathToTheNote";case"ShortestPathWhenPossible":return"ShortestPathWhenPossible";case"ObsidianSettingsDefault":{let n=Vc(t);switch(n){case"absolute":return"AbsolutePathInVault";case"relative":return"RelativePathToTheNote";case"shortest":return"ShortestPathWhenPossible";default:throw new Error(`Invalid link format: ${n}.`)}}default:throw new Error(`Invalid link path style: ${e}.`)}}i(Xm,"getFinalLinkPathStyle");function Zm(t){return xe(t,"generateMarkdownLinkDefaultOptionsFns",[]).value}i(Zm,"getGenerateMarkdownLinkDefaultOptionsFns");function eg(t,e){let{app:n}=t;return{isEmbed:t.isEmbed??(t.originalLink?Ei(t.originalLink):void 0)??(!(0,Cn.requireApiVersion)("1.10.0")&&!ee(n,e)),isSingleSubpathAllowed:t.isSingleSubpathAllowed??!0,isWikilink:Kc(n,t.originalLink,t.linkStyle),linkPathStyle:Xm(n,t.linkPathStyle),shouldUseAngleBrackets:t.shouldUseAngleBrackets??(t.originalLink?zm(t.originalLink):void 0)??!1,shouldUseLeadingDotForRelativePaths:t.shouldUseLeadingDotForRelativePaths??(t.originalLink?Wm(t.originalLink):void 0)??!1,shouldUseLeadingSlashForAbsolutePaths:t.shouldUseLeadingSlashForAbsolutePaths??(t.originalLink?Hm(t.originalLink):void 0)??!1}}i(eg,"getLinkConfig");function jc(t,e){return e.slice(t.position?.start.offset??0,t.position?.end.offset??0)}i(jc,"getRawLink");function tg(t,e){return t.startsWith("<")||e.startsWith("<")}i(tg,"hasAngleBracketsInLink");function ng(t,e){let o=jc(t,e),s=t.children[0]?.position?.start.offset??1,a=t.children.at(-1)?.position?.end.offset??1,l=e.slice(a+2,(t.position?.end.offset??0)-1),u=tg(o,l),c=Ws(t.url),f=jm(t.url,c,u),d=Km(e,s,a);return{alias:d,encodedUrl:c?Zs(f):void 0,endOffset:t.position?.end.offset??0,hasAngleBrackets:u,isEmbed:!1,isExternal:c,isWikilink:!1,raw:o,startOffset:t.position?.start.offset??0,title:t.title??void 0,unescapedAlias:d===void 0?void 0:Um(d),url:f}}i(ng,"parseLinkNode");function rg(t,e){return{alias:e.includes(Uc)?t.data.alias:void 0,endOffset:t.position?.end.offset??0,isEmbed:!1,isExternal:!1,isWikilink:!0,raw:jc(t,e),startOffset:t.position?.start.offset??0,url:t.value}}i(rg,"parseWikilinkNode");function ig(t,e){return!Ht(t)||!Hc.test(t.newContent)?!1:e.some(n=>n.start<=t.reference.position.start.offset&&t.reference.position.end.offset<=n.end)}i(ig,"shouldEscapeWikilinkDivider");function Kc(t,e,n){switch(n??"PreserveExisting"){case"Markdown":return!1;case"ObsidianSettingsDefault":return Ys(t);case"PreserveExisting":return e===void 0?Ys(t):rr(e);case"Wikilink":return!0;default:throw new Error(`Invalid link style: ${n}.`)}}i(Kc,"shouldUseWikilinkStyle");function qc(t,e){let n=Object.keys(e).map(r=>og(t,r,e[r]));return n.length===1?n[0]:function(){n.forEach(r=>r())}}i(qc,"around");function og(t,e,n){let r=t[e],o=t.hasOwnProperty(e),s=o?r:function(){return Object.getPrototypeOf(t)[e].apply(this,arguments)},a=n(s);return r&&Object.setPrototypeOf(a,r),Object.setPrototypeOf(l,a),t[e]=l,u;function l(...c){return a===s&&t[e]===l&&u(),a.apply(this,c)}i(l,"wrapper");function u(){t[e]===l&&(o?t[e]=s:delete t[e]),a!==s&&(a=s,Object.setPrototypeOf(l,r||Function))}i(u,"remove")}i(og,"around1");i((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();function sg(t,e){return qc(t,e)}i(sg,"around");function Gc(t,e,n){let r=sg(e,n),o=!1;function s(){if(!o)try{r()}finally{o=!0}}return i(s,"uninstallerWrapper"),t.register(s),r}i(Gc,"registerPatch");var Yc=require("obsidian");i((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();async function ta(t,e){let n=_e(t,e);n&&await wi(t,n)&&await kt(t,n)}i(ta,"deleteEmptyFolder");async function ir(t,e){let n=_e(t,e);for(;n;){if(!await wi(t,n))return;let r=n.parent;await ta(t,n),n=r}}i(ir,"deleteEmptyFolderHierarchy");async function kt(t,e,n,r,o){let s=Dn(t,e);if(!s)return!1;let a=Be(s)||(o??!0);if(Be(s)){let l=await ft(t,s);n&&l.clear(n),l.count()!==0&&(r&&new Yc.Notice(Vr(u=>u.obsidianDevUtils.notices.attachmentIsStillUsed,{attachmentPath:s.path})),a=!1)}else if(Mn(s)){let l=await kn(t,s);for(let u of[...l.files,...l.folders])a&&=await kt(t,u,n,r);a&&=await wi(t,s)}if(a)try{await t.fileManager.trashFile(s)}catch(l){await t.vault.exists(s.path)&&(Pt(new Error(`Failed to delete ${s.path}`,{cause:l})),a=!1)}return a}i(kt,"deleteSafe");i((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();var de=(t=>(t.Delete="Delete",t.DeleteWithEmptyParents="DeleteWithEmptyParents",t.Keep="Keep",t))(de||{}),na=class{static{i(this,"DeleteHandler")}constructor(e,n,r,o,s){this.app=e,this.file=n,this.abortSignal=r,this.settingsManager=o,this.deletedMetadataCacheMap=s}async handle(){if(this.abortSignal.throwIfAborted(),q("RenameDeleteHandler:handleDelete")(`Handle Delete ${this.file.path}`),!dt(this.app,this.file))return;let e=this.settingsManager.getSettings();if(!e.shouldHandleDeletions)return;if(e.isPathIgnored?.(this.file.path)){q("RenameDeleteHandler:handleDelete")(`Skipping delete handler of ${this.file.path} as the path is ignored.`);return}let n=this.deletedMetadataCacheMap.get(this.file.path);this.deletedMetadataCacheMap.delete(this.file.path);let r=new Set;if(n){let a=Je(n);for(let l of a){let u=st(this.app,l,this.file.path);u&&(this.settingsManager.isNoteEx(u.path)||(r.add(u.parent?.path??""),await kt(this.app,u,this.file.path,!1,e.emptyAttachmentFolderBehavior!=="Keep")))}}await Qc(this.app,this.settingsManager.getSettings(),Array.from(r)),this.abortSignal.throwIfAborted();let o=await ln(this.app,this.file.path,pt.DeleteNote),s=_e(this.app,o);s&&await Go(this.app,this.file.path,pt.DeleteNote)&&(this.abortSignal.throwIfAborted(),await kt(this.app,s,this.file.path,!1,e.emptyAttachmentFolderBehavior!=="Keep"),this.abortSignal.throwIfAborted())}},ra=class{static{i(this,"HandledRenames")}map=new Map;add(e,n){this.map.set(this.keyToString(e,n),{newPath:n,oldPath:e})}delete(e,n){this.map.delete(this.keyToString(e,n))}has(e,n){return this.map.has(this.keyToString(e,n))}keys(){return this.map.values()}keyToString(e,n){return`${e} -> ${n}`}},ia=class{static{i(this,"MetadataDeletedHandler")}constructor(e,n,r,o,s){this.app=e,this.file=n,this.prevCache=r,this.settingsManager=o,this.deletedMetadataCacheMap=s}handle(){let e=this.settingsManager.getSettings();if(e.shouldHandleDeletions){if(e.isPathIgnored?.(this.file.path)){q("RenameDeleteHandler:handleMetadataDeleted")(`Skipping metadata delete handler of ${this.file.path} as the path is ignored.`);return}ee(this.app,this.file)&&this.prevCache&&this.deletedMetadataCacheMap.set(this.file.path,this.prevCache)}}},oa=class{static{i(this,"Registry")}constructor(e,n,r){this.plugin=e,this.settingsBuilder=n,this.settingsManager=r,this.app=e.app,this.pluginId=e.manifest.id,this.abortSignal=e.abortSignal??ke()}abortSignal;app;deletedMetadataCacheMap=new Map;handledRenames=new ra;interruptedRenamesMap=new Map;pluginId;register(){let e=this.settingsManager.renameDeleteHandlersMap;e.set(this.pluginId,this.settingsBuilder),this.logRegisteredHandlers(),this.plugin.register(()=>{e.delete(this.pluginId),this.logRegisteredHandlers()}),this.plugin.registerEvent(this.app.vault.on("delete",this.handleDelete.bind(this))),this.plugin.registerEvent(this.app.vault.on("rename",this.handleRename.bind(this))),this.plugin.registerEvent(this.app.metadataCache.on("deleted",this.handleMetadataDeleted.bind(this))),Gc(this.plugin,this.app.fileManager,{runAsyncLinkUpdate:i(n=>Object.assign(r=>this.runAsyncLinkUpdate(n,r),{renameDeleteHandlerPatched:!0}),"runAsyncLinkUpdate")})}handleDelete(e){this.shouldInvokeHandler()&&Ve(this.app,n=>new na(this.app,e,n,this.settingsManager,this.deletedMetadataCacheMap).handle(),this.abortSignal)}handleMetadataDeleted(e,n){this.shouldInvokeHandler()&&new ia(this.app,e,n,this.settingsManager,this.deletedMetadataCacheMap).handle()}handleRename(e,n){if(!this.shouldInvokeHandler()||!Be(e))return;let r=e.path;if(q("RenameDeleteHandler:handleRename")(`Handle Rename ${n} -> ${r}`),this.handledRenames.has(n,r)){this.handledRenames.delete(n,r);return}let o=this.settingsManager.getSettings();if(!o.shouldHandleRenames)return;if(o.isPathIgnored?.(n)){q("RenameDeleteHandler:handleRename")(`Skipping rename handler of old path ${n} as the path is ignored.`);return}if(o.isPathIgnored?.(r)){q("RenameDeleteHandler:handleRename")(`Skipping rename handler of new path ${r} as the path is ignored.`);return}let s=this.app.metadataCache.getCache(n)??this.app.metadataCache.getCache(r),a=Gs(this.app,n).data;Ve(this.app,l=>new sa({abortSignal:l,app:this.app,handledRenames:this.handledRenames,interruptedRenamesMap:this.interruptedRenamesMap,newPath:r,oldCache:s,oldPath:n,oldPathBacklinksMap:a,settingsManager:this.settingsManager}).handle(),this.abortSignal)}logRegisteredHandlers(){let e=this.settingsManager.renameDeleteHandlersMap;q("RenameDeleteHandler:logRegisteredHandlers")(`Plugins with registered rename/delete handlers: ${JSON.stringify(Array.from(e.keys()))}`)}async runAsyncLinkUpdate(e,n){if(e.renameDeleteHandlerPatched){await e.call(this.app.fileManager,n);return}await e.call(this.app.fileManager,r=>this.wrapLinkUpdatesHandler(r,n))}shouldInvokeHandler(){let e=this.plugin.manifest.id,n=this.settingsManager.renameDeleteHandlersMap;return Array.from(n.keys())[0]===e}async wrapLinkUpdatesHandler(e,n){let r=!1,o=this.app.vault.on("rename",()=>{r=!0});try{await n(e)}finally{this.app.vault.offref(o)}let s=this.settingsManager.getSettings();!r||!s.shouldHandleRenames||Ln(e,a=>s.isPathIgnored?.(a.sourceFile.path)?(q("RenameDeleteHandler:runAsyncLinkUpdate")(`Roll back to default link update of source file ${a.sourceFile.path} as the path is ignored.`),!0):s.isPathIgnored?.(a.resolvedFile.path)?(q("RenameDeleteHandler:runAsyncLinkUpdate")(`Roll back to default link update of resolved file ${a.resolvedFile.path} as the path is ignored.`),!0):!this.app.internalPlugins.getEnabledPluginById(Me.Canvas)||this.app.plugins.getPlugin("backlink-cache")?!1:a.sourceFile.extension===mr||a.resolvedFile.extension===mr)}},sa=class t{static{i(this,"RenameHandler")}abortSignal;app;handledRenames;interruptedCombinedBacklinksMap;interruptedRenamesMap;newPath;oldCache;oldPath;oldPathBacklinksMap;oldPathLinks;settingsManager;constructor(e){this.app=e.app,this.oldPath=e.oldPath,this.newPath=e.newPath,this.oldPathBacklinksMap=e.oldPathBacklinksMap,this.oldCache=e.oldCache,this.abortSignal=e.abortSignal,this.settingsManager=e.settingsManager,this.interruptedRenamesMap=e.interruptedRenamesMap,this.oldPathLinks=this.oldCache?Je(this.oldCache):[],this.handledRenames=e.handledRenames,this.interruptedCombinedBacklinksMap=e.interruptedCombinedBacklinksMap??new Map}async handle(){if(this.abortSignal.throwIfAborted(),await this.continueInterruptedRenames(),this.abortSignal.throwIfAborted(),await this.refreshLinks(),this.abortSignal.throwIfAborted(),await this.handleCaseCollision())return;this.abortSignal.throwIfAborted();let e=xe(this.app,"renamedFilePaths",new Set).value,n=xe(this.app,"renamedLinkPaths",new Set).value;try{let r=new aa({abortSignal:this.abortSignal,app:this.app,newPath:this.newPath,oldCache:this.oldCache,oldPath:this.oldPath,settingsManager:this.settingsManager});await r.fill(),this.abortSignal.throwIfAborted();let o=new Map;r.initOriginalLinksMap(o),r.initBacklinksMap(this.oldPathBacklinksMap,o,this.oldPath);for(let l of r.keys()){if(l===this.oldPath)continue;let u=(await ft(this.app,l)).data;this.abortSignal.throwIfAborted(),r.initBacklinksMap(u,o,l)}let s=new Set;for(let[l,u]of r.entries()){if(l!==this.oldPath){let c=await this.renameHandled(l,u);this.abortSignal.throwIfAborted(),r.set(l,c)}this.settingsManager.isNoteEx(l)||s.add(K(l))}await Qc(this.app,this.settingsManager.getSettings(),Array.from(s)),this.abortSignal.throwIfAborted();let a=this.settingsManager.getSettings();for(let[l,u]of Array.from(o.entries()).concat(Array.from(this.interruptedCombinedBacklinksMap.entries()))){let c=0;await Xs(this.app,l,f=>{c++;let d=u.get(Hr(f));if(!d)return;let h=r.get(d);if(h)return e.add(l),n.add(`${l}//${String(c)}`),ea({app:this.app,link:f,newSourcePathOrFile:l,newTargetPathOrFile:h,oldTargetPathOrFile:d,shouldUpdateFileNameAlias:a.shouldUpdateFileNameAliases})},{shouldFailOnMissingFile:!1}),this.abortSignal.throwIfAborted()}if(dt(this.app,this.newPath)&&(await Si({app:this.app,newSourcePathOrFile:this.newPath,oldSourcePathOrFile:this.oldPath,shouldFailOnMissingFile:!1,shouldUpdateFileNameAlias:a.shouldUpdateFileNameAliases}),this.abortSignal.throwIfAborted()),!J(this.app,this.newPath)){let l=this.interruptedRenamesMap.get(this.newPath);l||(l=[],this.interruptedRenamesMap.set(this.newPath,l)),l.push({combinedBacklinksMap:o,oldPath:this.oldPath})}}finally{let r=Array.from(this.handledRenames.keys());Ve(this.app,()=>{for(let o of r)this.handledRenames.delete(o.oldPath,o.newPath);n.size!==0&&(new Ti.Notice(`Updated ${String(n.size)} links in ${String(e.size)} files.`),e.clear(),n.clear())},this.abortSignal)}}async continueInterruptedRenames(){let e=this.interruptedRenamesMap.get(this.oldPath);if(e){this.interruptedRenamesMap.delete(this.oldPath);for(let n of e)await new t({abortSignal:this.abortSignal,app:this.app,handledRenames:this.handledRenames,interruptedCombinedBacklinksMap:n.combinedBacklinksMap,interruptedRenamesMap:this.interruptedRenamesMap,newPath:this.newPath,oldCache:this.oldCache,oldPath:n.oldPath,oldPathBacklinksMap:this.oldPathBacklinksMap,settingsManager:this.settingsManager}).handle()}}async handleCaseCollision(){if(!this.app.vault.adapter.insensitive||this.oldPath.toLowerCase()!==this.newPath.toLowerCase())return!1;let e=Z(K(this.newPath),`__temp__${Se(this.newPath)}`);return await this.renameHandled(this.newPath,e),await new t({abortSignal:this.abortSignal,app:this.app,handledRenames:this.handledRenames,interruptedRenamesMap:this.interruptedRenamesMap,newPath:e,oldCache:this.oldCache,oldPath:this.oldPath,oldPathBacklinksMap:this.oldPathBacklinksMap,settingsManager:this.settingsManager}).handle(),await this.app.vault.rename(te(this.app,e),this.newPath),!0}async refreshLinks(){let e=this.app.metadataCache.getCache(this.oldPath)??this.app.metadataCache.getCache(this.newPath),n=e?Je(e):[],r=te(this.app,this.oldPath,!0),o=new Map;await nr(this.app,[r],async()=>{o=(await ft(this.app,r)).data});for(let s of n)this.oldPathLinks.includes(s)||this.oldPathLinks.push(s);for(let[s,a]of o.entries()){let l=this.oldPathBacklinksMap.get(s);l||(l=[],this.oldPathBacklinksMap.set(s,l));for(let u of a)l.includes(u)||l.push(u)}}async renameHandled(e,n){return n=Ks(this.app,e,n),e===n||(this.handledRenames.add(e,n),n=await bi(this.app,e,n)),n}},aa=class{static{i(this,"RenameMap")}abortSignal;app;map=new Map;newPath;oldCache;oldPath;oldPathLinks;settingsManager;constructor(e){this.abortSignal=e.abortSignal,this.app=e.app,this.settingsManager=e.settingsManager,this.oldCache=e.oldCache,this.oldPath=e.oldPath,this.newPath=e.newPath,this.oldPathLinks=this.oldCache?Je(this.oldCache):[]}entries(){return this.map.entries()}async fill(){if(this.abortSignal.throwIfAborted(),this.map.set(this.oldPath,this.newPath),!dt(this.app,this.oldPath))return;let e=this.settingsManager.getSettings(),n=te(this.app,this.oldPath,!0),r="";await Nc(this.app,[n],async()=>{let u=this.oldCache&&n.deleted;u&&Dc(this.app,n,this.oldCache);try{r=await ln(this.app,this.oldPath,pt.RenameNote)}finally{u&&_c(this.app,n)}});let o=e.shouldRenameAttachmentFolder?await ln(this.app,this.newPath,pt.RenameNote):r,s=r==="/",a=_e(this.app,r);if(!a||r===o&&!e.shouldRenameAttachmentFiles)return;let l=[];if(await Go(this.app,this.oldPath,pt.RenameNote))Ti.Vault.recurseChildren(a,u=>{this.abortSignal.throwIfAborted(),Be(u)&&l.push(u)});else for(let u of this.oldPathLinks){this.abortSignal.throwIfAborted();let c=st(this.app,u,this.oldPath);if(c&&(s||c.path.startsWith(r))){let f=await ft(this.app,c);this.abortSignal.throwIfAborted();let d=new Set(f.keys());d.delete(this.oldPath),d.delete(this.newPath),d.size===0&&l.push(c)}}for(let u of l){if(this.abortSignal.throwIfAborted(),this.settingsManager.isNoteEx(u.path))continue;let c;if(e.shouldRenameAttachmentFiles)c=await Wn({app:this.app,context:pt.RenameNote,notePathOrFile:this.newPath,oldAttachmentPathOrFile:u,oldNotePathOrFile:this.oldPath,shouldSkipDuplicateCheck:!0}),this.abortSignal.throwIfAborted();else{let f=s?u.path:Qt(r,u.path),d=Z(o,K(f));c=Z(d,u.name)}if(u.path!==c){if(e.shouldDeleteConflictingAttachments){let f=J(this.app,c);f&&(q("RenameDeleteHandler:fillRenameMap")(`Removing conflicting attachment ${f.path}.`),await this.app.fileManager.trashFile(f),this.abortSignal.throwIfAborted())}else{let f=K(c),d=Ge(c),h=Se(c,d);c=this.app.vault.getAvailablePath(Z(f,h),d.slice(1))}this.map.set(u.path,c)}}}get(e){return this.map.get(e)}initBacklinksMap(e,n,r){for(let[o,s]of e.entries()){let a=this.map.get(o)??o,l=n.get(a)??new Map;n.set(a,l);for(let u of s)l.set(Hr(u),r)}}initOriginalLinksMap(e){for(let n of this.oldPathLinks){let r=st(this.app,n,this.oldPath);if(!r)continue;let o=new Map;o.set(this.newPath,[n]),this.initBacklinksMap(o,e,r.path)}}keys(){return this.map.keys()}set(e,n){this.map.set(e,n)}},la=class{static{i(this,"SettingsManager")}constructor(e){this.app=e,this.renameDeleteHandlersMap=xe(e,"renameDeleteHandlersMap",new Map).value}renameDeleteHandlersMap;getSettings(){let e=Array.from(this.renameDeleteHandlersMap.values()).reverse(),n={};n.isNote=r=>dt(this.app,r),n.isPathIgnored=()=>!1;for(let r of e){let o=r();n.shouldDeleteConflictingAttachments||=o.shouldDeleteConflictingAttachments??!1,o.emptyAttachmentFolderBehavior&&(n.emptyAttachmentFolderBehavior??=o.emptyAttachmentFolderBehavior),n.shouldHandleDeletions||=o.shouldHandleDeletions??!1,n.shouldHandleRenames||=o.shouldHandleRenames??!1,n.shouldRenameAttachmentFiles||=o.shouldRenameAttachmentFiles??!1,n.shouldRenameAttachmentFolder||=o.shouldRenameAttachmentFolder??!1,n.shouldUpdateFileNameAliases||=o.shouldUpdateFileNameAliases??!1;let s=n.isPathIgnored;n.isPathIgnored=l=>s(l)||(o.isPathIgnored?.(l)??!1);let a=n.isNote;n.isNote=l=>a(l)&&(o.isNote?.(l)??!0)}return n.emptyAttachmentFolderBehavior??="Keep",n}isNoteEx(e){return this.getSettings().isNote?.(e)??!1}};function Jc(t,e){new oa(t,e,new la(t.app)).register()}i(Jc,"registerRenameDeleteHandlers");async function Qc(t,e,n){if(e.emptyAttachmentFolderBehavior!=="Keep")for(let r of n)switch(e.emptyAttachmentFolderBehavior){case"Delete":await ta(t,r);break;case"DeleteWithEmptyParents":await ir(t,r);break;default:break}}i(Qc,"cleanupParentFolders");var aP=require("obsidian");var Pi=require("obsidian");var Ct=class extends Map{constructor(n){super();this.title=n}static{i(this,"ConsistencyCheckResult")}add(n,r){this.has(n)||this.set(n,[]);let o=this.get(n);o&&o.push(r)}toString(n,r){if(this.size>0){let o=`# ${this.title} (${String(this.size)} files)
`;for(let s of this.keys()){let a=J(n,s);if(!a)continue;let l=vi({app:n,sourcePathOrFile:r,targetPathOrFile:a});o+=`${l}:
`;for(let u of this.get(s)??[])Ke(u)?o+=`- (line ${String(u.position.start.line+1)}): \`${u.link}\`
`:ye(u)&&(o+=`- (key ${u.key}): \`${u.link}\`
`);o+=`

`}return o}return`# ${this.title}
No problems found

`}},An=class{constructor(e){this.plugin=e;}static{i(this,"LinksHandler")}async checkConsistency(e,n,r,o,s,a){if(this.plugin.settings.isPathIgnored(e.path))return;let l=await ot(this.plugin.app,e.path);if(!l)return;let u=l.links??[],c=l.embeds??[],f=l.frontmatterLinks??[];for(let d of u)await this.isValidLink(d,e.path)||n.add(e.path,d),rr(d.original)&&o.add(e.path,d);for(let d of c)await this.isValidLink(d,e.path)||r.add(e.path,d),rr(d.original)&&s.add(e.path,d);for(let d of f)await this.isValidLink(d,e.path)||a.add(e.path,d)}async convertAllNoteEmbedsPathsToRelative(e,n){return await this.convertAllNoteRefPathsToRelative(e,!0,n)}async convertAllNoteLinksPathsToRelative(e,n){return await this.convertAllNoteRefPathsToRelative(e,!1,n)}async getCachedNotesThatHaveLinkToFile(e){let n=J(this.plugin.app,e);return n?(await ft(this.plugin.app,n)).keys():[]}getFullPathForLink(e,n){({linkPath:e}=yt(e));let r=K(n);return Z(r,e)}async replaceAllNoteWikilinksWithMarkdownLinks(e,n,r){if(this.plugin.settings.isPathIgnored(e))return 0;let o=J(this.plugin.app,e);if(!o)return console.warn(`can't update wikilinks in note, file not found: ${e}`),0;let s=await ot(this.plugin.app,o);if(r.throwIfAborted(),!s)return 0;let l=((n?s.embeds:s.links)??[]).filter(u=>rr(u.original)).length;return await Si({app:this.plugin.app,linkStyle:Qs.Markdown,newSourcePathOrFile:o,shouldUpdateEmbedOnlyLinks:n}),l}async updateChangedPathsInNote(e,n){if(this.plugin.settings.isPathIgnored(e))return;let r=J(this.plugin.app,e);if(!r){console.warn(`can't update links in note, file not found: ${e}`);return}let o=new Map;for(let s of n)o.set(s.oldPath,s.newPath);await this.updateLinks(r,r.path,o)}async convertAllNoteRefPathsToRelative(e,n,r){if(this.plugin.settings.isPathIgnored(e))return[];let o=J(this.plugin.app,e);if(!o)return[];let s=[];return await er(this.plugin.app,o,async(a,l)=>{let u=await ot(this.plugin.app,o);a.throwIfAborted();let c=await this.plugin.app.vault.cachedRead(o);if(a.throwIfAborted(),l!==c)return null;if(!u)return[];let f=(n?u.embeds:u.links)??[],d=[];for(let h of f){let p=this.convertLink({forceRelativePath:!0,link:h,note:o,oldNotePath:e});d.push(zt(h,p)),s.push({newLink:p,old:h})}return d},{abortSignal:r}),s}convertLink({forceRelativePath:e,link:n,note:r,oldNotePath:o,pathChangeMap:s}){let{linkPath:a,subpath:l}=yt(n.link),u=st(this.plugin.app,n,o)?.path??Z(K(o),a),c=s?s.get(u):st(this.plugin.app,n,r.path)?.path??Z(K(r.path),a);if(!c)return n.original;let f=J(this.plugin.app,c)??J(this.plugin.app,u);if(!f)return n.original;let d=n.displayText&&Z(r.parent?.path??"",n.displayText)===u?void 0:n.displayText;return vi({alias:d,app:this.plugin.app,linkPathStyle:e?Ai.RelativePathToTheSource:Ai.ObsidianSettingsDefault,originalLink:n.original,sourcePathOrFile:r.path,subpath:l,targetPathOrFile:f})}async isValidLink(e,n){let{linkPath:r,subpath:o}=yt(e.link),s;r?r.startsWith("/")?s=(0,Pi.normalizePath)(r):s=Z(K(n),r):s=n;let a=J(this.plugin.app,s);if(!a)return!1;if(!o)return!0;let l=a.extension.toLocaleLowerCase();if(l==="pdf")return o.startsWith("#page=");if(l!==Ft)return!1;let u=await ot(this.plugin.app,a);return u?!!(0,Pi.resolveSubpath)(u,o):!1}async updateLinks(e,n,r){await er(this.plugin.app,e,async(o,s)=>{o.throwIfAborted();let a=await ot(this.plugin.app,e);o.throwIfAborted();let l=await this.plugin.app.vault.cachedRead(e);return o.throwIfAborted(),s!==l?null:a?Je(a).map(c=>zt(c,this.convertLink({link:c,note:e,oldNotePath:n,pathChangeMap:r}))):[]})}};var vn=class{constructor(e,n){this.plugin=e;this.lh=n;}static{i(this,"FilesHandler")}async collectAttachmentsForCachedNote(e){if(this.plugin.settings.isPathIgnored(e))return{movedAttachments:[]};let n={movedAttachments:[]},r=await ot(this.plugin.app,e);if(!r)return n;for(let o of Je(r)){let{linkPath:s}=yt(o.link);if(!s)continue;let a=this.lh.getFullPathForLink(s,e);if(n.movedAttachments.findIndex(f=>f.oldPath===a)!==-1)continue;let l=st(this.plugin.app,o,e);if(!l){let f=Ei(o.original)?"embed":"link";console.warn(`${e} has bad ${f} (file does not exist): ${s}`);continue}if(this.isNoteEx(l)||this.plugin.settings.isExcludedFromAttachmentCollecting(l.path))continue;let u=await Wn({app:this.plugin.app,context:"consistent-attachments-and-links",notePathOrFile:e,oldAttachmentPathOrFile:l,shouldSkipDuplicateCheck:!0});if(K(u)===K(l.path))continue;let c=await this.moveAttachment(l,u,[e]);n.movedAttachments=n.movedAttachments.concat(c.movedAttachments)}return n}async deleteEmptyFolders(e){if(this.plugin.settings.isPathIgnored(e))return;e=pr(e,"./");let n=await kn(this.plugin.app,e);for(let r of n.folders)await this.deleteEmptyFolders(r);if(n=await kn(this.plugin.app,e),n.files.length===0&&n.folders.length===0&&(this.plugin.consoleDebug(`delete empty folder: 
   ${e}`),await this.plugin.app.vault.exists(e)))try{await this.plugin.app.vault.adapter.rmdir(e,!1)}catch(r){if(await this.plugin.app.vault.adapter.exists(e))throw r}}isNoteEx(e){if(!e||!dt(this.plugin.app,e))return!1;let n=Q(this.plugin.app,e);return this.plugin.settings.treatAsAttachmentExtensions.every(r=>!n.endsWith(r))}async createFolderForAttachmentFromPath(e){await bn(this.plugin.app,K(e))}async deleteFile(e){if(await this.plugin.app.fileManager.trashFile(e),!!e.parent)switch(this.plugin.settings.emptyAttachmentFolderBehavior){case de.Delete:await kt(this.plugin.app,e.parent,void 0,void 0,!0);break;case de.DeleteWithEmptyParents:await ir(this.plugin.app,e.parent);break;default:break}}async moveAttachment(e,n,r){let o=e.path,s={movedAttachments:[]};if(this.plugin.settings.isPathIgnored(o)||this.isNoteEx(e))return s;if(o===n)return console.warn("Can't move file. Source and destination path the same."),s;await this.createFolderForAttachmentFromPath(n);let a=await this.lh.getCachedNotesThatHaveLinkToFile(o);for(let f of r)a.remove(f);if(o!==e.path)return console.warn("File was moved already"),await this.moveAttachment(e,n,r);let l=e.parent,u=a.length===0,c=J(this.plugin.app,n);if(c&&(this.plugin.settings.shouldDeleteExistingFilesWhenMovingNote?(this.plugin.consoleDebug(`delete: ${n}`),await this.deleteFile(c)):n=gi(this.plugin.app,n)),this.plugin.consoleDebug(`${u?"move":"copy"}
  from: ${o}
  to: ${n}`),s.movedAttachments.push({newPath:n,oldPath:o}),u?await bi(this.plugin.app,e,n):await Ic(this.plugin.app,e,n),l)switch(this.plugin.settings.emptyAttachmentFolderBehavior){case de.Delete:await kt(this.plugin.app,l,void 0,void 0,!0);break;case de.DeleteWithEmptyParents:await ir(this.plugin.app,l);break;default:break}return s}};i((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();var xt=class{static{i(this,"Transformer")}getTransformer(e){if(e===this.id)return this;throw new Error(`Transformer with id ${e} not found`)}transformObjectRecursively(e){return this.transformValueRecursively(e,"")}getTransformerId(e,n){return this.canTransform(e,n)?this.id:null}transformValueRecursively(e,n){let r=this.getTransformerId(e,n);if(r){let a=this.transformValue(e,n);return a===void 0?void 0:{__transformerId:r,transformedValue:a}}if(e===null)return null;if(typeof e!="object")return e;if(Array.isArray(e))return e.map((a,l)=>this.transformValueRecursively(a,String(l)));let o=e;if(o.__transformerId)return this.getTransformer(o.__transformerId).restoreValue(o.transformedValue,n);let s={};for(let a of on(e)){let l=e[a],u=this.transformValueRecursively(l,a);s[a]=u}return s}};i((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();var He=class extends xt{static{i(this,"TypedTransformer")}};i((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();var Fi=class extends He{static{i(this,"DateTransformer")}get id(){return"date"}canTransform(e){return e instanceof Date}restoreValue(e){return new Date(e)}transformValue(e){return e.toISOString()}};var Xc=require("obsidian");i((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();var Ii=class extends He{static{i(this,"DurationTransformer")}get id(){return"duration"}canTransform(e){let n=e??{};return!!n.asHours&&!!n.asMinutes&&!!n.asSeconds&&!!n.asMilliseconds}restoreValue(e){return Xc.moment.duration(e)}transformValue(e){return e.toISOString()}};i((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();var Li=class extends xt{static{i(this,"GroupTransformer")}constructor(e){super(),this.transformers=e}get id(){return"group"}canTransform(e,n){return this.getFirstTransformerThatCanTransform(e,n)!==null}getTransformer(e){return this.transformers.find(n=>n.id===e)??Rn(`No transformer with id ${e} found`)}transformValue(e,n){let r=this.getFirstTransformerThatCanTransform(e,n);if(r===null)throw new Error("No transformer can transform the value");return r.transformValue(e,n)}getTransformerId(e,n){let r=this.getFirstTransformerThatCanTransform(e,n);return r===null?null:r.id}restoreValue(){throw new Error("GroupTransformer does not support restoring values")}getFirstTransformerThatCanTransform(e,n){return this.transformers.find(r=>r.canTransform(e,n))??null}};i((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();var Ri=class extends He{static{i(this,"MapTransformer")}get id(){return"map"}canTransform(e){return e instanceof Map}restoreValue(e){return new Map(e)}transformValue(e){return Array.from(e.entries())}};i((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();var Oi=class extends He{static{i(this,"SetTransformer")}get id(){return"set"}canTransform(e){return e instanceof Set}restoreValue(e){return new Set(e)}transformValue(e){return Array.from(e)}};i((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();var ag="_",Di=class extends xt{static{i(this,"SkipPrivatePropertyTransformer")}get id(){return"skip-private-property"}canTransform(e,n){return n.startsWith(ag)}transformValue(){}restoreValue(){throw new Error("SkipPrivatePropertyTransformer does not support restoring values")}};i((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();var or=class{static{i(this,"TwoWayMap")}keyValueMap=new Map;valueKeyMap=new Map;constructor(e=[]){for(let[n,r]of e)this.set(n,r)}clear(){this.keyValueMap.clear(),this.valueKeyMap.clear()}deleteKey(e){let n=this.getValue(e);n!==void 0&&this.valueKeyMap.delete(n),this.keyValueMap.delete(e)}deleteValue(e){let n=this.getKey(e);n!==void 0&&this.keyValueMap.delete(n),this.valueKeyMap.delete(e)}entries(){return this.keyValueMap.entries()}getKey(e){return this.valueKeyMap.get(e)}getValue(e){return this.keyValueMap.get(e)}hasKey(e){return this.keyValueMap.has(e)}hasValue(e){return this.valueKeyMap.has(e)}keys(){return this.keyValueMap.keys()}set(e,n){this.deleteKey(e),this.deleteValue(n),this.keyValueMap.set(e,n),this.valueKeyMap.set(n,e)}values(){return this.valueKeyMap.keys()}};i((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();var Mi=class extends He{static{i(this,"TwoWayMapTransformer")}get id(){return"two-way-map"}canTransform(e){return e instanceof or}restoreValue(e){return new or(e)}transformValue(e){return Array.from(e.entries())}};i((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();var lg=new Li([new Di,new Fi,new Ii,new Ri,new Oi,new Mi]),Ni=class extends et{static{i(this,"PluginSettingsManagerBase")}constructor(e){super(),this.plugin=e,this.app=e.app,this.defaultSettings=this.createDefaultSettings(),this.currentSettingsWrapper=this.createDefaultSettingsWrapper(),this.lastSavedSettingsWrapper=this.createDefaultSettingsWrapper(),this.propertyNames=on(this.currentSettingsWrapper.settings),this.registerValidators(),this.registerLegacySettingsConverters()}app;defaultSettings;get settingsWrapper(){return this.currentSettingsWrapper}currentSettingsWrapper;lastSavedSettingsWrapper;legacySettingsConverters=[];propertyNames;validators=new Map;async editAndSave(e,n){await this.edit(e),await this.saveToFile(n)}async ensureSafe(e){let n=await this.validate(e);for(let r of this.propertyNames)n[r]&&(e[r]=this.defaultSettings[r])}async getSafeCopy(e){let n=await this.cloneSettings(e);return await this.ensureSafe(n),n}async loadFromFile(e){let n=await this.plugin.loadData();this.lastSavedSettingsWrapper=this.createDefaultSettingsWrapper(),this.currentSettingsWrapper=this.createDefaultSettingsWrapper();try{if(n==null)return;if(typeof n!="object"){console.error(`Invalid settings from data.json. Expected Object, got: ${typeof n}`);return}let r=n,o=await this.rawRecordToSettings(r),s=await this.validate(o);for(let l of this.propertyNames)this.setPropertyImpl(l,o[l],s[l]);this.lastSavedSettingsWrapper=await this.cloneSettingsWrapper(this.currentSettingsWrapper);let a=await this.settingsToRawRecord(this.currentSettingsWrapper.settings);ze(a,n)||await this.saveToFileImpl()}finally{await this.triggerAsync("loadSettings",this.currentSettingsWrapper,e)}}on(e,n,r){return super.on(e,n,r)}async revalidate(){return await this.edit(Re),this.currentSettingsWrapper.validationMessages}async saveToFile(e){ze(this.lastSavedSettingsWrapper.settings,this.currentSettingsWrapper.settings)||(await this.saveToFileImpl(),await this.triggerAsync("saveSettings",this.currentSettingsWrapper,this.lastSavedSettingsWrapper,e),this.lastSavedSettingsWrapper=await this.cloneSettingsWrapper(this.currentSettingsWrapper))}async setProperty(e,n){return await this.edit(r=>{r[e]=n}),this.currentSettingsWrapper.validationMessages[e]}async validate(e){let n={};for(let[r,o]of this.validators.entries()){let s=await o(e[r],e);s&&(n[r]=s)}return n}getTransformer(){return lg}async onLoadRecord(e){for(let n of this.legacySettingsConverters)n(e);await Promise.resolve()}async onSavingRecord(e){await Xe()}registerLegacySettingsConverter(e,n){let r=this;this.legacySettingsConverters.push(o);function o(s){let a=new Set(Object.keys(new e)),l=new Set(r.propertyNames),u=s;n(u);for(let c of Object.keys(u))l.has(c)||a.has(c)&&delete s[c]}i(o,"legacySettingsConverter")}registerLegacySettingsConverters(){}registerValidator(e,n){this.validators.set(e,n)}registerValidators(){}async cloneSettings(e){let n=await this.settingsToRawRecord(e),r=JSON.stringify(n),o=JSON.parse(r);return await this.rawRecordToSettings(o)}async cloneSettingsWrapper(e){return{safeSettings:await this.cloneSettings(e.safeSettings),settings:await this.cloneSettings(e.settings),validationMessages:{...e.validationMessages}}}createDefaultSettingsWrapper(){return{safeSettings:this.createDefaultSettings(),settings:this.createDefaultSettings(),validationMessages:{}}}async edit(e){try{await e(this.currentSettingsWrapper.settings)}finally{let n=await this.validate(this.currentSettingsWrapper.settings);for(let r of this.propertyNames){let o=n[r]??"";this.currentSettingsWrapper.validationMessages[r]=o,this.currentSettingsWrapper.safeSettings[r]=o?this.defaultSettings[r]:this.currentSettingsWrapper.settings[r]}}}isValidPropertyName(e){return typeof e!="string"?!1:this.propertyNames.includes(e)}async rawRecordToSettings(e){e=this.getTransformer().transformObjectRecursively(e),await this.onLoadRecord(e);let n=this.createDefaultSettings();for(let[r,o]of Object.entries(e)){if(!this.isValidPropertyName(r)){q("PluginSettingsManagerBase:rawRecordToSettings")(`Unknown property: ${r}`);continue}typeof o!=typeof this.defaultSettings[r]&&q("PluginSettingsManagerBase:rawRecordToSettings")("Possible invalid value type. It might lead to an unexpected behavior of the plugin. There is also a chance it is a false-negative warning, as we are unable to determine the exact type of the value in runtime.",{defaultValue:this.defaultSettings[r],propertyName:r,value:o}),n[r]=o}return n}async saveToFileImpl(){await this.plugin.saveData(await this.settingsToRawRecord(this.currentSettingsWrapper.settings))}setPropertyImpl(e,n,r){this.currentSettingsWrapper.settings[e]=n,this.currentSettingsWrapper.validationMessages[e]=r??"",this.currentSettingsWrapper.safeSettings[e]=r?this.defaultSettings[e]:n}async settingsToRawRecord(e){let n={};for(let r of this.propertyNames)n[r]=e[r];return await this.onSavingRecord(n),this.getTransformer().transformObjectRecursively(n)}};var Zc=/(?:)/,_i=/$./,Bi=class{static{i(this,"PluginSettings")}consistencyReportFile="consistency-report.md";emptyAttachmentFolderBehavior=de.DeleteWithEmptyParents;shouldChangeNoteBacklinksDisplayText=!0;shouldCollectAttachmentsAutomatically=!1;shouldDeleteAttachmentsWithNote=!1;shouldDeleteExistingFilesWhenMovingNote=!1;shouldMoveAttachmentsWithNote=!1;shouldShowBackupWarning=!0;shouldUpdateLinks=!0;treatAsAttachmentExtensions=[".excalidraw.md"];get excludePaths(){return this._excludePaths}set excludePaths(e){this._excludePaths=e.filter(Boolean),this._excludePathsRegExp=ua(this._excludePaths,_i)}get excludePathsFromAttachmentCollecting(){return this._excludePathsFromAttachmentCollecting}set excludePathsFromAttachmentCollecting(e){this._excludePathsFromAttachmentCollecting=e.filter(Boolean),this._excludePathsFromAttachmentCollectingRegExp=ua(this._excludePathsFromAttachmentCollecting,_i)}get hadDangerousSettingsReverted(){return this._hadDangerousSettingsReverted}get includePaths(){return this._includePaths}set includePaths(e){this._includePaths=e.filter(Boolean),this._includePathsRegExp=ua(this._includePaths,Zc)}_excludePaths=["/consistency-report\\.md$/"];_excludePathsFromAttachmentCollecting=[];_excludePathsFromAttachmentCollectingRegExp=_i;_excludePathsRegExp=_i;_hadDangerousSettingsReverted=!1;_includePaths=[];_includePathsRegExp=Zc;isExcludedFromAttachmentCollecting(e){return this._excludePathsFromAttachmentCollectingRegExp.test(e)}isPathIgnored(e){return!this._includePathsRegExp.test(e)||this._excludePathsRegExp.test(e)}revertDangerousSettings(){this.shouldShowBackupWarning&&(this._hadDangerousSettingsReverted=this.shouldDeleteAttachmentsWithNote||this.shouldDeleteExistingFilesWhenMovingNote||this.shouldMoveAttachmentsWithNote||this.shouldCollectAttachmentsAutomatically,this.shouldDeleteAttachmentsWithNote=!1,this.shouldDeleteExistingFilesWhenMovingNote=!1,this.shouldMoveAttachmentsWithNote=!1,this.shouldCollectAttachmentsAutomatically=!1)}};function ua(t,e){if(t.length===0)return e;let n=t.map(r=>r==="/"?e.source:r.startsWith("/")&&r.endsWith("/")?r.slice(1,-1):r.endsWith("/")?`^${hr(r)}`:`^${hr(r)}(/|$)`).map(r=>`(${r})`).join("|");return new RegExp(n)}i(ua,"makeRegExp");var $i=class extends Ni{static{i(this,"PluginSettingsManager")}createDefaultSettings(){return new Bi}async onLoadRecord(e){await super.onLoadRecord(e);let n=e,r=n.excludePaths??[];if(n.ignoreFiles){for(let o of n.ignoreFiles)r.push(`/${o}$/`);delete n.ignoreFiles}if(n.ignoreFolders){for(let o of n.ignoreFolders??[])r.push(o);delete n.ignoreFolders}r.length>0&&(n.excludePaths=r),n.deleteEmptyFolders!==void 0&&(n.emptyAttachmentFolderBehavior=n.deleteEmptyFolders?de.DeleteWithEmptyParents:de.Keep,delete n.deleteEmptyFolders),n.autoCollectAttachments!==void 0&&(n.shouldCollectAttachmentsAutomatically=n.autoCollectAttachments,delete n.autoCollectAttachments),n.changeNoteBacklinksAlt!==void 0&&(n.shouldChangeNoteBacklinksDisplayText=n.changeNoteBacklinksAlt,delete n.changeNoteBacklinksAlt),n.deleteAttachmentsWithNote!==void 0&&(n.shouldDeleteAttachmentsWithNote=n.deleteAttachmentsWithNote,delete n.deleteAttachmentsWithNote),n.deleteExistFilesWhenMoveNote!==void 0&&(n.shouldDeleteExistingFilesWhenMovingNote=n.deleteExistFilesWhenMoveNote,delete n.deleteExistFilesWhenMoveNote),n.moveAttachmentsWithNote!==void 0&&(n.shouldMoveAttachmentsWithNote=n.moveAttachmentsWithNote,delete n.moveAttachmentsWithNote),n.showBackupWarning!==void 0&&(n.shouldShowBackupWarning=n.showBackupWarning,delete n.showBackupWarning),n.updateLinks!==void 0&&(n.shouldUpdateLinks=n.updateLinks,delete n.updateLinks)}registerValidators(){super.registerValidators(),this.registerValidator("includePaths",ef),this.registerValidator("excludePaths",ef)}};function ef(t){for(let e of t)if(e.startsWith("/")&&e.endsWith("/")){let n=e.slice(1,-1);if(!Ma(n))return`Invalid regular expression ${e}`}}i(ef,"pathsValidator");var Ef=require("obsidian");i((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();function tf(t,e){let n=Object.keys(t).find(r=>t[r]===e);if(n===void 0)throw new Error(`Invalid enum value: ${e}`);return n}i(tf,"getEnumKey");function nf(t,e){let n=t[e];if(n===void 0)throw new Error(`Invalid enum key: ${e}`);return n}i(nf,"getEnumValue");i((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();function Ue(t,e){t.createEl("strong",{cls:"markdown-rendered code"},n=>{n.createEl("code",{text:e})})}i(Ue,"appendCodeBlock");function rf(t){return`${String(t)}px`}i(rf,"toPx");var Ut=require("obsidian");i((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();function Vi(t){let e=t.parentElement;if(!e)throw new Error("Element must be attached to the DOM");if(e.classList.contains(F.SettingComponentWrapper))return e;let n=Array.from(e.children),r=createDiv();j(r,F.SettingComponentWrapper);for(let o of n)r.appendChild(o);return e.appendChild(r),r}i(Vi,"ensureWrapped");var of=require("obsidian");i((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();var ca=class{static{i(this,"AbstractTextComponentWrapper")}constructor(e){this.abstractTextComponent=e}empty(){this.abstractTextComponent.setValue("")}isEmpty(){return this.abstractTextComponent.getValue()===""}setPlaceholderValue(e){return this.abstractTextComponent.setPlaceholder(e),this}};function sf(t){return ug(t)?t:t instanceof of.AbstractTextComponent?new ca(t):null}i(sf,"getTextBasedComponentValue");function ug(t){let e=t;return typeof e.setPlaceholderValue=="function"&&typeof e.isEmpty=="function"}i(ug,"isTextBasedComponent");var we=require("obsidian");i((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();var zi=class{static{i(this,"OverlayValidatorComponent")}constructor(e){this.el=e;let n=Vi(e);this._validatorEl=n.createEl("input",{attr:{tabindex:-1}}),j(this._validatorEl,F.OverlayValidator),this._validatorEl.addEventListener("focus",()=>{this.el.focus()}),this._validatorEl.isActiveElement=this.isElementOrDescendantActive.bind(this);let r=this.el.querySelector("[tabindex]");r||(this.el.getAttr("tabindex")===null&&(this.el.tabIndex=-1),r=this.el),this.el.addEventListener("focusin",()=>{this.forceBlurValidatorEl()}),this.el.addEventListener("click",()=>{r.focus()}),this.el.addEventListener("focusout",()=>{window.setTimeout(()=>{this.isElementOrDescendantActive()||this.forceBlurValidatorEl()},0)})}get validatorEl(){return this._validatorEl}_validatorEl;forceBlurValidatorEl(){this._validatorEl.dispatchEvent(new Event("blur"))}isElementOrDescendantActive(){return this.el.contains(document.activeElement)}},At=class{static{i(this,"ValidatorElementWrapper")}constructor(e){this.validatorEl=e}};function af(t){return cg(t)?t:t instanceof we.ColorComponent?new At(t.colorPickerEl):t instanceof we.DropdownComponent?new At(t.selectEl):t instanceof we.ProgressBarComponent?new zi(t.progressBar):t instanceof we.SearchComponent?new At(t.inputEl):t instanceof we.SliderComponent?new At(t.sliderEl):t instanceof we.TextAreaComponent?new At(t.inputEl):t instanceof we.TextComponent?new At(t.inputEl):t instanceof we.ToggleComponent?new zi(t.toggleEl):null}i(af,"getValidatorComponent");function cg(t){return!!t.validatorEl}i(cg,"isValidatorComponent");var fg=require("obsidian");i((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();function lf(t){return t.validationMessage!==void 0}i(lf,"isValidationMessageHolder");i((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();var fa="PluginSettingsTab",Wi=class extends Ut.PluginSettingTab{static{i(this,"PluginSettingsTabBase")}constructor(e){super(e.app,e),this.plugin=e,j(this.containerEl,F.PluginSettingsTab),this.saveSettingsDebounced=(0,Ut.debounce)(tn(()=>this.plugin.settingsManager.saveToFile(fa)),this.saveSettingsDebounceTimeoutInMilliseconds),this.asyncEventsComponent=new Nr,this.asyncEvents=new et}get isOpen(){return this._isOpen}get saveSettingsDebounceTimeoutInMilliseconds(){return 2e3}_isOpen=!1;asyncEvents;asyncEventsComponent;saveSettingsDebounced;get pluginSettings(){return this.plugin.settingsManager.settingsWrapper.settings}bind(e,n,r){let s={...{componentToPluginSettingsValueConverter:i(S=>S,"componentToPluginSettingsValueConverter"),onChanged:Re,pluginSettingsToComponentValueConverter:i(S=>S,"pluginSettingsToComponentValueConverter"),shouldResetSettingWhenComponentIsEmpty:!0,shouldShowPlaceholderForDefaultValues:!0,shouldShowValidationMessage:!0},...r},a=af(e)?.validatorEl,l=sf(e),u=this.pluginSettings[n],c=this.plugin.settingsManager.defaultSettings[n],f=s.pluginSettingsToComponentValueConverter(c);l?.setPlaceholderValue(f);let d,h=null,p=null;if(a){let S=Vi(a);h=S.createDiv(),j(h,F.Tooltip,F.TooltipValidator),p=h.createSpan();let I=h.createDiv();j(I,F.TooltipArrow),h.hide(),S.appendChild(h)}this.asyncEventsComponent.registerAsyncEvent(this.on("validationMessageChanged",(S,I)=>{n===S&&(d=I,k())}));let w=!1,x=!1;l&&s.shouldShowPlaceholderForDefaultValues&&ze(u,c)?l.empty():e.setValue(s.pluginSettingsToComponentValueConverter(u));let y=!1,k=(0,Ut.debounce)(()=>{requestAnimationFrame(()=>{v()})},100);return e.onChange(async S=>{if(y){y=!1;return}w=!1;let I=this.pluginSettings[n],C,B=!0;if(x=!!l?.isEmpty()&&s.shouldResetSettingWhenComponentIsEmpty,x)C=c;else{let H=s.componentToPluginSettingsValueConverter(S);lf(H)?(d=H.validationMessage,B=!1):C=H}B&&(d=await this.plugin.settingsManager.setProperty(n,C),l&&s.shouldShowPlaceholderForDefaultValues&&!l.isEmpty()&&ze(C,c)&&(w=!0)),k(),B&&await s.onChanged(C,I),this.saveSettingsDebounced()}),a?.addEventListener("focus",()=>{k()}),a?.addEventListener("blur",()=>{k()}),a?.addEventListener("click",()=>{requestAnimationFrame(()=>{k()})}),d=this.plugin.settingsManager.settingsWrapper.validationMessages[n]??"",k(),e;function v(){a?.isActiveElement()||(w?(w=!1,l?.isEmpty()||(y=!0,l?.empty())):x&&(x=!1,l?.isEmpty()&&(y=!0,e.setValue(f)))),a&&(d===""&&(a.setCustomValidity(""),a.checkValidity(),d=a.validationMessage),a.setCustomValidity(d),s.shouldShowValidationMessage?(p&&(p.textContent=d),h?.toggle(!!d)):d&&(0,Ut.setTooltip)(a,d))}i(v,"updateValidatorEl")}display(){this.containerEl.empty(),this._isOpen=!0,this.asyncEventsComponent.load(),this.asyncEventsComponent.registerAsyncEvent(this.plugin.settingsManager.on("loadSettings",this.onLoadSettings.bind(this))),this.asyncEventsComponent.registerAsyncEvent(this.plugin.settingsManager.on("saveSettings",this.onSaveSettings.bind(this)))}hide(){super.hide(),this.saveSettingsDebounced.cancel(),this._isOpen=!1,this.asyncEventsComponent.unload(),this.asyncEventsComponent.load(),Pe(()=>this.hideAsync())}async hideAsync(){await this.plugin.settingsManager.saveToFile(fa)}show(){this.app.setting.openTab(this)}async onLoadSettings(e,n){this.display(),await Xe()}async revalidate(){let e=await this.plugin.settingsManager.revalidate();await this.updateValidations(e)}on(e,n,r){return this.asyncEvents.on(e,n,r)}async onSaveSettings(e,n,r){if(r===fa){await this.updateValidations(e.validationMessages);return}this.display()}async updateValidations(e){for(let[n,r]of Object.entries(e))await this.asyncEvents.triggerAsync("validationMessageChanged",n,r)}};var vf=require("obsidian");var uf=require("obsidian");i((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();var Hi=class extends uf.ValueComponent{static{i(this,"CheckboxComponent")}inputEl;get validatorEl(){return this.inputEl}changeCallback;constructor(e){super(),j(e,F.CheckboxComponent),this.inputEl=e.createEl("input",{type:"checkbox"}),this.inputEl.addEventListener("change",this.onChanged.bind(this))}getValue(){return this.inputEl.checked}onChange(e){return this.changeCallback=e,this}onChanged(){this.changeCallback?.(this.getValue())}setDisabled(e){return super.setDisabled(e),this.inputEl.disabled=e,this}setValue(e){return this.inputEl.checked=e,this}};var ji=require("obsidian");i((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();var Ui=class extends ji.ValueComponent{static{i(this,"CodeHighlighterComponent")}get inputEl(){return this.textAreaComponent.inputEl}get validatorEl(){return this.inputEl}codeEl;placeholder="";preEl;tabSize;textAreaComponent;constructor(e){super(),j(e,F.CodeHighlighterComponent);let n=e.createDiv();j(n,F.SettingComponentWrapper),this.textAreaComponent=new ji.TextAreaComponent(n),this.preEl=n.createEl("pre",{attr:{tabIndex:"-1"}}),this.codeEl=this.preEl.createEl("code",{attr:{tabIndex:"-1"}}),this.inputEl.addEventListener("input",tn(this.updateHighlightedCode.bind(this))),this.inputEl.addEventListener("scroll",this.handleScroll.bind(this)),this.inputEl.addEventListener("keydown",this.handleKeyDown.bind(this));let r=2;this.tabSize=r}empty(){this.setValue("")}getValue(){return this.textAreaComponent.getValue()}isEmpty(){return this.textAreaComponent.getValue()===""}onChange(e){return this.textAreaComponent.onChange(()=>e(this.getValue())),this}setDisabled(e){return super.setDisabled(e),this.textAreaComponent.setDisabled(e),this}setLanguage(e){let n="language-";for(let r of[this.preEl,this.codeEl]){for(let o of Array.from(r.classList))o.startsWith(n)&&r.classList.remove(o);r.classList.add(`${n}${e}`)}return this}setPlaceholder(e){return this.placeholder=e,Pe(this.updateHighlightedCode.bind(this)),this}setPlaceholderValue(e){return this.setPlaceholder(e),this}setTabSize(e){return this.tabSize=e,this}setValue(e){return this.textAreaComponent.setValue(e),Pe(this.updateHighlightedCode.bind(this)),this}handleKeyDown(e){if(e.key!=="Tab")return;if(e.preventDefault(),e.ctrlKey||e.metaKey){let f=Array.from(document.querySelectorAll(':is(a, button, input, select, textarea, [tabindex]):not([tabindex="-1"]):not(:disabled):not([type="hidden"])')),d=f.indexOf(this.inputEl),h=e.shiftKey?-1:1;f[(d+h+f.length)%f.length]?.focus();return}let n=this.getValue(),r=this.inputEl.selectionStart,o=this.inputEl.selectionEnd,s=n.slice(0,r),a=n.slice(o),l=" ".repeat(this.tabSize),u=s;e.shiftKey?s.endsWith(l)&&(u=s.slice(0,-this.tabSize)):u=s+l;let c=`${u}${a}`;this.setValue(c),this.inputEl.selectionStart=u.length,this.inputEl.selectionEnd=u.length}handleScroll(){this.preEl.scrollTop=this.inputEl.scrollTop,this.preEl.scrollLeft=this.inputEl.scrollLeft}async updateHighlightedCode(){this.codeEl.textContent=this.inputEl.value||this.placeholder,(await Ea()).highlightElement(this.codeEl),this.preEl.toggleClass(F.IsPlaceholder,this.isEmpty()),requestAnimationFrame(()=>{let n=Math.max(0,this.inputEl.scrollHeight-this.preEl.scrollHeight);this.preEl.setCssProps({"--bottom-gap":rf(n)}),this.handleScroll()})}};var df=require("obsidian");var Ki=require("obsidian");i((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();var se=class extends Ki.ValueComponent{static{i(this,"TypedTextComponent")}inputEl;get validatorEl(){return this.inputEl}textComponent;constructor(e,n,r){super(),this.textComponent=new Ki.TextComponent(e),this.inputEl=this.textComponent.inputEl,this.inputEl.type=n,j(e,r)}getValue(){return this.valueFromString(this.textComponent.getValue())}onChange(e){return this.textComponent.onChange(()=>e(this.getValue())),this}onChanged(){this.textComponent.onChanged()}setDisabled(e){return super.setDisabled(e),this.textComponent.setDisabled(e),this}setValue(e){return this.textComponent.setValue(this.valueToString(e)),this}valueToString(e){return String(e)}};i((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();var Ie=class extends se{static{i(this,"TypedRangeTextComponent")}setMax(e){return this.inputEl.max=this.valueToString(e),this}setMin(e){return this.inputEl.min=this.valueToString(e),this}setStep(e){return this.inputEl.step=String(e),this}};i((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();var cf=ht(df.moment),ff="YYYY-MM-DD",qi=class extends Ie{static{i(this,"DateComponent")}constructor(e){super(e,"date",F.DateComponent)}valueFromString(e){return cf(e,ff).toDate()}valueToString(e){return cf(e).format(ff)}};var mf=require("obsidian");i((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();var hf=ht(mf.moment),pf="YYYY-MM-DDTHH:mm",Gi=class extends Ie{static{i(this,"DateTimeComponent")}constructor(e){super(e,"datetime-local",F.DateTimeComponent)}valueFromString(e){return hf(e,pf).toDate()}valueToString(e){return hf(e).format(pf)}};i((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();var Yi=class extends se{static{i(this,"EmailComponent")}constructor(e){super(e,"email",F.EmailComponent)}empty(){this.setValue("")}isEmpty(){return this.getValue()===""}setPlaceholderValue(e){return this.textComponent.setPlaceholder(e),this}valueFromString(e){return e}};i((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();var Ji=class extends se{static{i(this,"FileComponent")}constructor(e){super(e,"file",F.FileComponent)}getValue(){return this.inputEl.files?.[0]??null}valueFromString(){return this.getValue()}valueToString(e){return e?.name??""}};var bf=require("obsidian");i((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();var gf=ht(bf.moment),wf="YYYY-MM",Qi=class extends Ie{static{i(this,"MonthComponent")}constructor(e){super(e,"month",F.MonthComponent)}valueFromString(e){let n=gf(e,wf);if(!n.isValid())throw new Error("Invalid month");return{month:n.month()+1,year:n.year()}}valueToString(e){return gf().year(e.year).month(e.month-1).format(wf)}};var Xi=require("obsidian");i((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();var En=class extends Xi.ValueComponent{static{i(this,"MultipleDropdownComponent")}get selectEl(){return this.dropdownComponent.selectEl}get validatorEl(){return this.selectEl}dropdownComponent;constructor(e){super(),this.dropdownComponent=new Xi.DropdownComponent(e),this.dropdownComponent.selectEl.multiple=!0,j(e,F.MultipleDropdownComponent)}addOption(e,n){return this.dropdownComponent.addOption(e,n),this}addOptions(e){return this.dropdownComponent.addOptions(e),this}getValue(){return Array.from(this.dropdownComponent.selectEl.selectedOptions).map(e=>e.value)}onChange(e){return this.dropdownComponent.onChange(()=>e(this.getValue())),this}setDisabled(e){return super.setDisabled(e),this.dropdownComponent.setDisabled(e),this}setValue(e){for(let n of Array.from(this.dropdownComponent.selectEl.options))n.selected=e.includes(n.value);return this}};i((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();var Zi=class extends se{static{i(this,"MultipleEmailComponent")}constructor(e){super(e,"email",F.MultipleEmailComponent),this.inputEl.multiple=!0}valueFromString(e){return e.split(",").map(n=>n.trim())}valueToString(e){return e.join(", ")}};i((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();var eo=class extends se{static{i(this,"MultipleFileComponent")}constructor(e){super(e,"file",F.MultipleFileComponent),this.inputEl.multiple=!0}getValue(){return Array.from(this.inputEl.files??[])}valueFromString(){return this.getValue()}valueToString(e){return e[0]?.name??""}};var no=require("obsidian");i((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();var to=class extends no.ValueComponent{static{i(this,"MultipleTextComponent")}get inputEl(){return this.textAreaComponent.inputEl}get validatorEl(){return this.inputEl}textAreaComponent;constructor(e){super(),this.textAreaComponent=new no.TextAreaComponent(e),j(e,F.MultipleTextComponent)}empty(){this.textAreaComponent.setValue("")}getValue(){return this.textAreaComponent.getValue().split(`
`)}isEmpty(){return this.textAreaComponent.getValue()===""}onChange(e){return this.textAreaComponent.onChange(()=>e(this.getValue())),this}setDisabled(e){return super.setDisabled(e),this.textAreaComponent.setDisabled(e),this}setPlaceholder(e){return this.textAreaComponent.setPlaceholder(e),this}setPlaceholderValue(e){return this.setPlaceholder(this.valueToString(e)),this}setValue(e){return this.textAreaComponent.setValue(this.valueToString(e)),this}valueToString(e){return e.join(`
`)}};i((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();var ro=class extends Ie{static{i(this,"NumberComponent")}constructor(e){super(e,"number",F.NumberComponent)}empty(){this.textComponent.setValue("")}isEmpty(){return this.textComponent.getValue()===""}setPlaceholder(e){return this.textComponent.setPlaceholder(e),this}setPlaceholderValue(e){return this.textComponent.setPlaceholder(this.valueToString(e)),this}valueFromString(e){return parseInt(e,10)}};i((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();var io=class extends se{static{i(this,"PasswordComponent")}constructor(e){super(e,"password",F.PasswordComponent)}setPlaceholder(e){return this.textComponent.setPlaceholder(e),this}valueFromString(e){return e}};i((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();var oo=class extends se{static{i(this,"TelephoneComponent")}constructor(e){super(e,"tel",F.TelephoneComponent)}empty(){this.textComponent.setValue("")}isEmpty(){return this.textComponent.getValue()===""}setPlaceholderValue(e){return this.textComponent.setPlaceholder(e),this}valueFromString(e){return e}};var da=require("obsidian");i((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();var so=class extends Ie{static{i(this,"TimeComponent")}constructor(e){super(e,"time",F.TimeComponent)}valueFromString(e){return da.moment.duration(e)}valueToString(e){let n;return e.milliseconds()>0?n="HH:mm:ss.SSS":e.seconds()>0?n="HH:mm:ss":n="HH:mm",da.moment.utc(e.asMilliseconds()).format(n)}};var yf=require("obsidian");i((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();var ao=class extends yf.ValueComponent{static{i(this,"TriStateCheckboxComponent")}inputEl;get validatorEl(){return this.inputEl}changeCallback;constructor(e){super(),j(e,F.TriStateCheckboxComponent),this.inputEl=e.createEl("input",{type:"checkbox"}),this.inputEl.addEventListener("change",this.onChanged.bind(this))}getValue(){return this.inputEl.indeterminate?null:this.inputEl.checked}onChange(e){return this.changeCallback=e,this}onChanged(){this.changeCallback?.(this.getValue())}setDisabled(e){return super.setDisabled(e),this.inputEl.disabled=e,this}setValue(e){return this.inputEl.indeterminate=e===null,this.inputEl.checked=e??!1,this}};var uo=require("obsidian");i((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();var lo=class extends uo.ValueComponent{static{i(this,"TypedDropdownComponent")}get selectEl(){return this.dropdownComponent.selectEl}get validatorEl(){return this.selectEl}dropdownComponent;values=[];constructor(e){super(),this.dropdownComponent=new uo.DropdownComponent(e),j(e,F.TypedDropdownComponent)}addOption(e,n){let r=this.values.indexOf(e);return r===-1&&(this.values.push(e),r=this.values.length-1),this.dropdownComponent.addOption(String(r),n),this}addOptions(e){for(let[n,r]of e.entries())this.addOption(n,r);return this}getValue(){return this.values[this.dropdownComponent.selectEl.selectedIndex]??null}onChange(e){return this.dropdownComponent.onChange(()=>e(this.getValue())),this}setDisabled(e){return super.setDisabled(e),this.dropdownComponent.setDisabled(e),this}setValue(e){let n=e===null?-1:this.values.indexOf(e);return this.dropdownComponent.selectEl.selectedIndex=n,this}};var kf=require("obsidian");i((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();var co=class extends kf.ValueComponent{static{i(this,"TypedMultipleDropdownComponent")}get selectEl(){return this.multipleDropdownComponent.selectEl}get validatorEl(){return this.selectEl}multipleDropdownComponent;values=[];constructor(e){super(),this.multipleDropdownComponent=new En(e),j(e,F.TypedMultipleDropdownComponent)}addOption(e,n){let r=this.values.indexOf(e);return r===-1&&(this.values.push(e),r=this.values.length-1),this.multipleDropdownComponent.addOption(String(r),n),this}addOptions(e){for(let[n,r]of e.entries())this.addOption(n,r);return this}getValue(){return this.multipleDropdownComponent.getValue().map(n=>parseInt(n,10)).map(n=>this.values[n]).filter(n=>n!==void 0)}onChange(e){return this.multipleDropdownComponent.onChange(()=>e(this.getValue())),this}setDisabled(e){return super.setDisabled(e),this.multipleDropdownComponent.setDisabled(e),this}setValue(e){let n=e.map(r=>this.values.indexOf(r)).filter(r=>r!==-1);return this.multipleDropdownComponent.setValue(n.map(r=>String(r))),this}};i((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();var fo=class extends se{static{i(this,"UrlComponent")}constructor(e){super(e,"url",F.UrlComponent)}empty(){this.setValue("")}isEmpty(){return this.getValue()===""}setPlaceholderValue(e){return this.textComponent.setPlaceholder(e),this}valueFromString(e){return e}};var Af=require("obsidian");i((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();var Cf=ht(Af.moment),xf="YYYY-[W]WW",ho=class extends Ie{static{i(this,"WeekComponent")}constructor(e){super(e,"week",F.WeekComponent)}valueFromString(e){let n=Cf(e,xf);if(!n.isValid())throw new Error("Invalid week");return{weekNumber:n.isoWeek(),year:n.year()}}valueToString(e){return Cf().year(e.year).isoWeek(e.weekNumber).format(xf)}};i((function(){if(globalThis.process)return;let e={browser:!0,cwd(){return"/"},env:{},platform:"android"};globalThis.process=e}),"initEsm")();var Ee=class extends vf.Setting{static{i(this,"SettingEx")}addCheckbox(e){return this.addComponent(Hi,e)}addCodeHighlighter(e){return this.addComponent(Ui,e)}addComponent(e,n){let r=new e(this.controlEl);return this.components.push(r),n(r),this}addDate(e){return this.addComponent(qi,e)}addDateTime(e){return this.addComponent(Gi,e)}addEmail(e){return this.addComponent(Yi,e)}addFile(e){return this.addComponent(Ji,e)}addMonth(e){return this.addComponent(Qi,e)}addMultipleDropdown(e){return this.addComponent(En,e)}addMultipleEmail(e){return this.addComponent(Zi,e)}addMultipleFile(e){return this.addComponent(eo,e)}addMultipleText(e){return this.addComponent(to,e)}addNumber(e){return this.addComponent(ro,e)}addPassword(e){return this.addComponent(io,e)}addTelephone(e){return this.addComponent(oo,e)}addTime(e){return this.addComponent(so,e)}addTriStateCheckbox(e){return this.addComponent(ao,e)}addTypedDropdown(e){return this.addComponent(lo,e)}addTypedMultipleDropdown(e){return this.addComponent(co,e)}addUrl(e){return this.addComponent(fo,e)}addWeek(e){return this.addComponent(ho,e)}};var po=class extends Wi{static{i(this,"PluginSettingsTab")}display(){super.display(),this.containerEl.empty();let e="Move Attachments with Note";new Ee(this.containerEl).setName(e).setDesc("Automatically move attachments when a note is relocated. This includes attachments located in the same folder or any of its subfolders.").addToggle(s=>this.bind(s,"shouldMoveAttachmentsWithNote",{onChanged:i(async()=>{await this.checkDangerousSetting("shouldMoveAttachmentsWithNote",e)},"onChanged")}));let n="Delete Unused Attachments with Note";new Ee(this.containerEl).setName(n).setDesc("Automatically remove attachments that are no longer referenced in other notes when the note is deleted.").addToggle(s=>this.bind(s,"shouldDeleteAttachmentsWithNote",{onChanged:i(async()=>{await this.checkDangerousSetting("shouldDeleteAttachmentsWithNote",n)},"onChanged")})),new Ee(this.containerEl).setName("Update links").setDesc("Automatically update links to attachments and other notes when moving notes or attachments.").addToggle(s=>this.bind(s,"shouldUpdateLinks")),new Ee(this.containerEl).setName("Empty attachment folder behavior").setDesc(createFragment(s=>{s.appendText("When the attachment folder becomes empty, "),s.createEl("br"),Ue(s,"Keep"),s.appendText(" - will keep the empty attachment folder, "),s.createEl("br"),Ue(s,"Delete"),s.appendText(" - will delete the empty attachment folder, "),s.createEl("br"),Ue(s,"Delete with empty parents"),s.appendText(" - will delete the empty attachment folder and its empty parent folders.")})).addDropdown(s=>{s.addOptions({[de.Keep]:"Keep",[de.Delete]:"Delete",[de.DeleteWithEmptyParents]:"Delete with empty parents"}),this.bind(s,"emptyAttachmentFolderBehavior",{componentToPluginSettingsValueConverter:i(a=>nf(de,a),"componentToPluginSettingsValueConverter"),pluginSettingsToComponentValueConverter:i(a=>tf(de,a),"pluginSettingsToComponentValueConverter")})});let r="Delete Duplicate Attachments on Note Move";new Ee(this.containerEl).setName(r).setDesc("Automatically delete attachments when moving a note if a file with the same name exists in the destination folder. If disabled, the file will be renamed and moved.").addToggle(s=>this.bind(s,"shouldDeleteExistingFilesWhenMovingNote",{onChanged:i(async()=>{await this.checkDangerousSetting("shouldDeleteExistingFilesWhenMovingNote",r)},"onChanged")})),new Ee(this.containerEl).setName("Update backlink text on note rename").setDesc("When a note is renamed, its linked references are automatically updated. If this option is enabled, the text of backlinks to this note will also be modified.").addToggle(s=>this.bind(s,"shouldChangeNoteBacklinksDisplayText")),new Ee(this.containerEl).setName("Consistency report filename").setDesc("Specify the name of the file for the consistency report.").addText(s=>{this.bind(s,"consistencyReportFile")});let o="Auto Collect Attachments";new Ee(this.containerEl).setName(o).setDesc("Automatically collect attachments when the note is edited.").addToggle(s=>this.bind(s,"shouldCollectAttachmentsAutomatically",{onChanged:i(async()=>{await this.checkDangerousSetting("shouldCollectAttachmentsAutomatically",o)},"onChanged")})),new Ee(this.containerEl).setName("Include paths").setDesc(createFragment(s=>{s.appendText("Include notes from the following paths"),s.createEl("br"),s.appendText("Insert each path on a new line"),s.createEl("br"),s.appendText("You can use path string or "),Ue(s,"/regular expression/"),s.createEl("br"),s.appendText("If the setting is empty, all notes are included")})).addMultipleText(s=>{this.bind(s,"includePaths")}),new Ee(this.containerEl).setName("Exclude paths").setDesc(createFragment(s=>{s.appendText("Exclude notes from the following paths"),s.createEl("br"),s.appendText("Insert each path on a new line"),s.createEl("br"),s.appendText("You can use path string or "),Ue(s,"/regular expression/"),s.createEl("br"),s.appendText("If the setting is empty, no notes are excluded")})).addMultipleText(s=>{this.bind(s,"excludePaths")}),new Ee(this.containerEl).setName("Exclude paths from attachment collecting").setDesc(createFragment(s=>{s.appendText("Exclude attachments from the following paths when "),Ue(s,"Collect attachments"),s.appendText(" command is executed."),s.createEl("br"),s.appendText("Insert each path on a new line"),s.createEl("br"),s.appendText("You can use path string or "),Ue(s,"/regular expression/"),s.createEl("br"),s.appendText("If the setting is empty, no paths are excluded from attachment collecting.")})).addMultipleText(s=>{this.bind(s,"excludePathsFromAttachmentCollecting")}),new Ee(this.containerEl).setName("Treat as attachment extensions").setDesc(createFragment(s=>{s.appendText("Treat files with these extensions as attachments."),s.createEl("br"),s.appendText("By default, "),Ue(s,".md"),s.appendText(" and "),Ue(s,".canvas"),s.appendText(" linked files are not treated as attachments and are not moved with the note."),s.createEl("br"),s.appendText("You can add custom extensions, e.g. "),Ue(s,".foo.md"),s.appendText(", "),Ue(s,".bar.canvas"),s.appendText(", to override this behavior.")})).addMultipleText(s=>{this.bind(s,"treatAsAttachmentExtensions")})}async checkDangerousSetting(e,n){this.plugin.settings[e]&&await Mr({app:this.app,message:createFragment(r=>{r.createDiv({cls:"community-modal-readme"},o=>{o.appendText("You enabled "),o.createEl("strong",{cls:"markdown-rendered-code",text:n}),o.appendText(" setting. Without proper configuration it might lead to inconvenient attachment rearrangements or even data loss in your vault."),o.createEl("br"),o.appendText("It is "),o.createEl("strong",{text:"STRONGLY"}),o.appendText(" recommended to backup your vault before using the plugin."),o.createEl("br"),o.createEl("a",{href:"https://github.com/dy-sh/obsidian-consistent-attachments-and-links?tab=readme-ov-file",text:"Read more"}),o.appendText(" about how to use the plugin.")})}),title:createFragment(r=>{(0,Ef.setIcon)(r.createSpan(),"triangle-alert"),r.appendText(" Consistent Attachments and Links")})})}};var mo=class extends zr{static{i(this,"Plugin")}deletedNoteCache=new Map;linksHandler=new An(this);filesHandler=new vn(this,this.linksHandler);async onLoadSettings(e,n){await super.onLoadSettings(e,n),e.settings.revertDangerousSettings()}async onSaveSettings(e,n,r){await super.onSaveSettings(e,n,r),this.linksHandler=new An(this),this.filesHandler=new vn(this,this.linksHandler)}createSettingsManager(){return new $i(this)}createSettingsTab(){return new po(this)}async onLayoutReady(){await this.showBackupWarning(),this.registerEvent(this.app.metadataCache.on("deleted",(e,n)=>{n&&this.handleDeletedMetadata(e,n)})),this.registerEvent(this.app.metadataCache.on("changed",e=>{Ve(this.app,n=>this.handleMetadataCacheChanged(e,n),this.abortSignal)}))}async onloadImpl(){await super.onloadImpl(),Jc(this,()=>({emptyAttachmentFolderBehavior:this.settings.emptyAttachmentFolderBehavior,isNote:i(n=>this.filesHandler.isNoteEx(n),"isNote"),isPathIgnored:i(n=>this.settings.isPathIgnored(n),"isPathIgnored"),shouldDeleteConflictingAttachments:this.settings.shouldDeleteExistingFilesWhenMovingNote,shouldHandleDeletions:this.settings.shouldDeleteAttachmentsWithNote,shouldHandleRenames:this.settings.shouldUpdateLinks,shouldRenameAttachmentFolder:this.settings.shouldMoveAttachmentsWithNote,shouldUpdateFileNameAliases:this.settings.shouldChangeNoteBacklinksDisplayText})),this.addCommand({callback:i(()=>this.collectAllAttachments(),"callback"),id:"collect-all-attachments",name:"Collect all attachments"}),this.addCommand({checkCallback:i(e=>this.collectAttachmentsCurrentFolder(e),"checkCallback"),id:"collect-attachments-current-folder",name:"Collect attachments in current folder"}),this.addCommand({checkCallback:this.collectAttachmentsCurrentNote.bind(this),id:"collect-attachments-current-note",name:"Collect attachments in current note"}),this.addCommand({callback:i(()=>this.deleteEmptyFolders(),"callback"),id:"delete-empty-folders",name:"Delete empty folders"}),this.addCommand({callback:i(()=>this.convertAllLinkPathsToRelative(this.abortSignal),"callback"),id:"convert-all-link-paths-to-relative",name:"Convert all link paths to relative"}),this.addCommand({checkCallback:this.convertAllLinkPathsToRelativeCurrentNote.bind(this),id:"convert-all-link-paths-to-relative-current-note",name:"Convert all link paths to relative in current note"}),this.addCommand({callback:i(()=>this.convertAllEmbedsPathsToRelative(),"callback"),id:"convert-all-embed-paths-to-relative",name:"Convert all embed paths to relative"}),this.addCommand({checkCallback:this.convertAllEmbedsPathsToRelativeCurrentNote.bind(this),id:"convert-all-embed-paths-to-relative-current-note",name:"Convert all embed paths to relative in current note"}),this.addCommand({callback:i(()=>this.replaceAllWikilinksWithMarkdownLinks(),"callback"),id:"replace-all-wikilinks-with-markdown-links",name:"Replace all wikilinks with Markdown links"}),this.addCommand({checkCallback:this.replaceAllWikilinksWithMarkdownLinksCurrentNote.bind(this),id:"replace-all-wikilinks-with-markdown-links-current-note",name:"Replace all wikilinks with Markdown links in current note"}),this.addCommand({callback:i(()=>this.replaceAllWikiEmbedsWithMarkdownEmbeds(),"callback"),id:"replace-all-wiki-embeds-with-markdown-embeds",name:"Replace all wiki embeds with Markdown embeds"}),this.addCommand({checkCallback:this.replaceAllWikiEmbedsWithMarkdownEmbedsCurrentNote.bind(this),id:"replace-all-wiki-embeds-with-markdown-embeds-current-note",name:"Replace all wiki embeds with Markdown embeds in current note"}),this.addCommand({callback:i(()=>this.reorganizeVault(),"callback"),id:"reorganize-vault",name:"Reorganize vault"}),this.addCommand({callback:i(()=>this.checkConsistency(),"callback"),id:"check-consistency",name:"Check vault consistency"}),this.registerEvent(this.app.workspace.on("file-menu",(e,n)=>{this.handleFileMenu(e,n)})),this.linksHandler=new An(this),this.filesHandler=new vn(this,this.linksHandler)}async checkConsistency(){await this.saveAllOpenNotes();let e=new Ct("Bad links"),n=new Ct("Bad embeds"),r=new Ct("Wiki links"),o=new Ct("Wiki embeds"),s=new Ct("Bad frontmatter links");await Ot({abortSignal:this.abortSignal,buildNoticeMessage:i((f,d)=>`Checking note ${d} - ${f.path}`,"buildNoticeMessage"),items:yn(this.app),processItem:i(async f=>{await this.linksHandler.checkConsistency(f,e,n,r,o,s)},"processItem"),progressBarTitle:"Consistent Attachments and Links: Checking vault consistency...",shouldContinueOnError:!0,shouldShowProgressBar:!0});let a=this.settings.consistencyReportFile,l=[e,n,r,o,s].map(f=>f.toString(this.app,a)).join("");await bn(this.app,K(a));let u=await za(this.app,a);await this.app.vault.modify(u,l);let c=!1;this.app.workspace.iterateAllLeaves(f=>{f.getDisplayText()!==""&&a.startsWith(f.getDisplayText())&&(c=!0)}),c||await this.app.workspace.openLinkText(a,"/",!1)}async collectAllAttachments(){await this.collectAttachmentsInFolder("/",this.abortSignal)}async collectAttachments(e,n,r=!0){if(n.throwIfAborted(),this.settings.isPathIgnored(e.path)){r&&new ne.Notice("Note path is ignored");return}await this.saveAllOpenNotes(),n.throwIfAborted();let o=await this.filesHandler.collectAttachmentsForCachedNote(e.path);n.throwIfAborted(),o.movedAttachments.length>0&&(await this.linksHandler.updateChangedPathsInNote(e.path,o.movedAttachments),n.throwIfAborted()),o.movedAttachments.length===0?r&&new ne.Notice("No files found that need to be moved"):new ne.Notice(`Moved ${String(o.movedAttachments.length)} attachment${o.movedAttachments.length>1?"s":""}`)}collectAttachmentsCurrentFolder(e){let n=this.app.workspace.getActiveFile();return!n||!ee(this.app,n)?!1:(e||Ve(this.app,r=>this.collectAttachmentsInFolder(n.parent?.path??"/",r),this.abortSignal),!0)}collectAttachmentsCurrentNote(e){let n=this.app.workspace.getActiveFile();return!n||!ee(this.app,n)?!1:(e||Ve(this.app,r=>this.collectAttachments(n,r),this.abortSignal),!0)}async collectAttachmentsInFolder(e,n){n.throwIfAborted();let r=0,o=0;await this.saveAllOpenNotes(),await Ot({abortSignal:n,buildNoticeMessage:i((s,a)=>`Collecting attachments ${a} - ${s.path}`,"buildNoticeMessage"),items:Va(this.app,e,!0),processItem:i(async s=>{if(n.throwIfAborted(),this.settings.isPathIgnored(s.path))return;let a=await this.filesHandler.collectAttachmentsForCachedNote(s.path);n.throwIfAborted(),a.movedAttachments.length>0&&(await this.linksHandler.updateChangedPathsInNote(s.path,a.movedAttachments),n.throwIfAborted(),r+=a.movedAttachments.length,o++)},"processItem"),progressBarTitle:"Consistent Attachments and Links: Collecting attachments...",shouldContinueOnError:!0,shouldShowProgressBar:!0}),r===0?new ne.Notice("No files found that need to be moved"):new ne.Notice(`Moved ${String(r)} attachment${r>1?"s":""} from ${String(o)} note${o>1?"s":""}`)}async convertAllEmbedsPathsToRelative(){await this.saveAllOpenNotes();let e=0,n=0;await Ot({abortSignal:this.abortSignal,buildNoticeMessage:i((r,o)=>`Converting embed paths to relative ${o} - ${r.path}`,"buildNoticeMessage"),items:yn(this.app),processItem:i(async r=>{if(this.settings.isPathIgnored(r.path))return;let o=await this.linksHandler.convertAllNoteEmbedsPathsToRelative(r.path,this.abortSignal);o.length>0&&(e+=o.length,n++)},"processItem"),progressBarTitle:"Consistent Attachments and Links: Converting embed paths to relative...",shouldContinueOnError:!0,shouldShowProgressBar:!0}),e===0?new ne.Notice("No embeds found that need to be converted"):new ne.Notice(`Converted ${String(e)} embed${e>1?"s":""} from ${String(n)} note${n>1?"s":""}`)}convertAllEmbedsPathsToRelativeCurrentNote(e){let n=this.app.workspace.getActiveFile();return!n||!ee(this.app,n)?!1:(e||Ve(this.app,In(r=>this.linksHandler.convertAllNoteEmbedsPathsToRelative(n.path,r)),this.abortSignal),!0)}async convertAllLinkPathsToRelative(e){e.throwIfAborted(),await this.saveAllOpenNotes(),e.throwIfAborted();let n=0,r=0;await Ot({abortSignal:e,buildNoticeMessage:i((o,s)=>`Converting link paths to relative ${s} - ${o.path}`,"buildNoticeMessage"),items:yn(this.app),processItem:i(async o=>{if(this.settings.isPathIgnored(o.path))return;let s=await this.linksHandler.convertAllNoteLinksPathsToRelative(o.path,e);s.length>0&&(n+=s.length,r++)},"processItem"),progressBarTitle:"Consistent Attachments and Links: Converting link paths to relative...",shouldContinueOnError:!0,shouldShowProgressBar:!0}),n===0?new ne.Notice("No links found that need to be converted"):new ne.Notice(`Converted ${String(n)} link${n>1?"s":""} from ${String(r)} note${r>1?"s":""}`)}convertAllLinkPathsToRelativeCurrentNote(e){let n=this.app.workspace.getActiveFile();return!n||!ee(this.app,n)?!1:(e||Ve(this.app,In(r=>this.linksHandler.convertAllNoteLinksPathsToRelative(n.path,r)),this.abortSignal),!0)}async deleteEmptyFolders(){await this.filesHandler.deleteEmptyFolders("/")}handleDeletedMetadata(e,n){!this.settings.shouldDeleteAttachmentsWithNote||this.settings.isPathIgnored(e.path)||!ee(this.app,e)||this.deletedNoteCache.set(e.path,n)}handleFileMenu(e,n){Mn(n)&&e.addItem(r=>{r.setTitle("Collect attachments in folder").setIcon("download").onClick(()=>this.collectAttachmentsInFolder(n.path,this.abortSignal))})}async handleMetadataCacheChanged(e,n){if(n.throwIfAborted(),!this.settings.shouldCollectAttachmentsAutomatically)return;let r=document.querySelector(".suggestion-container");r&&r.style.display!=="none"||await this.collectAttachments(e,n,!1)}async reorganizeVault(){await this.saveAllOpenNotes(),await this.replaceAllWikilinksWithMarkdownLinks(),await this.replaceAllWikiEmbedsWithMarkdownEmbeds(),await this.convertAllEmbedsPathsToRelative(),await this.convertAllLinkPathsToRelative(this.abortSignal),await this.collectAllAttachments(),await this.deleteEmptyFolders(),new ne.Notice("Reorganization of the vault completed")}async replaceAllWikiEmbedsWithMarkdownEmbeds(){await this.saveAllOpenNotes();let e=0,n=0;await Ot({abortSignal:this.abortSignal,buildNoticeMessage:i((r,o)=>`Replacing wiki embeds with markdown embeds ${o} - ${r.path}`,"buildNoticeMessage"),items:yn(this.app),processItem:i(async r=>{if(this.settings.isPathIgnored(r.path))return;let o=await this.linksHandler.replaceAllNoteWikilinksWithMarkdownLinks(r.path,!0,this.abortSignal);e+=o,n++},"processItem"),progressBarTitle:"Consistent Attachments and Links: Replacing wiki embeds with markdown embeds...",shouldContinueOnError:!0,shouldShowProgressBar:!0}),e===0?new ne.Notice("No wiki embeds found that need to be replaced"):new ne.Notice(`Replaced ${String(e)} wiki embed${e>1?"s":""} from ${String(n)} note${n>1?"s":""}`)}replaceAllWikiEmbedsWithMarkdownEmbedsCurrentNote(e){let n=this.app.workspace.getActiveFile();return!n||!ee(this.app,n)?!1:(e||Ve(this.app,In(r=>this.linksHandler.replaceAllNoteWikilinksWithMarkdownLinks(n.path,!0,r)),this.abortSignal),!0)}async replaceAllWikilinksWithMarkdownLinks(){await this.saveAllOpenNotes();let e=0,n=0;await Ot({abortSignal:this.abortSignal,buildNoticeMessage:i((r,o)=>`Replacing wikilinks with markdown links ${o} - ${r.path}`,"buildNoticeMessage"),items:yn(this.app),processItem:i(async r=>{if(this.settings.isPathIgnored(r.path))return;let o=await this.linksHandler.replaceAllNoteWikilinksWithMarkdownLinks(r.path,!1,this.abortSignal);e+=o,n++},"processItem"),progressBarTitle:"Consistent Attachments and Links: Replacing wikilinks with markdown links...",shouldContinueOnError:!0,shouldShowProgressBar:!0}),e===0?new ne.Notice("No wiki links found that need to be replaced"):new ne.Notice(`Replaced ${String(e)} wikilink${e>1?"s":""} from ${String(n)} note${n>1?"s":""}`)}replaceAllWikilinksWithMarkdownLinksCurrentNote(e){let n=this.app.workspace.getActiveFile();return!n||!ee(this.app,n)?!1:(e||Ve(this.app,In(r=>this.linksHandler.replaceAllNoteWikilinksWithMarkdownLinks(n.path,!1,r)),this.abortSignal),!0)}async saveAllOpenNotes(){for(let e of this.app.workspace.getLeavesOfType("markdown"))e.view instanceof ne.MarkdownView&&await e.view.save()}async showBackupWarning(){this.settings.shouldShowBackupWarning&&(await Mr({app:this.app,message:createFragment(e=>{e.createDiv({cls:"community-modal-readme"},n=>{n.appendText("Using 'Consistent Attachments and Links' plugin without proper configuration might lead to inconvenient attachment rearrangements or even data loss in your vault."),n.createEl("br"),n.appendText("It is "),n.createEl("strong",{text:"STRONGLY"}),n.appendText(" recommended to backup your vault before using the plugin."),n.createEl("br"),this.settings.hadDangerousSettingsReverted&&(n.appendText("Some of your plugin settings has been changed to their safe values."),n.createEl("br")),n.createEl("a",{href:"https://github.com/dy-sh/obsidian-consistent-attachments-and-links?tab=readme-ov-file",text:"Read more"}),n.appendText(" about how to use the plugin."),n.createEl("br"),n.appendText("This warning will not appear again.")})}),title:createFragment(e=>{(0,ne.setIcon)(e.createSpan(),"triangle-alert"),e.appendText(" Consistent Attachments and Links")})}),await this.settingsManager.editAndSave(e=>{e.shouldShowBackupWarning=!1}))}};var dg=mo;

/* nosourcemap */